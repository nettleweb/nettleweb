/*! For license information please see out.js.LICENSE.txt */
https://nettleweb.com/


/*! Copyright (C) 2024 nettleweb.com; All rights reserved. !*/
"use strict";

(()=>{function e(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function t(){return new TransformStream({transform(t,n){!function(t,n){
Ut&&t.data instanceof Blob?t.data.arrayBuffer().then(e).then(n):Ft&&(t.data instanceof ArrayBuffer||Ht(t.data))?n(e(t.data)):$t(t,!1,(e=>{qt||(qt=new TextEncoder),n(qt.encode(e))}))}(t,(e=>{const r=e.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){
i=new Uint8Array(3);const e=new DataView(i.buffer);e.setUint8(0,126),e.setUint16(1,r)}else{i=new Uint8Array(9);const e=new DataView(i.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(r))}t.data&&"string"!=typeof t.data&&(i[0]|=128),n.enqueue(i),n.enqueue(e)}))}})}function n(e){
return e.reduce(((e,t)=>e+t.length),0)}function r(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function i(e){if(e)return function(e){
for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}function s(e,...t){return t.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}function o(e,t){t.useNativeTimers?(e.setTimeoutFn=tn.bind(en),e.clearTimeoutFn=nn.bind(en)):(e.setTimeoutFn=en.setTimeout.bind(en),
e.clearTimeoutFn=en.clearTimeout.bind(en))}function a(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function c(){}function l(){for(let e in dn.requests)dn.requests.hasOwnProperty(e)&&dn.requests[e].abort()}function d(e){const t=e.xdomain;try{
if("undefined"!=typeof XMLHttpRequest&&(!t||cn))return new XMLHttpRequest}catch(e){}if(!t)try{return new(en[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}function h(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]")
;-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=gn.exec(e||""),s={},o=14;for(;o--;)s[bn[o]]=i[o]||"";return-1!=n&&-1!=r&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),
s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=function(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1),"/"==t.slice(-1)&&r.splice(r.length-1,1),r}(0,s.path),s.queryKey=function(e,t){
const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,s.query),s}function u(e){return En&&(e instanceof ArrayBuffer||xn(e))||An&&e instanceof Blob||Tn&&e instanceof File}function p(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){
for(let t=0,n=e.length;t<n;t++)if(p(e[t]))return!0;return!1}if(u(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return p(e.toJSON(),!0);for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&p(e[t]))return!0;return!1}function f(e){const t=[],n=e.data,r=e
;return r.data=m(n,t),r.attachments=t.length,{packet:r,buffers:t}}function m(e,t){if(!e)return e;if(u(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=Array(e.length);for(let r=0;r<e.length;r++)n[r]=m(e[r],t);return n}
if("object"==typeof e&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=m(e[r],t));return n}return e}function g(e,t){return e.data=b(e.data,t),delete e.attachments,e}function b(e,t){if(!e)return e;if(e&&!0===e._placeholder){
if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=b(e[n],t);else if("object"==typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=b(e[n],t));return e}function y(e){
return"[object Object]"===Object.prototype.toString.call(e)}function w(e,t,n){return e.on(t,n),function(){e.off(t,n)}}function v(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}function _(e,t){
"object"==typeof e&&(t=e,e=void 0);const n=function(e,t="",n){let r=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),
/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+"//"+e:"https://"+e),r=h(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host
;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=zn[i]&&s in zn[i].nsps;let a
;return t.forceNew||t["force new connection"]||!1===t.multiplex||o?a=new Nn(r,t):(zn[i]||(zn[i]=new Nn(r,t)),a=zn[i]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}function k(){try{return"object"==typeof indexedDB}catch(e){return!1}}function E(){return new Promise(((e,t)=>{try{let n=!0
;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}
function x(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(C(n)&&C(s)){if(!x(n,s))return!1}else if(n!==s)return!1}for(const e of r)if(!n.includes(e))return!1;return!0}function C(e){return null!==e&&"object"==typeof e}
function A(e,t=Yn,n=Xn){const r=t*Math.pow(n,e),i=Math.round(Qn*r*(Math.random()-.5)*2);return Math.min(Jn,r+i)}function T(e){return e&&e._delegate?e._delegate:e}function S(e){
return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(pr||(pr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(vr(this),t),j(fr.get(this))}:function(...t){
return j(e.apply(vr(this),t))}:function(t,...n){const r=e.call(vr(this),t,...n);return gr.set(r,t.sort?t.sort():[t]),j(r)}}function L(e){return"function"==typeof e?S(e):(e instanceof IDBTransaction&&function(e){if(mr.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{
e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));mr.set(e,t)}(e),
hr(e,ur||(ur=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,wr):e)}function j(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(j(e.result)),r()
},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&fr.set(t,e)})).catch((()=>{})),yr.set(t,e),t}(e);if(br.has(e))return br.get(e);const t=L(e);return t!==e&&(br.set(e,t),yr.set(t,e)),t}
function I(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=j(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(j(o.result),e.oldVersion,e.newVersion,j(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{
s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}function O(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Er.get(t))return Er.get(t)
;const n=t.replace(/FromIndex$/,""),r=t!==n,i=kr.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!_r.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(t.shift())),
(await Promise.all([o[n](...t),i&&s.done]))[0]};return Er.set(t,s),s}function D(e,t){try{e.container.addComponent(t)}catch(n){Sr.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function R(e){const t=e.name
;if(ii.has(t))return Sr.debug(`There were multiple attempts to register component ${t}.`),!1;ii.set(t,e);for(const t of ni.values())D(t,e);for(const t of ri.values())D(t,e);return!0}function B(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0})
;return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function N(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const r=Object.assign({name:ei,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw si.create("bad-app-name",{appName:i+""});if(n||(n=qn()),
!n)throw si.create("no-options");const s=ni.get(i);if(s){if(x(n,s.options)&&x(r,s.config))return s;throw si.create("duplicate-app",{appName:i})}const o=new rr(i);for(const e of ii.values())o.addComponent(e);const a=new oi(n,r,o);return ni.set(i,a),a}function z(e,t,n){var r
;let i=null!==(r=ti[e])&&void 0!==r?r:e;n&&(i+="-"+n);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),
o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Sr.warn(e.join(" "))}R(new er(i+"-version",(()=>({library:i,version:t})),"VERSION"))}function P(){return di||(di=I(ai,ci,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(li)}catch(e){}}}).catch((e=>{
throw si.create("idb-open",{originalErrorMessage:e.message})}))),di}async function M(e,t){try{const n=(await P()).transaction(li,"readwrite"),r=n.objectStore(li);await r.put(t,U(e)),await n.done}catch(e){if(e instanceof Zn)Sr.warn(e.message);else{const t=si.create("idb-set",{
originalErrorMessage:null==e?void 0:e.message});Sr.warn(t.message)}}}function U(e){return`${e.name}!${e.options.appId}`}function F(){return(new Date).toISOString().substring(0,10)}function H(e){return Fn(JSON.stringify({version:2,heartbeats:e})).length}function $(e){
return e instanceof Zn&&e.code.includes("request-failed")}function V({projectId:e}){return`${wi}/projects/${e}/installations`}function q(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function W(e,t){
const n=(await t.json()).error;return _i.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Z({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}
function G(e,{refreshToken:t}){const n=Z(e);return n.append("Authorization",function(e){return`${yi} ${e}`}(t)),n}async function K(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Y(e){return new Promise((t=>{setTimeout(t,e)}))}function X(){try{const e=new Uint8Array(17)
;(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return ki.test(t)?t:Ei}catch(e){return Ei}}function J(e){return`${e.appName}!${e.appId}`}
function Q(e,t){const n=J(e);ee(n,t),function(e,t){const n=te();n&&n.postMessage({key:e,fid:t}),ne()}(n,t)}function ee(e,t){const n=xi.get(e);if(n)for(const e of n)e(t)}function te(){return!Ci&&"BroadcastChannel"in self&&(Ci=new BroadcastChannel("[Firebase] FID Change"),Ci.onmessage=e=>{
ee(e.data.key,e.data.fid)}),Ci}function ne(){0===xi.size&&Ci&&(Ci.close(),Ci=null)}function re(){return Li||(Li=I(Ai,Ti,{upgrade:(e,t)=>{0===t&&e.createObjectStore(Si)}})),Li}async function ie(e,t){const n=J(e),r=(await re()).transaction(Si,"readwrite"),i=r.objectStore(Si),s=await i.get(n)
;return await i.put(t,n),await r.done,s&&s.fid===t.fid||Q(e,t.fid),t}async function se(e){const t=J(e),n=(await re()).transaction(Si,"readwrite");await n.objectStore(Si).delete(t),await n.done}async function oe(e,t){
const n=J(e),r=(await re()).transaction(Si,"readwrite"),i=r.objectStore(Si),s=await i.get(n),o=t(s);return void 0===o?await i.delete(n):await i.put(o,n),await r.done,!o||s&&s.fid===o.fid||Q(e,o.fid),o}async function ae(e){let t;const n=await oe(e.appConfig,(n=>{const r=function(e){const t=e||{
fid:X(),registrationStatus:0};return de(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(_i.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{
const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=V(e),i=Z(e),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={fid:n,authVersion:yi,appId:e.appId,sdkVersion:bi},a={method:"POST",headers:i,
body:JSON.stringify(o)},c=await K((()=>fetch(r,a)));if(c.ok){const e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:q(e.authToken)}}throw await W("Create Installation",c)}(e,t);return ie(e.appConfig,n)}catch(n){
throw $(n)&&409===n.customData.serverCode?await se(e.appConfig):await ie(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:ce(e)}:{installationEntry:t}}(e,r)
;return t=i.registrationPromise,i.installationEntry}));return n.fid===Ei?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function ce(e){let t=await le(e.appConfig);for(;1===t.registrationStatus;)await Y(100),t=await le(e.appConfig);if(0===t.registrationStatus){
const{installationEntry:t,registrationPromise:n}=await ae(e);return n||t}return t}function le(e){return oe(e,(e=>{if(!e)throw _i.create("installation-not-found");return de(e)}))}function de(e){return 1===(t=e).registrationStatus&&t.registrationTime+gi<Date.now()?{fid:e.fid,registrationStatus:0}:e
;var t}async function he({appConfig:e,heartbeatServiceProvider:t},n){const r=function(e,{fid:t}){return`${V(e)}/${t}/authTokens:generate`}(e,n),i=G(e,n),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={installation:{
sdkVersion:bi,appId:e.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await K((()=>fetch(r,a)));if(c.ok)return q(await c.json());throw await W("Generate Auth Token",c)}async function ue(e,t=!1){let n;const r=await oe(e.appConfig,(r=>{if(!fe(r))throw _i.create("not-registered")
;const i=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+vi}(e)}(i))return r;if(1===i.requestStatus)return n=async function(e,t){let n=await pe(e.appConfig)
;for(;1===n.authToken.requestStatus;)await Y(100),n=await pe(e.appConfig);const r=n.authToken;return 0===r.requestStatus?ue(e,t):r}(e,t),r;{if(!navigator.onLine)throw _i.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()}
;return Object.assign(Object.assign({},e),{authToken:t})}(r);return n=async function(e,t){try{const n=await he(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await ie(e.appConfig,r),n}catch(n){if(!$(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){
const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await ie(e.appConfig,n)}else await se(e.appConfig);throw n}}(e,t),t}}));return n?await n:r.authToken}function pe(e){return oe(e,(e=>{if(!fe(e))throw _i.create("not-registered");const t=e.authToken
;return 1===(n=t).requestStatus&&n.requestTime+gi<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function fe(e){return void 0!==e&&2===e.registrationStatus}async function me(e,t=!1){const n=e;return await async function(e){
const{registrationPromise:t}=await ae(e);t&&await t}(n),(await ue(n,t)).token}function ge(e){return _i.create("missing-app-config-values",{valueName:e})}function be(e){if(!e.startsWith(zi)){const t=Mi.create("invalid-gtag-resource",{gtagURL:e});return Pi.warn(t.message),""}return e}function ye(e){
return Promise.all(e.map((e=>e.catch((e=>e)))))}function we(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:be}),r=document.createElement("script"),i=`${zi}?l=${e}&id=${t}`
;r.src=n?null==n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function ve(e,t,n,r){return async function(i,...s){try{if("event"===i){const[r,i]=s;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await ye(n)
;for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(e){Pi.error(e)}}(e,t,n,r,i)}else if("config"===i){const[i,o]=s;await async function(e,t,n,r,i,s){const o=r[i];try{
if(o)await t[o];else{const e=(await ye(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(e){Pi.error(e)}e("config",i,s)}(e,t,n,r,i,o)}else if("consent"===i){const[t,n]=s;e("consent",t,n)}else if("get"===i){const[t,n,r]=s;e("get",t,n,r)}else if("set"===i){const[t]=s;e("set",t)
}else e(i,...s)}catch(e){Pi.error(e)}}}function _e(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function ke(e,t=Fi,n){const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw Mi.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r}
;throw Mi.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Hi;return setTimeout((async()=>{a.abort()}),void 0!==n?n:Bi),Ee({appId:r,apiKey:i,measurementId:s},o,a,t)}async function Ee(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=Fi){
var s;const{appId:o,measurementId:a}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(Mi.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(r,t)}catch(e){
if(a)return Pi.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+` provided in the "measurementId" field in the local Firebase config. [${null==e?void 0:e.message}]`),{appId:o,measurementId:a};throw e}try{
const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:_e(r)},s=Ni.replace("{app-id}",n),o=await fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(e){}
throw Mi.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return i.deleteThrottleMetadata(o),t}catch(t){const c=t;if(!function(e){if(!(e instanceof Zn&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t
}(c)){if(i.deleteThrottleMetadata(o),a)return Pi.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+` provided in the "measurementId" field in the local Firebase config. [${null==c?void 0:c.message}]`),{appId:o,measurementId:a};throw t}
const l=503===Number(null===(s=null==c?void 0:c.customData)||void 0===s?void 0:s.httpStatus)?A(n,i.intervalMillis,Ui):A(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return i.setThrottleMetadata(o,d),Pi.debug(`Calling attemptFetch again in ${l} millis`),Ee(e,d,r,i)}}
function xe(e){Vi=e}function Ce(e){$i=e}async function Ae(e,t,n,r,i,s,o){var a;const c=ke(e);c.then((t=>{n[t.measurementId]=t.appId,
e.options.measurementId&&t.measurementId!==e.options.measurementId&&Pi.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)
})).catch((e=>Pi.error(e))),t.push(c);const l=async function(){if(!k())return Pi.warn(Mi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await E()}catch(e){return Pi.warn(Mi.create("indexeddb-unavailable",{
errorInfo:null==e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[d,h]=await Promise.all([c,l]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(zi)&&n.src.includes(e))return n;return null
})(s)||we(s,d.measurementId),Vi&&(i("consent","default",Vi),xe(void 0)),i("js",new Date);const u=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return u[Ri]="firebase",u.update=!0,null!=h&&(u[Di]=h),i("config",d.measurementId,u),$i&&(i("set",$i),Ce(void 0)),d.measurementId}function Te(){
const e=[];if(function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()&&e.push("This is a browser extension environment."),
"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=Mi.create("invalid-analytics-context",{errorInfo:t});Pi.warn(n.message)}}function Se(e,t,n){Te();const r=e.options.appId
;if(!r)throw Mi.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Mi.create("no-api-key")
;Pi.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+e.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}
if(null!=Wi[r])throw Mi.create("already-exists",{id:r});if(!Qi){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Xi);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),
window[i]=ve(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(Wi,Zi,Gi,Xi,Ji);Yi=e,Ki=t,Qi=!0}return Wi[r]=Ae(e,Zi,Gi,t,Ki,Xi,n),new qi(e)}function Le(e=function(e=ei){const t=ni.get(e);if(!t&&e===ei&&qn())return N();if(!t)throw si.create("no-app",{appName:e});return t}()){const t=B(e=T(e),Oi)
;return t.isInitialized()?t.getImmediate():function(e,t={}){const n=B(e,Oi);if(n.isInitialized()){const e=n.getImmediate();if(x(t,n.getOptions()))return e;throw Mi.create("already-initialized")}const r=n.initialize({options:t});return r}(e)}function je(e,t,n,r){e=T(e),async function(e,t,n,r,i){
if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(Yi,Wi[e.app.options.appId],t,n,r).catch((e=>Pi.error(e)))}function Ie(e){if("string"!=typeof e||!e)throw Error("expected a non-empty string, got: "+e)}function Oe(e){
if("number"!=typeof e)throw Error("expected a number, got: "+e)}function De(e){return function(e,t){const n=new Set,r=[];for(const i of e){const e=t(i);n.has(e)||(n.add(e),r.push(i))}return r}(e,(e=>e.unicode))}function Re(e,t,n){n.onerror=()=>t(n.error),n.onblocked=()=>t(Error("IDB blocked")),
n.onsuccess=()=>e(n.result)}async function Be(e){const t=await new Promise(((t,n)=>{const r=indexedDB.open(e,Cs);Vs[e]=r,r.onupgradeneeded=e=>{e.oldVersion<As&&function(e){function t(t,n,r){const i=n?e.createObjectStore(t,{keyPath:n}):e.createObjectStore(t)
;if(r)for(const[e,[t,n]]of Object.entries(r))i.createIndex(e,t,{multiEntry:n});return i}t(Ss),t(Ts,Os,{[Is]:[js,!0],[Ns]:[[Rs,Bs]],[Hs]:[$s,!0]}),t(Ls,void 0,{[Ds]:[""]})}(r.result)},Re(t,n,r)}));return t.onclose=()=>ze(e),t}function Ne(e,t,n,r){return new Promise(((i,s)=>{
const o=e.transaction(t,n,{durability:"relaxed"}),a="string"==typeof t?o.objectStore(t):t.map((e=>o.objectStore(e)));let c;r(a,o,(e=>{c=e})),o.oncomplete=()=>i(c),o.onerror=()=>s(o.error)}))}function ze(e){const t=Vs[e],n=t&&t.result;if(n){n.close();const t=Ws[e];if(t)for(const e of t)e()}
delete Vs[e],delete qs[e],delete Ws[e]}function Pe(e){return e.split(/[\s_]+/).map((e=>!e.match(/\w/)||Zs.has(e)?e.toLowerCase():e.replace(/[)(:,]/g,"").replace(/\u2019/g,"'").toLowerCase())).filter(Boolean)}function Me(e){return e.filter(Boolean).map((e=>e.toLowerCase())).filter((e=>e.length>=Gs))}
function Ue(e,t,n,r){e[t](n).onsuccess=e=>r&&r(e.target.result)}function Fe(e,t,n){Ue(e,"get",t,n)}function He(e,t,n){Ue(e,"getAll",t,n)}function $e(e){e.commit&&e.commit()}function Ve(e,t){const n=function(e,t){let n=e[0];for(let r=1;r<e.length;r++){const i=e[r];t(n)>t(i)&&(n=i)}return n
}(e,(e=>e.length)),r=[];for(const i of n)e.some((e=>-1===e.findIndex((e=>t(e)===t(i)))))||r.push(i);return r}async function qe(e,t,n,r){try{const i=function(e){const t=e.map((({annotation:e,emoticon:t,group:n,order:r,shortcodes:i,skins:s,tags:o,emoji:a,version:c})=>{const l={annotation:e,group:n,
order:r,tags:o,tokens:[...new Set(Me([...(i||[]).map(Pe).flat(),...(o||[]).map(Pe).flat(),...Pe(e),t]))].sort(),unicode:a,version:c};if(t&&(l.emoticon=t),i&&(l.shortcodes=i),s){l.skinTones=[],l.skinUnicodes=[],l.skinVersions=[];for(const{tone:e,emoji:t,version:n}of s)l.skinTones.push(e),
l.skinUnicodes.push(t),l.skinVersions.push(n)}return l}));return t}(t);await Ne(e,[Ts,Ss],Fs,(([e,t],s)=>{function o(){2==++l&&function(){if(a!==r||c!==n){e.clear();for(const t of i)e.put(t);t.put(r,zs),t.put(n,Ps),$e(s)}}()}let a,c,l=0;Fe(t,zs,(e=>{a=e,o()})),Fe(t,Ps,(e=>{c=e,o()}))}))}finally{}}
async function We(e,t){const n=Me(Pe(t));return n.length?Ne(e,Ts,Us,((e,t,r)=>{const i=[],s=()=>{const e=Ve(i,(e=>e.unicode));r(e.sort(((e,t)=>e.order<t.order?-1:1)))};for(let t=0;t<n.length;t++){const r=n[t],o=t===n.length-1?IDBKeyRange.bound(r,r+"\uffff",!1,!0):IDBKeyRange.only(r)
;He(e.index(Is),o,(e=>{i.push(e),i.length===n.length&&s()}))}})):[]}async function Ze(e,t){const n=await We(e,t);if(!n.length){const n=e=>(e.shortcodes||[]).includes(t.toLowerCase());return await async function(e,t){return Ne(e,Ts,Us,((e,n,r)=>{let i;const s=()=>{
e.getAll(i&&IDBKeyRange.lowerBound(i,!0),50).onsuccess=e=>{const n=e.target.result;for(const e of n)if(i=e.unicode,t(e))return r(e);if(n.length<50)return r();s()}};s()}))}(e,n)||null}return n.filter((e=>{const n=(e.shortcodes||[]).map((e=>e.toLowerCase()));return n.includes(t.toLowerCase())
}))[0]||null}function Ge(e,t,n){return Ne(e,t,Us,((e,t,r)=>Fe(e,n,r)))}function Ke(e){!function(e){const t=e&&Array.isArray(e),n=t&&e.length&&(!e[0]||Ys.some((t=>!(t in e[0]))));if(!t||n)throw Error("Custom emojis are in the wrong format")}(e)
;const t=(e,t)=>e.name.toLowerCase()<t.name.toLowerCase()?-1:1,n=e.sort(t),r=function(e,t){const n=new Map;for(const r of e){const e=t(r);for(const t of e){let e=n;for(let n=0;n<t.length;n++){const r=t.charAt(n);let i=e.get(r);i||(i=new Map,e.set(r,i)),e=i}let i=e.get(Ks);i||(i=[],e.set(Ks,i)),
i.push(r)}}return(e,t)=>{let r=n;for(let t=0;t<e.length;t++){const n=e.charAt(t),i=r.get(n);if(!i)return[];r=i}if(t)return r.get(Ks)||[];const i=[],s=[r];for(;s.length;){const e=[...s.shift().entries()].sort(((e,t)=>e[0]<t[0]?-1:1));for(const[t,n]of e)t===Ks?i.push(...n):s.push(n)}return i}}(e,(e=>{
const t=new Set;if(e.shortcodes)for(const n of e.shortcodes)for(const e of Pe(n))t.add(e);return t})),i=e=>r(e,!0),s=e=>r(e,!1),o=new Map,a=new Map;for(const t of e){a.set(t.name.toLowerCase(),t);for(const e of t.shortcodes||[])o.set(e.toLowerCase(),t)}return{all:n,search:e=>{const n=Pe(e)
;return Ve(n.map(((e,t)=>(t<n.length-1?i:s)(e))),(e=>e.name)).sort(t)},byShortcode:e=>o.get(e.toLowerCase()),byName:e=>a.get(e.toLowerCase())}}function Ye(e){if(!e)return e;if(Xs&&(e=structuredClone(e)),delete e.tokens,e.skinTones){const t=e.skinTones.length;e.skins=Array(t)
;for(let n=0;n<t;n++)e.skins[n]={tone:e.skinTones[n],unicode:e.skinUnicodes[n],version:e.skinVersions[n]};delete e.skinTones,delete e.skinUnicodes,delete e.skinVersions}return e}function Xe(e,t){if(2!==Math.floor(e.status/100))throw Error("Failed to fetch: "+t+":  "+e.status)}async function Je(e){
const t=await fetch(e);Xe(t,e);const n=t.headers.get("etag"),r=await t.json();return function(e){if(!e||!Array.isArray(e)||!e[0]||"object"!=typeof e[0]||Js.some((t=>!(t in e[0]))))throw Error("Emoji data is in the wrong format")}(r),[n,r]}async function Qe(e){let t=function(e){
for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=-1;++i<t;)r[i]=e.charCodeAt(i);return n}(JSON.stringify(e));const n=function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=-1;++i<r;)t+=String.fromCharCode(n[i]);return t}(await crypto.subtle.digest("SHA-1",t));return btoa(n)}
async function et(e,t){let n,r=await async function(e){const t=await fetch(e,{method:"HEAD"});Xe(t,e);const n=t.headers.get("etag");return n}(t);if(!r){const e=await Je(t);r=e[0],n=e[1],r||(r=await Qe(n))}await async function(e,t,n){const[r,i]=await Promise.all([zs,Ps].map((t=>Ge(e,Ss,t))))
;return r===n&&i===t}(e,t,r)||(n||(n=(await Je(t))[1]),await qe(e,n,t,r))}function tt(e){return e.unicode.includes("\u200d")}function nt(e){const t=ao(e,"#000"),n=ao(e,"#fff");return t&&n&&co(t,n)}function rt(e){e.preventDefault(),e.stopPropagation()}function it(e,t,n){
return(t+=e?-1:1)<0?t=n.length-1:t>=n.length&&(t=0),t}function st(e,t){const n=new Set,r=[];for(const i of e){const e=t(i);n.has(e)||(n.add(e),r.push(i))}return r}function ot(e){{const t=document.createRange();return t.selectNode(e.firstChild),t.getBoundingClientRect().width}}function at(e,t,n){
let r=e.get(t);return r||(r=n(),e.set(t,r)),r}function ct(e){return""+e}function lt(e,t){const{targetNode:n}=t;let{targetParentNode:r}=t,i=!1;r?i=function(e,t){let n=e.firstChild,r=0;for(;n;){if(t[r]!==n)return!0;n=n.nextSibling,r++}return r!==t.length}(r,e):(i=!0,t.targetNode=void 0,
t.targetParentNode=r=n.parentNode),i&&function(e,t){xo?e.replaceChildren(...t):(e.innerHTML="",e.append(...t))}(r,e)}function dt(e){let t="",n=!1,r=!1,i=-1;const s=new Map,o=[];for(let a=0,c=e.length;a<c;a++){const l=e[a];if(t+=l,a===c-1)break;for(let e=0;e<l.length;e++)switch(l.charAt(e)){case"<":
"/"===l.charAt(e+1)?o.pop():(n=!0,o.push(++i));break;case">":n=!1,r=!1;break;case"=":r=!0}const d=at(s,o[o.length-1],(()=>[]));let h,u,p;if(r){const t=/(\S+)="?([^"=]*)$/.exec(l);h=t[1],u=t[2],p=/^[^">]*/.exec(e[a+1])[0]}const f={attributeName:h,attributeValuePre:u,attributeValuePost:p,
expressionIndex:a};d.push(f),n||r||(t+=" ")}const a=function(e){const t=document.createElement("template");return t.innerHTML=e,t}(t);return{template:a,elementsToBindings:s}}function ht(e,t,n){for(let r=0;r<e.length;r++){const i=e[r],s={binding:i,targetNode:i.attributeName?t:t.firstChild,
targetParentNode:void 0,currentExpression:void 0};n.push(s)}}function ut(e){const{template:t,elementsToBindings:n}=at(_o,e,(()=>dt(e))),r=t.cloneNode(!0).content.firstElementChild,i=function(e,t){const n=[];let r;if(1===t.size&&(r=t.get(0)))ht(r,e,n);else{
const r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT);let i=e,s=-1;do{const e=t.get(++s);e&&ht(e,i,n)}while(i=r.nextNode())}return n}(r,n);return function(e){return function(e,t){for(const n of t){
const{targetNode:t,currentExpression:r,binding:{expressionIndex:i,attributeName:s,attributeValuePre:o,attributeValuePost:a}}=n,c=e[i];if(r!==c)if(n.currentExpression=c,s)t.setAttribute(s,o+ct(c)+a);else{let e;Array.isArray(c)?lt(c,n):c instanceof Element?(e=c,t.replaceWith(e)):t.nodeValue=ct(c),
e&&(n.targetNode=e)}}}(e,i),r}}function pt(e,t,n,r,i,s,o,a,c){function l(e,n,r){
return f(e,((e,i)=>p`<button role="${n?"option":"menuitem"}" aria-selected="${n?i===t.activeSearchItem:""}" aria-label="${d(e,t.currentSkinTone)}" title="${h(e)}" class="${"emoji"+(n&&i===t.activeSearchItem?" active":"")+(e.unicode?"":" custom-emoji")}" id="${`${r}-${e.id}`}" style="${e.unicode?"":`--custom-emoji-background: url(${JSON.stringify(e.url)})`}">${e.unicode?u(e,t.currentSkinTone):""}</button>`),(e=>`${r}-${e.id}`))
}const{labelWithSkin:d,titleForEmoji:h,unicodeWithSkin:u}=n,{html:p,map:f}=function(e){const t=at(ko,e,(()=>new Map));let n=Eo;return{map:function(e,t,r){return e.map(((e,i)=>{const s=n;n=r(e);try{return t(e,i)}finally{n=s}}))},html:function(e,...r){const i=at(t,e,(()=>new Map))
;return at(i,n,(()=>ut(e)))(r)}}
}(t),m=p`<section data-ref="rootElement" class="picker" aria-label="${t.i18n.regionLabel}" style="${t.pickerStyle||""}"><div class="pad-top"></div><div class="search-row"><div class="search-wrapper"><input id="search" class="search" type="search" role="combobox" enterkeyhint="search" placeholder="${t.i18n.searchLabel}" autocapitalize="none" autocomplete="off" spellcheck="true" aria-expanded="${!(!t.searchMode||!t.currentEmojis.length)}" aria-controls="search-results" aria-describedby="search-description" aria-autocomplete="list" aria-activedescendant="${t.activeSearchItemId?"emo-"+t.activeSearchItemId:""}" data-ref="searchElement" data-on-input="onSearchInput" data-on-keydown="onSearchKeydown"><label class="sr-only" for="search">${t.i18n.searchLabel}</label> <span id="search-description" class="sr-only">${t.i18n.searchDescription}</span></div><div class="skintone-button-wrapper ${t.skinTonePickerExpandedAfterAnimation?"expanded":""}"><button id="skintone-button" class="emoji ${t.skinTonePickerExpanded?"hide-focus":""}" aria-label="${t.skinToneButtonLabel}" title="${t.skinToneButtonLabel}" aria-describedby="skintone-description" aria-haspopup="listbox" aria-expanded="${t.skinTonePickerExpanded}" aria-controls="skintone-list" data-on-click="onClickSkinToneButton">${t.skinToneButtonText||""}</button></div><span id="skintone-description" class="sr-only">${t.i18n.skinToneDescription}</span><div data-ref="skinToneDropdown" id="skintone-list" class="skintone-list hide-focus ${t.skinTonePickerExpanded?"":"hidden no-animate"}" style="transform:translateY(${t.skinTonePickerExpanded?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))"})" role="listbox" aria-label="${t.i18n.skinTonesLabel}" aria-activedescendant="skintone-${t.activeSkinTone}" aria-hidden="${!t.skinTonePickerExpanded}" tabIndex="-1" data-on-focusout="onSkinToneOptionsFocusOut" data-on-click="onSkinToneOptionsClick" data-on-keydown="onSkinToneOptionsKeydown" data-on-keyup="onSkinToneOptionsKeyup">${f(t.skinTones,((e,n)=>p`<div id="skintone-${n}" class="emoji ${n===t.activeSkinTone?"active":""}" aria-selected="${n===t.activeSkinTone}" role="option" title="${t.i18n.skinTones[n]}" aria-label="${t.i18n.skinTones[n]}">${e}</div>`),(e=>e))}</div></div><div class="nav" role="tablist" style="grid-template-columns:repeat(${t.groups.length},1fr)" aria-label="${t.i18n.categoriesLabel}" data-on-keydown="onNavKeydown" data-on-click="onNavClick">${f(t.groups,(e=>p`<button role="tab" class="nav-button" aria-controls="tab-${e.id}" aria-label="${t.i18n.categories[e.name]}" aria-selected="${!t.searchMode&&t.currentGroup.id===e.id}" title="${t.i18n.categories[e.name]}" data-group-id="${e.id}"><div class="nav-emoji emoji">${e.emoji}</div></button>`),(e=>e.id))}</div><div class="indicator-wrapper"><div class="indicator" style="transform:translateX(${(t.isRtl?-1:1)*t.currentGroupIndex*100}%)"></div></div><div class="message ${t.message?"":"gone"}" role="alert" aria-live="polite">${t.message||""}</div><div data-ref="tabpanelElement" class="tabpanel ${!t.databaseLoaded||t.message?"gone":""}" role="${t.searchMode?"region":"tabpanel"}" aria-label="${t.searchMode?t.i18n.searchResultsLabel:t.i18n.categories[t.currentGroup.name]}" id="${t.searchMode?"":"tab-"+t.currentGroup.id}" tabIndex="0" data-on-click="onEmojiClick"><div data-action="calculateEmojiGridStyle">${f(t.currentEmojisWithCategories,((e,n)=>p`<div><div id="menu-label-${n}" class="category ${1===t.currentEmojisWithCategories.length&&""===t.currentEmojisWithCategories[0].category?"gone":""}" aria-hidden="true">${t.searchMode?t.i18n.searchResultsLabel:e.category?e.category:t.currentEmojisWithCategories.length>1?t.i18n.categories.custom:t.i18n.categories[t.currentGroup.name]}</div><div class="emoji-menu ${0===n||t.searchMode||-1!==t.currentGroup.id?"":"visibility-auto"}" style="${"--num-rows: "+Math.ceil(e.emojis.length/t.numColumns)}" data-action="updateOnIntersection" role="${t.searchMode?"listbox":"menu"}" aria-labelledby="menu-label-${n}" id="${t.searchMode?"search-results":""}">${l(e.emojis,t.searchMode,"emo")}</div></div>`),(e=>e.category))}</div></div><div class="favorites onscreen emoji-menu ${t.message?"gone":""}" role="menu" aria-label="${t.i18n.favoritesLabel}" data-on-click="onEmojiClick">${l(t.currentFavorites,!1,"fav")}</div><button data-ref="baselineEmoji" aria-hidden="true" tabindex="-1" class="abs-pos hidden emoji baseline-emoji">ðŸ˜€</button></section>`,g=(t,n)=>{
for(const r of e.querySelectorAll(`[${t}]`))n(r,r.getAttribute(t))};if(c){e.appendChild(m);for(const e of["click","focusout","input","keydown","keyup"])g("data-on-"+e,((t,n)=>{t.addEventListener(e,r[n])}));g("data-ref",((e,t)=>{s[t]=e})),o.addEventListener("abort",(()=>{e.removeChild(m)}))}
g("data-action",((e,t)=>{let n=a.get(t);n||a.set(t,n=new WeakSet),n.has(e)||(n.add(e),i[t](e))}))}function ft(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function mt(e,t){function n(){const{customEmoji:e,database:t}=u,n=e||To
;t.customEmoji!==n&&(t.customEmoji=n)}function r(e){const t=function(e,t,n){let r=!0;for(const i of e){const e=ot(n(i));void 0===wo&&(wo=ot(t));const s=e/1.8<wo;uo.set(i.unicode,s),s||(r=!1)}return r}(e,l.baselineEmoji,g);t?T():u.currentEmojis=[...u.currentEmojis]}function i(e){
return!e.unicode||!tt(e)||uo.get(e.unicode)}async function s(e){const t=u.emojiVersion||await ho();return e.filter((({version:e})=>!e||e<=t))}async function o(e){return function(e,t){const n=e=>{const n={};for(const r of e)"number"==typeof r.tone&&r.version<=t&&(n[r.tone]=r.unicode);return n}
;return e.map((({unicode:e,skins:t,shortcodes:r,url:i,name:s,category:o,annotation:a})=>({unicode:e,name:s,shortcodes:r,url:i,category:o,annotation:a,id:e||s,skins:t&&n(t)})))}(e,u.emojiVersion||await ho())}async function a(e){
const t=await u.database.getEmojiByUnicodeOrName(e),n=[...u.currentEmojis,...u.currentFavorites].find((t=>t.id===e)),r=n.unicode&&k(n,u.currentSkinTone);await u.database.incrementFavoriteEmojiCount(e),b("emoji-click",{emoji:t,skinTone:u.currentSkinTone,...r&&{unicode:r},...n.name&&{name:n.name}})}
function c(e){u.currentSkinTone=e,u.skinTonePickerExpanded=!1,m("skintone-button"),b("skin-tone-change",{skinTone:e}),u.database.setPreferredSkinTone(e)}const l={},d=new AbortController,h=d.signal,{state:u,createEffect:p}=function(e){let t,n=!1;const r=new Map,i=new Set;let s;const o=()=>{
if(n)return;const e=[...i];i.clear();try{for(const t of e)t()}finally{s=!1,i.size&&(s=!0,Co(o))}},a=new Proxy({},{get(e,n){if(t){let e=r.get(n);e||(e=new Set,r.set(n,e)),e.add(t)}return e[n]},set(e,t,n){if(e[t]!==n){e[t]=n;const a=r.get(t);if(a){for(const e of a)i.add(e);s||(s=!0,Co(o))}}return!0}})
;return e.addEventListener("abort",(()=>{n=!0})),{state:a,createEffect:e=>{const n=()=>{const r=t;t=n;try{return e()}finally{t=r}};return n()}}}(h),f=new Map;So(u,{skinToneEmoji:void 0,i18n:void 0,database:void 0,customEmoji:void 0,customCategorySorting:void 0,emojiVersion:void 0}),So(u,t),So(u,{
initialLoad:!0,currentEmojis:[],currentEmojisWithCategories:[],rawSearchText:"",searchText:"",searchMode:!1,activeSearchItem:-1,message:void 0,skinTonePickerExpanded:!1,skinTonePickerExpandedAfterAnimation:!1,currentSkinTone:0,activeSkinTone:0,skinToneButtonText:void 0,pickerStyle:void 0,
skinToneButtonLabel:"",skinTones:[],currentFavorites:[],defaultFavoriteEmojis:void 0,numColumns:8,isRtl:!1,currentGroupIndex:0,groups:to,databaseLoaded:!1,activeSearchItemId:void 0}),p((()=>{u.currentGroup!==u.groups[u.currentGroupIndex]&&(u.currentGroup=u.groups[u.currentGroupIndex])}))
;const m=t=>{e.getElementById(t).focus()},g=t=>e.getElementById("emo-"+t.id),b=(e,t)=>{l.rootElement.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0,composed:!0}))},y=(e,t)=>e.id===t.id,w=(e,t)=>{const{category:n,emojis:r}=e,{category:i,emojis:s}=t;return n===i&&ft(r,s,y)},v=e=>{
ft(u.currentEmojis,e,y)||(u.currentEmojis=e)},_=e=>{u.searchMode!==e&&(u.searchMode=e)},k=(e,t)=>t&&e.skins&&e.skins[t]||e.unicode,E={labelWithSkin:(e,t)=>{return(n=[e.name||k(e,t),e.annotation,...e.shortcodes||To].filter(Boolean),st(n,(e=>e))).join(", ");var n},
titleForEmoji:e=>e.annotation||(e.shortcodes||To).join(", "),unicodeWithSkin:k},x={onClickSkinToneButton:function(e){u.skinTonePickerExpanded=!u.skinTonePickerExpanded,u.activeSkinTone=u.currentSkinTone,u.skinTonePickerExpanded&&(rt(e),yo((()=>m("skintone-list"))))},onEmojiClick:async function(e){
const{target:t}=e;t.classList.contains("emoji")&&(rt(e),a(t.id.substring(4)))},onNavClick:function(e){const{target:t}=e,n=t.closest(".nav-button");if(!n)return;const r=parseInt(n.dataset.groupId,10);l.searchElement.value="",u.rawSearchText="",u.searchText="",u.activeSearchItem=-1,
u.currentGroupIndex=u.groups.findIndex((e=>e.id===r))},onNavKeydown:function(e){const{target:t,key:n}=e,r=t=>{t&&(rt(e),t.focus())};switch(n){case"ArrowLeft":return r(t.previousElementSibling);case"ArrowRight":return r(t.nextElementSibling);case"Home":return r(t.parentElement.firstElementChild)
;case"End":return r(t.parentElement.lastElementChild)}},onSearchKeydown:function(e){if(!u.searchMode||!u.currentEmojis.length)return;const t=t=>{rt(e),u.activeSearchItem=it(t,u.activeSearchItem,u.currentEmojis)};switch(e.key){case"ArrowDown":return t(!1);case"ArrowUp":return t(!0);case"Enter":
if(-1!==u.activeSearchItem)return rt(e),a(u.currentEmojis[u.activeSearchItem].id);u.activeSearchItem=0}},onSkinToneOptionsClick:function(e){const{target:{id:t}}=e,n=t&&t.match(/^skintone-(\d)/);n&&(rt(e),c(parseInt(n[1],10)))},onSkinToneOptionsFocusOut:async function(e){const{relatedTarget:t}=e
;t&&"skintone-list"===t.id||(u.skinTonePickerExpanded=!1)},onSkinToneOptionsKeydown:function(e){if(!u.skinTonePickerExpanded)return;const t=async t=>{rt(e),u.activeSkinTone=t};switch(e.key){case"ArrowUp":return t(it(!0,u.activeSkinTone,u.skinTones));case"ArrowDown":
return t(it(!1,u.activeSkinTone,u.skinTones));case"Home":return t(0);case"End":return t(u.skinTones.length-1);case"Enter":return rt(e),c(u.activeSkinTone);case"Escape":return rt(e),u.skinTonePickerExpanded=!1,m("skintone-button")}},onSkinToneOptionsKeyup:function(e){
if(u.skinTonePickerExpanded)return" "===e.key?(rt(e),c(u.activeSkinTone)):void 0},onSearchInput:function(e){u.rawSearchText=e.target.value}},C={calculateEmojiGridStyle:function(e){!function(e,t,n){let r;vo?(r=new ResizeObserver(n),r.observe(e)):yo(n),t.addEventListener("abort",(()=>{
r&&r.disconnect()}))}(e,h,(()=>{{const e=getComputedStyle(l.rootElement),t=parseInt(e.getPropertyValue("--num-columns"),10),n="rtl"===e.getPropertyValue("direction");u.numColumns=t,u.isRtl=n}}))},updateOnIntersection:function(e){!function(e,t,n){{const r=e.closest(".tabpanel");let i=Ao.get(r)
;i||(i=new IntersectionObserver(n,{root:r,rootMargin:"50% 0px 50% 0px",threshold:0}),Ao.set(r,i),t.addEventListener("abort",(()=>{i.disconnect()}))),i.observe(e)}}(e,h,(e=>{for(const{target:t,isIntersecting:n}of e)t.classList.toggle("onscreen",n)}))}};let A=!0;p((()=>{pt(e,u,E,x,C,l,h,f,A),A=!1})),
u.emojiVersion||ho().then((e=>{e||(u.message=u.i18n.emojiUnsupportedMessage)})),p((()=>{u.database&&async function(){let e=!1;const t=setTimeout((()=>{e=!0,u.message=u.i18n.loadingMessage}),1e3);try{await u.database.ready(),u.databaseLoaded=!0}catch(e){u.message=u.i18n.networkErrorMessage}finally{
clearTimeout(t),e&&(e=!1,u.message="")}}()})),p((()=>{u.pickerStyle=`\n      --num-groups: ${u.groups.length}; \n      --indicator-opacity: ${u.searchMode?0:1}; \n      --num-skintones: 6;`})),p((()=>{u.customEmoji&&u.database&&n()})),p((()=>{
u.customEmoji&&u.customEmoji.length?u.groups!==eo&&(u.groups=eo):u.groups!==to&&(u.currentGroupIndex&&u.currentGroupIndex--,u.groups=to)})),p((()=>{!async function(){u.databaseLoaded&&(u.currentSkinTone=await u.database.getPreferredSkinTone())}()})),p((()=>{
u.skinTones=[,,,,,,].fill().map(((e,t)=>function(e,t){if(0===t)return e;const n=e.indexOf(mo);return-1!==n?e.substring(0,n)+String.fromCodePoint(go+t-1)+e.substring(n):(e.endsWith(po)&&(e=e.substring(0,e.length-1)),e+fo+String.fromCodePoint(bo+t-1))}(u.skinToneEmoji,t)))})),p((()=>{
u.skinToneButtonText=u.skinTones[u.currentSkinTone]})),p((()=>{u.skinToneButtonLabel=u.i18n.skinToneLabel.replace("{skinTone}",u.i18n.skinTones[u.currentSkinTone])})),p((()=>{u.databaseLoaded&&async function(){
const{database:e}=u,t=(await Promise.all(io.map((t=>e.getEmojiByUnicodeOrName(t))))).filter(Boolean);u.defaultFavoriteEmojis=t}()})),p((()=>{u.databaseLoaded&&u.defaultFavoriteEmojis&&async function(){n()
;const{database:e,defaultFavoriteEmojis:t,numColumns:r}=u,i=await e.getTopFavoriteEmoji(r),s=await o(st([...i,...t],(e=>e.unicode||e.name)).slice(0,r));u.currentFavorites=s}()})),p((()=>{!async function(){const{searchText:e,currentGroup:t,databaseLoaded:n,customEmoji:r}=u;if(n)if(e.length>=2){
const t=await async function(e){return o(await s(await u.database.getEmojiBySearchQuery(e)))}(e);u.searchText===e&&(v(t),_(!0))}else{const{id:e}=t;if(-1!==e||r&&r.length){const t=await async function(e){const t=-1===e?u.customEmoji:await u.database.getEmojiByGroup(e);return o(await s(t))}(e)
;u.currentGroup.id===e&&(v(t),_(!1))}}else u.currentEmojis=[],u.searchMode=!1}()}));const T=()=>{yo((()=>{var e;(e=l.tabpanelElement)&&(e.scrollTop=0)}))};return p((()=>{const{currentEmojis:e,emojiVersion:t}=u,n=e.filter((e=>e.unicode)).filter((e=>tt(e)&&!uo.has(e.unicode)));if(!t&&n.length)v(e),
yo((()=>r(n)));else{const n=t?e:e.filter(i);v(n),T()}})),p((()=>{})),p((()=>{const e=function(){const{searchMode:e,currentEmojis:t}=u;if(e)return[{category:"",emojis:t}];const n=new Map;for(const e of t){const t=e.category||"";let r=n.get(t);r||(r=[],n.set(t,r)),r.push(e)}
return[...n.entries()].map((([e,t])=>({category:e,emojis:t}))).sort(((e,t)=>u.customCategorySorting(e.category,t.category)))}();(e=>{ft(u.currentEmojisWithCategories,e,w)||(u.currentEmojisWithCategories=e)})(e)})),p((()=>{
u.activeSearchItemId=-1!==u.activeSearchItem&&u.currentEmojis[u.activeSearchItem].id})),p((()=>{const{rawSearchText:e}=u;no((()=>{u.searchText=(e||"").trim(),u.activeSearchItem=-1}))})),p((()=>{u.skinTonePickerExpanded?l.skinToneDropdown.addEventListener("transitionend",(()=>{
u.skinTonePickerExpandedAfterAnimation=!0}),{once:!0}):u.skinTonePickerExpandedAfterAnimation=!1})),{$set(e){So(u,e)},$destroy(){d.abort()}}}function gt(e){let t=e.length;for(;--t>=0;)e[t]=0}function bt(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,
this.has_stree=e&&e.length}function yt(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function wt(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function vt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,
this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ha,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,
this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,
this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Ya(this.dyn_ltree),Ya(this.dyn_dtree),Ya(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Ya(this.heap),
this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Ya(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function _t(e){this.options=gc.assign({level:Sc,method:jc,
chunkSize:16384,windowBits:15,memLevel:8,strategy:Lc},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new vc,this.strm.avail_out=0
;let n=fc.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Ac)throw Error(ya[n]);if(t.header&&fc.deflateSetHeader(this.strm,t.header),t.dictionary){let e
;if(e="string"==typeof t.dictionary?wc.string2buf(t.dictionary):"[object ArrayBuffer]"===_c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=fc.deflateSetDictionary(this.strm,e),n!==Ac)throw Error(ya[n]);this._dict_set=!0}}function kt(e,t){const n=new _t(t);if(n.push(e,!0),
n.err)throw n.msg||ya[n.err];return n.result}function Et(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,
this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,
this.was=0}function xt(e){this.options=gc.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),
t.windowBits>15&&t.windowBits<48&&(15&t.windowBits||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new vc,this.strm.avail_out=0;let n=bl.inflateInit2(this.strm,t.windowBits);if(n!==kl)throw Error(ya[n]);if(this.header=new yl,
bl.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=wc.string2buf(t.dictionary):"[object ArrayBuffer]"===wl.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=bl.inflateSetDictionary(this.strm,t.dictionary),
n!==kl)))throw Error(ya[n])}function Ct(e,t){const n=new xt(t);if(n.push(e),n.err)throw n.msg||ya[n.err];return n.result}function At(e){try{return new DataView(e,0,0),!0}catch(e){return!1}}function Tt(e){const t=e.buffer,n=e.byteOffset,r=e.byteLength;return 0===n&&r===t.byteLength?t:t.slice(n,n+r)}
function St(e,t){const n=Ml.encode(t),r=new DataView(new ArrayBuffer(4),0,4);r.setUint32(0,n.byteLength,!0),e.write(r),e.write(n)}function Lt(e,t){const n=new DataView(new ArrayBuffer(5),0,5);n.setUint8(0,102),n.setUint32(1,t.byteLength,!0),e.write(n),e.write(t)}function jt(e,t){switch(typeof t){
case"string":e.write(101),St(e,t);break;case"boolean":e.write([10,t?1:0]);break;case"undefined":e.write(0);break;case"number":{if(Number.isSafeInteger(t))if(t>=0){if(t<=255){const n=new DataView(new ArrayBuffer(2),0,2);return n.setUint8(0,10),n.setUint8(1,t),void e.write(n)}if(t<=65535){
const n=new DataView(new ArrayBuffer(3),0,3);return n.setUint8(0,11),n.setUint16(1,t,!0),void e.write(n)}if(t<=4294967295){const n=new DataView(new ArrayBuffer(5),0,5);return n.setUint8(0,12),n.setUint32(1,t,!0),void e.write(n)}}else{if(t>=-128&&t<128){const n=new DataView(new ArrayBuffer(2),0,2)
;return n.setUint8(0,20),n.setInt8(1,t),void e.write(n)}if(t>=-32768&&t<32768){const n=new DataView(new ArrayBuffer(3),0,3);return n.setUint8(0,21),n.setInt16(1,t,!0),void e.write(n)}if(t>=-2147483648&&t<2147483648){const n=new DataView(new ArrayBuffer(5),0,5);return n.setUint8(0,22),
n.setInt32(1,t,!0),void e.write(n)}}const n=new DataView(new ArrayBuffer(9),0,9);n.setUint8(0,33),n.setFloat64(1,t,!0),e.write(n)}break;case"bigint":{const n=new DataView(new ArrayBuffer(9),0,9);t>=0n?(n.setUint8(0,13),n.setBigUint64(1,t,!0)):(n.setUint8(0,23),n.setBigUint64(1,t,!0)),e.write(n)}
break;case"object":null===t?e.write(255):Array.isArray(t)?function(e,t){const n=new DataView(new ArrayBuffer(5),0,5);n.setUint8(0,99),n.setUint32(1,t.length,!0),e.write(n);for(const n of t)jt(e,n)}(e,t):At(t)?Lt(e,t):ArrayBuffer.isView(t)?Lt(e,Tt(t)):function(e,t){
if("function"==typeof t.toJSON)return void jt(e,t.toJSON());const n=Object.keys(t);{const t=new DataView(new ArrayBuffer(5),0,5);t.setUint8(0,100),t.setUint32(1,n.length,!0),e.write(t)}for(const r of n){const n=t[r];switch(typeof n){case"boolean":case"bigint":case"number":case"object":case"string":
case"undefined":St(e,r),jt(e,n)}}}(e,t)}}function It(e,t){if("object"!=typeof e||null==e)throw Error("Data must be a non-null object or array.");if("object"!=typeof(t||(t={})))throw Error("The options parameter must be an object.");{const t=new Zl;jt(t,e),e=t.toArrayBuffer()}
const n=t.compressMethod||0,r=t.compressLevel||5;switch(n){case 0:break;case 1:e=zl(e,{raw:!0,level:r,memLevel:9,chunkSize:8192,windowBits:15});break;case 3:e=zl(e,{gzip:!0,level:r,memLevel:9,chunkSize:8192,windowBits:15});break;case 2:case 4:case 5:case 6:throw Error("Not implemented");default:
throw Error("Unknown compress method: "+n)}const i=new Uint8Array(new ArrayBuffer(e.byteLength+7));return i[0]=128,i[1]=99,i[2]=98,i[3]=106,i[4]=102,i[5]=1,i[6]=n,i.set(new Uint8Array(e),7),i.buffer}function Ot(e){const t=e.read();switch(t){case 0:return;case 255:return null;case 10:return e.read()
;case 11:return new DataView(e.readNBytes(2),0,2).getUint16(0,!0);case 12:return new DataView(e.readNBytes(4),0,4).getUint32(0,!0);case 13:return new DataView(e.readNBytes(8),0,8).getBigUint64(0,!0);case 20:return e.read()<<8>>8;case 21:return new DataView(e.readNBytes(2),0,2).getInt16(0,!0)
;case 22:return new DataView(e.readNBytes(4),0,4).getInt32(0,!0);case 23:return new DataView(e.readNBytes(8),0,8).getBigInt64(0,!0);case 32:return new DataView(e.readNBytes(4),0,4).getFloat32(0,!0);case 33:return new DataView(e.readNBytes(8),0,8).getFloat64(0,!0);case 99:return function(e){
const t=new DataView(e.readNBytes(4),0,4).getUint32(0,!0),n=Array(t);for(let r=0;r<t;r++)n[r]=Ot(e);return n}(e);case 100:return function(e){const t=new DataView(e.readNBytes(4),0,4).getUint32(0,!0),n=Object.create(null)
;for(let r=0;r<t;r++)n[Ml.decode(e.readNBytes(new DataView(e.readNBytes(4),0,4).getUint32(0,!0)))]=Ot(e);return n}(e);case 101:return Ml.decode(e.readNBytes(new DataView(e.readNBytes(4),0,4).getUint32(0,!0)));case 102:return e.readNBytes(new DataView(e.readNBytes(4),0,4).getUint32(0,!0));default:
throw Error("Parse Error: Invalid data ID: "+t)}}function Dt(e,t){if("object"!=typeof(t||{}))throw Error("The options parameter must be an object.");if(ArrayBuffer.isView(e)&&(e=Tt(e)),!At(e))throw Error("The data parameter must be an ArrayBuffer.");{const t=new Uint8Array(e,0,e.byteLength)
;if(128!==t[0]||99!==t[1]||98!==t[2]||106!==t[3]||102!==t[4]||1!==t[5])throw Error("Parse Error: Input data is not valid.");switch(t[6]){case 0:e=e.slice(7);break;case 1:e=Pl(e.slice(7),{raw:!0,chunkSize:8192,windowBits:15}).buffer;break;case 3:e=Pl(e.slice(7),{chunkSize:8192,windowBits:15}).buffer
;break;case 2:case 4:case 5:case 6:throw Error("Not implemented");default:throw Error("Parse Error: Unknown compress method.")}}return Ot(new Vl(e))}var Rt={d:(e,t)=>{for(var n in t)Rt.o(t,n)&&!Rt.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}};Rt.g=function(){
if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),Rt.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Rt.r=e=>{
"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var Bt={};Rt.r(Bt),Rt.d(Bt,{Decoder:()=>On,Encoder:()=>In,PacketType:()=>jn,protocol:()=>Ln});var Nt={};Rt.r(Nt),Rt.d(Nt,{decode:()=>Dt,
encode:()=>It});const zt=Object.create(null);zt.open="0",zt.close="1",zt.ping="2",zt.pong="3",zt.message="4",zt.upgrade="5",zt.noop="6";const Pt=Object.create(null);Object.keys(zt).forEach((e=>{Pt[zt[e]]=e}));const Mt={type:"error",data:"parser error"
},Ut="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Ft="function"==typeof ArrayBuffer,Ht=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,$t=({type:e,data:t},n,r)=>Ut&&t instanceof Blob?n?r(t):Vt(t,r):Ft&&(t instanceof ArrayBuffer||Ht(t))?n?r(t):Vt(new Blob([t]),r):r(zt[e]+(t||"")),Vt=(e,t)=>{
const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};let qt;const Wt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Zt="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<64;e++)Zt[Wt.charCodeAt(e)]=e
;const Gt="function"==typeof ArrayBuffer,Kt=(e,t)=>{if("string"!=typeof e)return{type:"message",data:Xt(e,t)};const n=e.charAt(0);return"b"===n?{type:"message",data:Yt(e.substring(1),t)}:Pt[n]?e.length>1?{type:Pt[n],data:e.substring(1)}:{type:Pt[n]}:Mt},Yt=(e,t)=>{if(Gt){const n=(e=>{
let t,n,r,i,s,o=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);const l=new ArrayBuffer(o),d=new Uint8Array(l);for(t=0;t<a;t+=4)n=Zt[e.charCodeAt(t)],r=Zt[e.charCodeAt(t+1)],i=Zt[e.charCodeAt(t+2)],s=Zt[e.charCodeAt(t+3)],d[c++]=n<<2|r>>4,d[c++]=(15&r)<<4|i>>2,
d[c++]=(3&i)<<6|63&s;return l})(e);return Xt(n,t)}return{base64:!0,data:e}},Xt=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer;let Jt;i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},
(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},
i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this
;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{}
;for(var t=Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},i.prototype.emitReserved=i.prototype.emit,i.prototype.listeners=function(e){
return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}
;const Qt="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),en="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")(),tn=en.setTimeout,nn=en.clearTimeout;class rn extends Error{constructor(e,t,n){super(e),
this.description=t,this.context=n,this.type="TransportError"}}class sn extends i{constructor(e){super(),this.writable=!1,o(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new rn(e,t,n)),this}open(){
return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){
const t=Kt(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){
const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t=""
;for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class on extends sn{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){
this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}_poll(){this._polling=!0,this.doPoll(),
this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split("\x1e"),r=[];for(let e=0;e<n.length;e++){const i=Kt(n[e],t);if(r.push(i),"error"===i.type)break}return r})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),
"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])}
;"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,r=Array(n);let i=0;e.forEach(((e,s)=>{$t(e,!1,(e=>{r[s]=e,++i===n&&t(r.join("\x1e"))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){
const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=a()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let an=!1;try{an="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(Ga){}
const cn=an;class ln extends on{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",
data:e});n.on("success",t),n.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}class dn extends i{constructor(e,t,n){super(),this.createRequest=e,
o(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e;const t=s(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd
;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}
}catch(e){}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{n.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),
this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader("set-cookie"))),
4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn((()=>{this._onError("number"==typeof n.status?n.status:0)}),0))},n.send(this._data)}catch(e){return void this.setTimeoutFn((()=>{this._onError(e)}),0)}"undefined"!=typeof document&&(this._index=dn.requestsCount++,
dn.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=c,e)try{this._xhr.abort()}catch(e){}"undefined"!=typeof document&&delete dn.requests[this._index],this._xhr=null}}
_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}dn.requestsCount=0,dn.requests={},
"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",l):"function"==typeof addEventListener&&addEventListener("onpagehide"in en?"pagehide":"unload",l,!1));const hn=function(){const e=d({xdomain:!1});return e&&null!==e.responseType
}(),un="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class pn extends sn{get name(){return"websocket"}doOpen(){
const e=this.uri(),t=this.opts.protocols,n=un?{}:s(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity")
;this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),
this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1
;$t(n,this.supportsBinary,(e=>{try{this.doWrite(n,e)}catch(e){}r&&Qt((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{}
;return this.opts.timestampRequests&&(t[this.opts.timestampParam]=a()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const fn=en.WebSocket||en.MozWebSocket,mn={websocket:class extends pn{createSocket(e,t,n){return un?new fn(e,t,n):t?new fn(e,t):new fn(e)}doWrite(e,t){this.ws.send(t)}},
webtransport:class extends sn{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then((()=>{this.onClose()})).catch((e=>{
this.onError("webtransport error",e)})),this._transport.ready.then((()=>{this._transport.createBidirectionalStream().then((e=>{const i=function(e,t){Jt||(Jt=new TextDecoder);const i=[];let s=0,o=-1,a=!1;return new TransformStream({transform(c,l){for(i.push(c);;){if(0===s){if(n(i)<1)break
;const e=r(i,1);a=!(128&~e[0]),o=127&e[0],s=o<126?3:126===o?1:2}else if(1===s){if(n(i)<2)break;const e=r(i,2);o=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),s=3}else if(2===s){if(n(i)<8)break;const e=r(i,8),t=new DataView(e.buffer,e.byteOffset,e.length),a=t.getUint32(0);if(a>2097151){
l.enqueue(Mt);break}o=4294967296*a+t.getUint32(4),s=3}else{if(n(i)<o)break;const e=r(i,o);l.enqueue(Kt(a?e:Jt.decode(e),t)),s=0}if(0===o||o>e){l.enqueue(Mt);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(i).getReader(),o=t();o.readable.pipeTo(e.writable),
this._writer=o.writable.getWriter();const a=()=>{s.read().then((({done:e,value:t})=>{e||(this.onPacket(t),a())})).catch((()=>{}))};a();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this._writer.write(c).then((()=>this.onOpen()))}))}))}write(e){this.writable=!1
;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;this._writer.write(n).then((()=>{r&&Qt((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends ln{constructor(e){super(e)
;const t=e&&e.forceBase64;this.supportsBinary=hn&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new dn(d,this.uri(),e)}}
},gn=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,bn=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],yn="function"==typeof addEventListener&&"function"==typeof removeEventListener,wn=[]
;yn&&addEventListener("offline",(()=>{wn.forEach((e=>e()))}),!1);class vn extends i{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,
e&&"object"==typeof e&&(t=e,e=null),e){const n=h(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=h(t.host).host);o(this,t),
this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),
this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach((e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e})),this.opts=Object.assign({path:"/engine.io",
agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),
"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let e=0,r=n.length;e<r;e++){let r=n[e].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}(this.opts.query)),yn&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{
this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},
wn.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,
secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0)
;const e=this.opts.rememberUpgrade&&vn.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),
this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",(e=>this._onClose("transport close",e)))}onOpen(){this.readyState="open",vn.priorWebsocketSuccess="websocket"===this.transport.name,
this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":
this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){
this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){
this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn((()=>{this._onClose("ping timeout")}),e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){
this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets()
;this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const r=this.writeBuffer[n].data
;if(r&&(e+="string"==typeof(t=r)?function(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}var t
;return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Qt((()=>{this._onClose("ping timeout")}),this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){
return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const i={type:e,data:t,options:n}
;this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)}
;return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}_onError(e){if(vn.priorWebsocketSuccess=!1,
this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){
if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),yn&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){
const e=wn.indexOf(this._offlineEventListener);-1!==e&&wn.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}vn.protocol=4;class _n extends vn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),
"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){function t(){o||(o=!0,l(),s.close(),s=null)}function n(){c("transport closed")}function r(){c("socket closed")}function i(e){s&&e.name!==s.name&&t()}
let s=this.createTransport(e),o=!1;vn.priorWebsocketSuccess=!1;const a=()=>{o||(s.send([{type:"ping",data:"probe"}]),s.once("packet",(e=>{if(!o)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;vn.priorWebsocketSuccess="websocket"===s.name,
this.transport.pause((()=>{o||"closed"!==this.readyState&&(l(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())}))}else{const e=Error("probe error");e.transport=s.name,this.emitReserved("upgradeError",e)}})))},c=e=>{
const n=Error("probe error: "+e);n.transport=s.name,t(),this.emitReserved("upgradeError",n)},l=()=>{s.removeListener("open",a),s.removeListener("error",c),s.removeListener("close",n),this.off("close",r),this.off("upgrading",i)};s.once("open",a),s.once("error",c),s.once("close",n),
this.once("close",r),this.once("upgrading",i),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((()=>{o||s.open()}),200):s.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[]
;for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}class kn extends _n{constructor(e,t={}){const n="object"==typeof e?e:t
;(!n.transports||n.transports&&"string"==typeof n.transports[0])&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map((e=>mn[e])).filter((e=>!!e))),super(e,n)}}
const En="function"==typeof ArrayBuffer,xn=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Cn=Object.prototype.toString,An="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Cn.call(Blob),Tn="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Cn.call(File),Sn=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Ln=5
;var jn;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(jn||(jn={}));class In{constructor(e){this.replacer=e}encode(e){
return e.type!==jn.EVENT&&e.type!==jn.ACK||!p(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===jn.EVENT?jn.BINARY_EVENT:jn.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==jn.BINARY_EVENT&&e.type!==jn.BINARY_ACK||(t+=e.attachments+"-"),
e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=f(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}class On extends i{constructor(e){super(),this.reviver=e}add(e){let t
;if("string"==typeof e){if(this.reconstructor)throw Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===jn.BINARY_EVENT;n||t.type===jn.BINARY_ACK?(t.type=n?jn.EVENT:jn.ACK,this.reconstructor=new Dn(t),
0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!u(e)&&!e.base64)throw Error("Unknown type: "+e);if(!this.reconstructor)throw Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,
super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===jn[n.type])throw Error("unknown packet type "+n.type);if(n.type===jn.BINARY_EVENT||n.type===jn.BINARY_ACK){const r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const i=e.substring(r,t)
;if(i!=Number(i)||"-"!==e.charAt(t))throw Error("Illegal attachments");n.attachments=Number(i)}if("/"===e.charAt(t+1)){const r=t+1;for(;++t&&","!==e.charAt(t)&&t!==e.length;);n.nsp=e.substring(r,t)}else n.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1;for(;++t;){
const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(!On.isPayloadValid(n.type,r))throw Error("invalid payload");n.data=r}return n}tryParse(e){try{return JSON.parse(e,this.reviver)
}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case jn.CONNECT:return y(t);case jn.DISCONNECT:return void 0===t;case jn.CONNECT_ERROR:return"string"==typeof t||y(t);case jn.EVENT:case jn.BINARY_EVENT:
return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===Sn.indexOf(t[0]));case jn.ACK:case jn.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Dn{constructor(e){this.packet=e,
this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=g(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}
const Rn=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Bn extends i{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},
this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io
;this.subs=[w(e,"open",this.onopen.bind(this)),w(e,"packet",this.onpacket.bind(this)),w(e,"error",this.onerror.bind(this)),w(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),
"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,r,i;if(Rn.hasOwnProperty(e))throw Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),
this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const s={type:jn.EVENT,data:t,options:{}};if(s.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const e=this.ids++,n=t.pop();this._registerAckCallback(e,n),s.id=e}
const o=null===(r=null===(n=this.io.engine)||void 0===n?void 0:n.transport)||void 0===r?void 0:r.writable,a=this.connected&&!(null===(i=this.io.engine)||void 0===i?void 0:i._hasPingExpired());return this.flags.volatile&&!o||(a?(this.notifyOutgoingListeners(s),
this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(e,t){var n;const r=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===r)return void(this.acks[e]=t);const i=this.io.setTimeoutFn((()=>{delete this.acks[e]
;for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,Error("operation has timed out"))}),r),s=(...e)=>{this.io.clearTimeoutFn(i),t.apply(this,e)};s.withError=!0,this.acks[e]=s}emitWithAck(e,...t){return new Promise(((n,r)=>{
const i=(e,t)=>e?r(e):n(t);i.withError=!0,t.push(i),this.emit(e,...t)}))}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push(((e,...r)=>{
if(n===this._queue[0])return null!==e?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...r)),n.pending=!1,this._drainQueue()})),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return
;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){
this.packet({type:jn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){
Object.keys(this.acks).forEach((e=>{if(!this.sendBuffer.some((t=>t.id+""===e))){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,Error("socket has been disconnected"))}}))}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case jn.CONNECT:
e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break
;case jn.EVENT:case jn.BINARY_EVENT:this.onevent(e);break;case jn.ACK:case jn.BINARY_ACK:this.onack(e);break;case jn.DISCONNECT:this.ondisconnect();break;case jn.CONNECT_ERROR:this.destroy();const t=Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){
const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),
this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...r){n||(n=!0,t.packet({type:jn.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),
t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{
this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:jn.DISCONNECT}),
this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){
return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners
;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){
return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this
}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}
v.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=1&Math.floor(10*t)?e+n:e-n}return 0|Math.min(e,this.max)},v.prototype.reset=function(){this.attempts=0},v.prototype.setMin=function(e){this.ms=e},
v.prototype.setMax=function(e){this.max=e},v.prototype.setJitter=function(e){this.jitter=e};class Nn extends i{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,o(this,t),
this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=t.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new v({
min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||Bt;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==t.autoConnect,
this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t
;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}
reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){
!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new kn(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=w(t,"open",(function(){n.onopen(),
e&&e()})),i=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},s=w(t,"error",i);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn((()=>{r(),i(Error("timeout")),t.close()}),e);this.opts.autoUnref&&n.unref(),
this.subs.push((()=>{this.clearTimeoutFn(n)}))}return this.subs.push(r),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine
;this.subs.push(w(e,"ping",this.onping.bind(this)),w(e,"data",this.ondata.bind(this)),w(e,"error",this.onerror.bind(this)),w(e,"close",this.onclose.bind(this)),w(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){
this.onclose("parse error",e)}}ondecoded(e){Qt((()=>{this.emitReserved("packet",e)}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Bn(this,e,t),this.nsps[e]=n),n}_destroy(e){
const t=Object.keys(this.nsps);for(const e of t)if(this.nsps[e].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){
this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),
this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{
const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t)
;this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const zn={};Object.assign(_,{Manager:Nn,Socket:Bn,io:_,connect:_});const Pn=function(e){const t=[]
;let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,
t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Mn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){
return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_()
;const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const i=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,l=i>>2,d=(3&i)<<4|o>>4;let h=(15&o)<<2|c>>6,u=63&c;a||(u=64,s||(h=64)),r.push(n[l],n[d],n[h],n[u])}return r.join("")},encodeString(e,t){
return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Pn(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++]
;t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)
}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const i=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t
;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==s||null==o||null==a)throw new Un;const c=i<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},
this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),
this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Un extends Error{constructor(){super(...arguments),
this.name="DecodeBase64StringError"}}const Fn=function(e){return function(e){const t=Pn(e);return Mn.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Hn=function(e){try{return Mn.decodeString(e,!0)}catch(e){}return null},$n=()=>function(){if("undefined"!=typeof self)return self
;if("undefined"!=typeof window)return window;if(void 0!==Rt.g)return Rt.g;throw Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Vn=()=>{try{return $n()||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__
;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&Hn(e[1]);return t&&JSON.parse(t)})()}catch(e){return}},qn=()=>{var e;return null===(e=Vn())||void 0===e?void 0:e.config}
;class Wn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}class Zn extends Error{
constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Zn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gn.prototype.create)}}class Gn{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){
const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(Kn,((e,n)=>{const r=t[n];return null!=r?r+"":`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new Zn(r,o,n)}}const Kn=/\{\$([^}]+)}/g,Yn=1e3,Xn=2,Jn=144e5,Qn=.5;class er{
constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}
setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const tr="[DEFAULT]";class nr{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,
this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Wn;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)
}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null
;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`)
;if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:tr})}catch(e){}
for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=tr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}
async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=tr){return this.instances.has(e)}
getOptions(e=tr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`)
;if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){var n
;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t)
;if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===tr?void 0:r),options:t}),this.instances.set(e,n),
this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e=tr){return this.component?this.component.multipleInstances?e:tr:e}
shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class rr{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name)
;if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){
if(this.providers.has(e))return this.providers.get(e);const t=new nr(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ir=[];var sr;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",
e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(sr||(sr={}));const or={debug:sr.DEBUG,verbose:sr.VERBOSE,info:sr.INFO,warn:sr.WARN,error:sr.ERROR,silent:sr.SILENT},ar=sr.INFO,cr={[sr.DEBUG]:"log",[sr.VERBOSE]:"log",[sr.INFO]:"info",[sr.WARN]:"warn",[sr.ERROR]:"error"},lr=(e,t)=>{
if(!(t<e.logLevel||((new Date).toISOString(),cr[t])))throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class dr{constructor(e){this.name=e,this._logLevel=ar,this._logHandler=lr,this._userLogHandler=null,ir.push(this)}get logLevel(){return this._logLevel}
set logLevel(e){if(!(e in sr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?or[e]:e}get logHandler(){return this._logHandler}set logHandler(e){
if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,sr.DEBUG,...e),
this._logHandler(this,sr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,sr.VERBOSE,...e),this._logHandler(this,sr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,sr.INFO,...e),this._logHandler(this,sr.INFO,...e)}warn(...e){
this._userLogHandler&&this._userLogHandler(this,sr.WARN,...e),this._logHandler(this,sr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,sr.ERROR,...e),this._logHandler(this,sr.ERROR,...e)}}const hr=(e,t)=>t.some((t=>e instanceof t));let ur,pr
;const fr=new WeakMap,mr=new WeakMap,gr=new WeakMap,br=new WeakMap,yr=new WeakMap;let wr={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return mr.get(e);if("objectStoreNames"===t)return e.objectStoreNames||gr.get(e)
;if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return j(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}
;const vr=e=>yr.get(e),_r=["get","getKey","getAll","getAllKeys","count"],kr=["put","add","delete","clear"],Er=new Map;var xr;xr=wr,wr={...xr,get:(e,t,n)=>O(e,t)||xr.get(e,t,n),has:(e,t)=>!!O(e,t)||xr.has(e,t)};class Cr{constructor(e){this.container=e}getPlatformInfoString(){
return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}
const Ar="@firebase/app",Tr="0.10.11",Sr=new dr("@firebase/app"),Lr="@firebase/app-compat",jr="@firebase/analytics-compat",Ir="@firebase/analytics",Or="@firebase/app-check-compat",Dr="@firebase/app-check",Rr="@firebase/auth",Br="@firebase/auth-compat",Nr="@firebase/database",zr="@firebase/database-compat",Pr="@firebase/functions",Mr="@firebase/functions-compat",Ur="@firebase/installations",Fr="@firebase/installations-compat",Hr="@firebase/messaging",$r="@firebase/messaging-compat",Vr="@firebase/performance",qr="@firebase/performance-compat",Wr="@firebase/remote-config",Zr="@firebase/remote-config-compat",Gr="@firebase/storage",Kr="@firebase/storage-compat",Yr="@firebase/firestore",Xr="@firebase/vertexai-preview",Jr="@firebase/firestore-compat",Qr="firebase",ei="[DEFAULT]",ti={
[Ar]:"fire-core",[Lr]:"fire-core-compat",[Ir]:"fire-analytics",[jr]:"fire-analytics-compat",[Dr]:"fire-app-check",[Or]:"fire-app-check-compat",[Rr]:"fire-auth",[Br]:"fire-auth-compat",[Nr]:"fire-rtdb",[zr]:"fire-rtdb-compat",[Pr]:"fire-fn",[Mr]:"fire-fn-compat",[Ur]:"fire-iid",
[Fr]:"fire-iid-compat",[Hr]:"fire-fcm",[$r]:"fire-fcm-compat",[Vr]:"fire-perf",[qr]:"fire-perf-compat",[Wr]:"fire-rc",[Zr]:"fire-rc-compat",[Gr]:"fire-gcs",[Kr]:"fire-gcs-compat",[Yr]:"fire-fst",[Jr]:"fire-fst-compat",[Xr]:"fire-vertex","fire-js":"fire-js",[Qr]:"fire-js-all"
},ni=new Map,ri=new Map,ii=new Map,si=new Gn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config",
"app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.",
"invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",
"idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.",
"finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class oi{constructor(e,t,n){this._isDeleted=!1,
this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new er("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){
return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){
return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw si.create("app-deleted",{appName:this._name})}}
const ai="firebase-heartbeat-database",ci=1,li="firebase-heartbeat-store";let di=null;class hi{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ui(t),
this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=F()
;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return
;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf()
;return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(e){Sr.warn(e)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,
null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=F(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){
if(e.dates.push(i.date),H(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),H(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Fn(JSON.stringify({version:2,heartbeats:n}))
;return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Sr.warn(e),""}}}class ui{constructor(e){
this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!k()&&E().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{
const t=(await P()).transaction(li),n=await t.objectStore(li).get(U(e));return await t.done,n}catch(e){if(e instanceof Zn)Sr.warn(e.message);else{const t=si.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});Sr.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{
heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return M(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t
;if(await this._canUseIndexedDBPromise){const n=await this.read();return M(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}var pi;pi="",R(new er("platform-logger",(e=>new Cr(e)),"PRIVATE")),
R(new er("heartbeat",(e=>new hi(e)),"PRIVATE")),z(Ar,Tr,pi),z(Ar,Tr,"esm2017"),z("fire-js",""),z("firebase","10.13.2","app")
;const fi="@firebase/installations",mi="0.6.9",gi=1e4,bi="w:"+mi,yi="FIS_v2",wi="https://firebaseinstallations.googleapis.com/v1",vi=36e5,_i=new Gn("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',
"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.",
"delete-pending-registration":"Can't delete installation while there is a pending registration request."}),ki=/^[cdef][\w-]{21}$/,Ei="",xi=new Map;let Ci=null;const Ai="firebase-installations-database",Ti=1,Si="firebase-installations-store";let Li=null;const ji="installations",Ii=e=>{
const t=B(e.getProvider("app").getImmediate(),ji).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await ae(t);return r?r.catch(console.error):ue(t).catch(console.error),n.fid}(t),getToken:e=>me(t,e)}};R(new er(ji,(e=>{
const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw ge("App Configuration");if(!e.name)throw ge("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw ge(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,
appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:B(t,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),R(new er("installations-internal",Ii,"PRIVATE")),z(fi,mi),z(fi,mi,"esm2017")
;const Oi="analytics",Di="firebase_id",Ri="origin",Bi=6e4,Ni="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",zi="https://www.googletagmanager.com/gtag/js",Pi=new dr("@firebase/analytics"),Mi=new Gn("analytics","Analytics",{
"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",
"already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.",
"already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}",
"invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",
"indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",
"fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",
"no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',
"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."}),Ui=30,Fi=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}
setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};class Hi{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let $i,Vi;class qi{constructor(e){this.app=e}_delete(){
return delete Wi[this.app.options.appId],Promise.resolve()}}let Wi={},Zi=[];const Gi={};let Ki,Yi,Xi="dataLayer",Ji="gtag",Qi=!1;const es="@firebase/analytics",ts="0.10.8"
;R(new er(Oi,((e,{options:t})=>Se(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t)),"PUBLIC")),R(new er("analytics-internal",(function(e){try{const t=e.getProvider(Oi).getImmediate();return{logEvent:(e,n,r)=>je(t,e,n,r)}}catch(e){
throw Mi.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),z(es,ts),z(es,ts,"esm2017");const ns=function(){for(let e=Object.getPrototypeOf(this);null!=e;e=Object.getPrototypeOf(e))try{delete e.constructor}catch(e){}},rs=Object.freeze(Object.create(null))
;Object.defineProperty(ns,"prototype",{value:rs,writable:!1,enumerable:!1,configurable:!1}),Object.setPrototypeOf(ns,null),Object.freeze(ns);const is=ns;var ss,os=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter")
;if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};ss=new WeakMap;const as=class extends is{constructor(){super(...arguments),
ss.set(this,Object.create(null))}get size(){return Object.keys(os(this,ss,"f")).length}has(e){return e in os(this,ss,"f")}get(e){return os(this,ss,"f")[e]||null}set(e,t){os(this,ss,"f")[e]=t}delete(e){return delete os(this,ss,"f")[e]}clear(){const e=os(this,ss,"f")
;for(const t of Object.keys(e))delete e[t]}keys(){return Object.keys(os(this,ss,"f"))}values(){const e=os(this,ss,"f"),t=[];for(const n of Object.keys(e))t.push(e[n]);return t}entries(){const e=os(this,ss,"f"),t=[];for(const n of Object.keys(e))t.push([n,e[n]]);return t}}
;var cs,ls=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it")
;return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},ds=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter")
;if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n};cs=new WeakMap;const hs=class extends is{get size(){return ls(this,cs,"f").length}constructor(e){super(),
cs.set(this,void 0),ds(this,cs,e,"f")}has(e){return null!=ls(this,cs,"f").getItem(e)}get(e){return ls(this,cs,"f").getItem(e)}set(e,t){ls(this,cs,"f").setItem(e,t)}delete(e){return ls(this,cs,"f").removeItem(e),!0}clear(){ls(this,cs,"f").clear()}keys(){const e=ls(this,cs,"f"),t=e.length,n=Array(t)
;for(let r=0;r<t;r++)n[r]=e.key(r);return n}values(){const e=ls(this,cs,"f"),t=e.length,n=Array(t);for(let r=0;r<t;r++)n[r]=e.getItem(e.key(r));return n}entries(){const e=ls(this,cs,"f"),t=e.length,n=Array(t);for(let r=0;r<t;r++){const t=e.key(r);n[r]=[t,e.getItem(t)]}return n}}
;var us,ps,fs,ms,gs=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it")
;return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},bs=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter")
;if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n};us=new WeakMap,ps=new WeakMap,fs=new WeakMap,ms=new WeakMap;const ys=class extends is{get message(){
return gs(this,fs,"f")}get persistent(){return gs(this,ms,"f")}get localStorage(){return gs(this,us,"f")}get sessionStorage(){return gs(this,ps,"f")}constructor(e){super(),us.set(this,void 0),ps.set(this,void 0),fs.set(this,void 0),ms.set(this,void 0);try{const{localStorage:t,sessionStorage:n}=e
;if(null==t||null==n)throw Error("Required storage interfaces not available.");const r="___whitespider___",i=Date.now().toString(24);if(t.setItem(r,i),t.getItem(r)!==i)throw Error("Local storage test failed: value mismatch");if(n.setItem(r,i),
n.getItem(r)!==i)throw Error("Session storage test failed: value mismatch");bs(this,us,new hs(t),"f"),bs(this,ps,new hs(n),"f"),bs(this,fs,null,"f"),bs(this,ms,!0,"f")}catch(e){bs(this,us,new as,"f"),bs(this,ps,new as,"f"),bs(this,fs,e+"","f"),bs(this,ms,!1,"f")}}
},ws="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vs=new Uint8Array(new ArrayBuffer(256),0,256);for(let e=0;e<64;e++)vs[ws.charCodeAt(e)]=e;const _s={encode:function(e){let t="",n="";const r=e.byteLength,i=new Uint8Array(e,0,r);for(let e=0;e<r;e+=3){
const n=i[e]<<16|i[e+1]<<8|i[e+2];t+=ws[n>>18&63]+ws[n>>12&63]+ws[n>>6&63]+ws[63&n]}const s=r%3;return 1===s?(n="==",t=t.slice(0,-2)):2===s&&(n="=",t=t.slice(0,-1)),t+n},decode:function(e){const t=.75*e.length-(e.endsWith("==")?2:e.endsWith("=")?1:0),n=new ArrayBuffer(t),r=new Uint8Array(n,0,t)
;let i=0;for(let t=0;t<e.length;t+=4){const n=vs[e.charCodeAt(t)]<<18|vs[e.charCodeAt(t+1)]<<12|vs[e.charCodeAt(t+2)]<<6|vs[e.charCodeAt(t+3)];r[i++]=n>>16&255,r[i++]=n>>8&255,r[i++]=255&n}return n}};Object.setPrototypeOf(_s,null),Object.freeze(_s);const ks=_s,Es={encode:function(e){
const t=Array.from(e).map((e=>e.codePointAt(0)||0)),n=[];for(const e of t)e<=127?n.push(e):e<=2047?(n.push(e>>6|192),n.push(63&e|128)):e<=65535?(n.push(e>>12|224),n.push(e>>6&63|128),n.push(63&e|128)):e<=1114111&&(n.push(e>>18|240),n.push(e>>12&63|128),n.push(e>>6&63|128),n.push(63&e|128))
;return new Uint8Array(n).buffer},decode:function(e){const t=new Uint8Array(e);let n="",r=0;for(;r<t.length;){const e=t[r];if(128&e)if(192==(224&e)){const i=t[r+1];n+=String.fromCharCode((31&e)<<6|63&i),r+=2}else if(224==(240&e)){const i=t[r+1],s=t[r+2]
;n+=String.fromCharCode((15&e)<<12|(63&i)<<6|63&s),r+=3}else if(240==(248&e)){const i=(7&e)<<18|(63&t[r+1])<<12|(63&t[r+2])<<6|63&t[r+3];n+=i<=1114111?String.fromCodePoint(i):"\ufffd",r+=4}else n+="\ufffd",r+=1;else n+=String.fromCharCode(e),r+=1}return n}};Object.setPrototypeOf(Es,null),
Object.freeze(Es)
;const xs=Es,Cs=1,As=1,Ts="emoji",Ss="keyvalue",Ls="favorites",js="tokens",Is="tokens",Os="unicode",Ds="count",Rs="group",Bs="order",Ns="group-order",zs="eTag",Ps="url",Ms="skinTone",Us="readonly",Fs="readwrite",Hs="skinUnicodes",$s="skinUnicodes",Vs={},qs={},Ws={},Zs=new Set([":D","XD",":'D","O:)",":X",":P",";P","XP",":L",":Z",":j","8D","XO","8)",":B",":O",":S",":'o","Dx","X(","D:",":C",">0)",":3","</3","<3","\\M/",":E","8#"]),Gs=2,Ks="",Ys=["name","url"],Xs="undefined"!=typeof wrappedJSObject,Js=["annotation","emoji","group","order","version"]
;class Qs{constructor({dataSource:e="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",locale:t="en",customEmoji:n=[]}={}){this.dataSource=e,this.locale=t,this._dbName="emoji-picker-element-"+this.locale,this._db=void 0,this._lazyUpdate=void 0,this._custom=Ke(n),
this._clear=this._clear.bind(this),this._ready=this._init()}async _init(){const e=this._db=await(t=this._dbName,qs[t]||(qs[t]=Be(t)),qs[t]);var t;!function(e,t){let n=Ws[e];n||(n=Ws[e]=[]),n.push(t)}(this._dbName,this._clear);const n=this.dataSource,r=await async function(e){return!await Ge(e,Ss,Ps)
}(e);r?await async function(e,t){let[n,r]=await Je(t);n||(n=await Qe(r)),await qe(e,r,t,n)}(e,n):this._lazyUpdate=et(e,n)}async ready(){const e=async()=>(this._ready||(this._ready=this._init()),this._ready);await e(),this._db||await e()}async getEmojiByGroup(e){return Oe(e),await this.ready(),
De(await async function(e,t){return Ne(e,Ts,Us,((e,n,r)=>{const i=IDBKeyRange.bound([t,0],[t+1,0],!1,!0);He(e.index(Ns),i,r)}))}(this._db,e)).map(Ye)}async getEmojiBySearchQuery(e){return Ie(e),await this.ready(),[...this._custom.search(e),...De(await We(this._db,e)).map(Ye)]}
async getEmojiByShortcode(e){Ie(e),await this.ready();const t=this._custom.byShortcode(e);return t||Ye(await Ze(this._db,e))}async getEmojiByUnicodeOrName(e){Ie(e),await this.ready();const t=this._custom.byName(e);return t||Ye(await async function(e,t){return Ne(e,Ts,Us,((e,n,r)=>Fe(e,t,(n=>{
if(n)return r(n);Fe(e.index(Hs),t,(e=>r(e||null)))}))))}(this._db,e))}async getPreferredSkinTone(){return await this.ready(),await Ge(this._db,Ss,Ms)||0}async setPreferredSkinTone(e){return Oe(e),await this.ready(),function(e,t,n,r){return Ne(e,t,Fs,((e,t)=>{e.put(r,n),$e(t)}))}(this._db,Ss,Ms,e)}
async incrementFavoriteEmojiCount(e){return Ie(e),await this.ready(),t=this._db,n=e,Ne(t,Ls,Fs,((e,t)=>Fe(e,n,(r=>{e.put((r||0)+1,n),$e(t)}))));var t,n}async getTopFavoriteEmoji(e){return Oe(e),await this.ready(),(await function(e,t,n){return 0===n?[]:Ne(e,[Ls,Ts],Us,(([e,r],i,s)=>{const o=[]
;e.index(Ds).openCursor(void 0,"prev").onsuccess=e=>{function i(e){if(o.push(e),o.length===n)return s(o);a.continue()}const a=e.target.result;if(!a)return s(o);const c=a.primaryKey,l=t.byName(c);if(l)return i(l);Fe(r,c,(e=>{if(e)return i(e);a.continue()}))}}))}(this._db,this._custom,e)).map(Ye)}
set customEmoji(e){this._custom=Ke(e)}get customEmoji(){return this._custom.all}async _shutdown(){await this.ready();try{await this._lazyUpdate}catch(e){}}_clear(){this._db=this._ready=this._lazyUpdate=void 0}async close(){await this._shutdown(),await ze(this._dbName)}async delete(){var e
;await this._shutdown(),await(e=this._dbName,new Promise(((t,n)=>{ze(e),Re(t,n,indexedDB.deleteDatabase(e))})))}}
const eo=[[-1,"\u2728","custom"],[0,"\u{1f600}","smileys-emotion"],[1,"\u{1f44b}","people-body"],[3,"\u{1f431}","animals-nature"],[4,"\u{1f34e}","food-drink"],[5,"\u{1f3e0}\ufe0f","travel-places"],[6,"\u26bd","activities"],[7,"\u{1f4dd}","objects"],[8,"\u26d4\ufe0f","symbols"],[9,"\u{1f3c1}","flags"]].map((([e,t,n])=>({
id:e,emoji:t,name:n}))),to=eo.slice(1),no="function"==typeof requestIdleCallback?requestIdleCallback:setTimeout,ro={"\u{1fae8}":15.1,"\u{1fae0}":14,"\u{1f972}":13.1,"\u{1f97b}":12.1,"\u{1f970}":11,"\u{1f929}":5,"\u{1f471}\u200d\u2640\ufe0f":4,"\u{1f923}":3,"\u{1f441}\ufe0f\u200d\u{1f5e8}\ufe0f":2,
"\u{1f600}":1,"\u{1f610}\ufe0f":.7,"\u{1f603}":.6
},io=["\u{1f60a}","\u{1f612}","\u2764\ufe0f","\u{1f44d}\ufe0f","\u{1f60d}","\u{1f602}","\u{1f62d}","\u263a\ufe0f","\u{1f614}","\u{1f629}","\u{1f60f}","\u{1f495}","\u{1f64c}","\u{1f618}"],so='"Twemoji Mozilla","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji","EmojiOne Color","Android Emoji",sans-serif',oo=(e,t)=>e<t?-1:e>t?1:0,ao=(e,t)=>{
const n=document.createElement("canvas");n.width=n.height=1;const r=n.getContext("2d",{willReadFrequently:!0});return r.textBaseline="top",r.font="100px "+so,r.fillStyle=t,r.scale(.01,.01),r.fillText(e,0,0),r.getImageData(0,0,1,1).data},co=(e,t)=>{const n=[...e].join(",")
;return n===[...t].join(",")&&!n.startsWith("0,0,0,")};let lo;const ho=()=>(lo||(lo=new Promise((e=>no((()=>e(function(){const e=Object.entries(ro);try{for(const[t,n]of e)if(nt(t))return n}catch(e){}return e[0][1]}())))))),
lo),uo=new Map,po="\ufe0f",fo="\ud83c",mo="\u200d",go=127995,bo=57339,yo=requestAnimationFrame;let wo,vo="function"==typeof ResizeObserver
;const _o=new WeakMap,ko=new WeakMap,Eo=Symbol("un-keyed"),xo="replaceChildren"in Element.prototype,Co="function"==typeof queueMicrotask?queueMicrotask:e=>Promise.resolve().then(e),Ao=new WeakMap,To=[],{assign:So}=Object;var Lo={categoriesLabel:"Categories",
emojiUnsupportedMessage:"Your browser does not support color emoji.",favoritesLabel:"Favorites",loadingMessage:"Loading\u2026",networkErrorMessage:"Could not load emoji.",regionLabel:"Emoji picker",
searchDescription:"When search results are available, press up or down to select and enter to choose.",searchLabel:"Search",searchResultsLabel:"Search results",skinToneDescription:"When expanded, press up or down to select and enter to choose.",
skinToneLabel:"Choose a skin tone (currently {skinTone})",skinTonesLabel:"Skin tones",skinTones:["Default","Light","Medium-Light","Medium","Medium-Dark","Dark"],categories:{custom:"Custom","smileys-emotion":"Smileys and emoticons","people-body":"People and body",
"animals-nature":"Animals and nature","food-drink":"Food and drink","travel-places":"Travel and places",activities:"Activities",objects:"Objects",symbols:"Symbols",flags:"Flags"}}
;const jo=["customEmoji","customCategorySorting","database","dataSource","i18n","locale","skinToneEmoji","emojiVersion"],Io=`:host{--emoji-font-family:${so}}`;class Oo extends HTMLElement{constructor(e){super(),this.attachShadow({mode:"open"});const t=document.createElement("style")
;t.textContent=':host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--border-radius:0;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){color-scheme:light;--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);border-radius:var(--border-radius);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;scrollbar-gutter:stable;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.emoji-menu.visibility-auto{content-visibility:auto;contain-intrinsic-size:calc(var(--num-columns)*var(--total-emoji-size)) calc(var(--num-rows)*var(--total-emoji-size))}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;height:var(--total-emoji-size);width:var(--total-emoji-size);line-height:1;overflow:hidden;font-family:var(--emoji-font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.onscreen .custom-emoji::after{content:"";width:var(--emoji-size);height:var(--emoji-size);background-repeat:no-repeat;background-position:center center;background-size:contain;background-image:var(--custom-emoji-background)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{overflow-y:auto;scrollbar-gutter:stable;display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}'+Io,
this.shadowRoot.appendChild(t),this._ctx={locale:"en",dataSource:"https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",skinToneEmoji:"\u{1f590}\ufe0f",customCategorySorting:oo,customEmoji:null,i18n:Lo,emojiVersion:null,...e}
;for(const e of jo)"database"!==e&&Object.prototype.hasOwnProperty.call(this,e)&&(this._ctx[e]=this[e],delete this[e]);this._dbFlush()}connectedCallback(){this._cmp||(this._cmp=mt(this.shadowRoot,this._ctx))}disconnectedCallback(){Co((()=>{if(!this.isConnected&&this._cmp){this._cmp.$destroy(),
this._cmp=void 0;const{database:e}=this._ctx;e.close().catch((()=>{}))}}))}static get observedAttributes(){return["locale","data-source","skin-tone-emoji","emoji-version"]}attributeChangedCallback(e,t,n){this._set(e.replace(/-([a-z])/g,((e,t)=>t.toUpperCase())),"emoji-version"===e?parseFloat(n):n)}
_set(e,t){this._ctx[e]=t,this._cmp&&this._cmp.$set({[e]:t}),["locale","dataSource"].includes(e)&&this._dbFlush()}_dbCreate(){const{locale:e,dataSource:t,database:n}=this._ctx;n&&n.locale===e&&n.dataSource===t||this._set("database",new Qs({locale:e,dataSource:t}))}_dbFlush(){
Co((()=>this._dbCreate()))}}const Do={};for(const e of jo)Do[e]={get(){return"database"===e&&this._dbCreate(),this._ctx[e]},set(t){if("database"===e)throw Error("database is read-only");this._set(e,t)}};Object.defineProperties(Oo.prototype,Do),
customElements.get("emoji-picker")||customElements.define("emoji-picker",Oo)
;const Ro=256,Bo=286,No=30,zo=15,Po=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Mo=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Uo=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Fo=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ho=Array(576)
;gt(Ho);const $o=Array(60);gt($o);const Vo=Array(512);gt(Vo);const qo=Array(256);gt(qo);const Wo=Array(29);gt(Wo);const Zo=Array(No);let Go,Ko,Yo;gt(Zo);const Xo=e=>e<256?Vo[e]:Vo[256+(e>>>7)],Jo=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},Qo=(e,t,n)=>{
e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,Jo(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},ea=(e,t,n)=>{Qo(e,n[2*t],n[2*t+1])},ta=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},na=(e,t,n)=>{const r=Array(16);let i,s,o=0
;for(i=1;i<=zo;i++)o=o+n[i-1]<<1,r[i]=o;for(s=0;s<=t;s++){let t=e[2*s+1];0!==t&&(e[2*s]=ta(r[t]++,t))}},ra=e=>{let t;for(t=0;t<Bo;t++)e.dyn_ltree[2*t]=0;for(t=0;t<No;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},ia=e=>{
e.bi_valid>8?Jo(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},sa=(e,t,n,r)=>{const i=2*t,s=2*n;return e[i]<e[s]||e[i]===e[s]&&r[t]<=r[n]},oa=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&sa(t,e.heap[i+1],e.heap[i],e.depth)&&i++,
!sa(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},aa=(e,t,n)=>{let r,i,s,o,a=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+a++],r+=(255&e.pending_buf[e.sym_buf+a++])<<8,i=e.pending_buf[e.sym_buf+a++],0===r?ea(e,i,t):(s=qo[i],ea(e,s+Ro+1,t),o=Po[s],0!==o&&(i-=Wo[s],
Qo(e,i,o)),r--,s=Xo(r),ea(e,s,n),o=Mo[s],0!==o&&(r-=Zo[s],Qo(e,r,o)))}while(a<e.sym_next);ea(e,256,t)},ca=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,a,c,l=-1;for(e.heap_len=0,e.heap_max=573,o=0;o<s;o++)0!==n[2*o]?(e.heap[++e.heap_len]=l=o,
e.depth[o]=0):n[2*o+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[2*c]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=r[2*c+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)oa(e,n,o);c=s;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],oa(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=o,
e.heap[--e.heap_max]=a,n[2*c]=n[2*o]+n[2*a],e.depth[c]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,n[2*o+1]=n[2*a+1]=c,e.heap[1]=c++,oa(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{
const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,c=t.stat_desc.max_length;let l,d,h,u,p,f,m=0;for(u=0;u<=zo;u++)e.bl_count[u]=0;for(n[2*e.heap[e.heap_max]+1]=0,l=e.heap_max+1;l<573;l++)d=e.heap[l],u=n[2*n[2*d+1]+1]+1,
u>c&&(u=c,m++),n[2*d+1]=u,d>r||(e.bl_count[u]++,p=0,d>=a&&(p=o[d-a]),f=n[2*d],e.opt_len+=f*(u+p),s&&(e.static_len+=f*(i[2*d+1]+p)));if(0!==m){do{for(u=c-1;0===e.bl_count[u];)u--;e.bl_count[u]--,e.bl_count[u+1]+=2,e.bl_count[c]--,m-=2}while(m>0)
;for(u=c;0!==u;u--)for(d=e.bl_count[u];0!==d;)h=e.heap[--l],h>r||(n[2*h+1]!==u&&(e.opt_len+=(u-n[2*h+1])*n[2*h],n[2*h+1]=u),d--)}})(e,t),na(n,l,e.bl_count)},la=(e,t,n)=>{let r,i,s=-1,o=t[1],a=0,c=7,l=4;for(0===o&&(c=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],
++a<c&&i===o||(a<l?e.bl_tree[2*i]+=a:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,s=i,0===o?(c=138,l=3):i===o?(c=6,l=3):(c=7,l=4))},da=(e,t,n)=>{let r,i,s=-1,o=t[1],a=0,c=7,l=4;for(0===o&&(c=138,l=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++a<c&&i===o)){
if(a<l)do{ea(e,i,e.bl_tree)}while(0!=--a);else 0!==i?(i!==s&&(ea(e,i,e.bl_tree),a--),ea(e,16,e.bl_tree),Qo(e,a-3,2)):a<=10?(ea(e,17,e.bl_tree),Qo(e,a-3,3)):(ea(e,18,e.bl_tree),Qo(e,a-11,7));a=0,s=i,0===o?(c=138,l=3):i===o?(c=6,l=3):(c=7,l=4)}};let ha=!1;const ua=(e,t,n,r)=>{Qo(e,0+(r?1:0),3),ia(e),
Jo(e,n),Jo(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var pa=(e,t,n,r)=>{let i,s,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0
;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<Ro;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),ca(e,e.l_desc),ca(e,e.d_desc),o=(e=>{let t;for(la(e,e.dyn_ltree,e.l_desc.max_code),la(e,e.dyn_dtree,e.d_desc.max_code),ca(e,e.bl_desc),
t=18;t>=3&&0===e.bl_tree[2*Fo[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==t?ua(e,t,n,r):4===e.strategy||s===i?(Qo(e,2+(r?1:0),3),aa(e,Ho,$o)):(Qo(e,4+(r?1:0),3),((e,t,n,r)=>{let i;for(Qo(e,t-257,5),Qo(e,n-1,5),
Qo(e,r-4,4),i=0;i<r;i++)Qo(e,e.bl_tree[2*Fo[i]+1],3);da(e,e.dyn_ltree,t-1),da(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),aa(e,e.dyn_ltree,e.dyn_dtree)),ra(e),r&&ia(e)},fa={_tr_init:e=>{ha||((()=>{let e,t,n,r,i;const s=Array(16);for(n=0,r=0;r<28;r++)for(Wo[r]=n,
e=0;e<1<<Po[r];e++)qo[n++]=r;for(qo[n-1]=r,i=0,r=0;r<16;r++)for(Zo[r]=i,e=0;e<1<<Mo[r];e++)Vo[i++]=r;for(i>>=7;r<No;r++)for(Zo[r]=i<<7,e=0;e<1<<Mo[r]-7;e++)Vo[256+i++]=r;for(t=0;t<=zo;t++)s[t]=0;for(e=0;e<=143;)Ho[2*e+1]=8,e++,s[8]++;for(;e<=255;)Ho[2*e+1]=9,e++,s[9]++;for(;e<=279;)Ho[2*e+1]=7,e++,
s[7]++;for(;e<=287;)Ho[2*e+1]=8,e++,s[8]++;for(na(Ho,287,s),e=0;e<No;e++)$o[2*e+1]=5,$o[2*e]=ta(e,5);Go=new bt(Ho,Po,257,Bo,zo),Ko=new bt($o,Mo,0,No,zo),Yo=new bt([],Uo,0,19,7)})(),ha=!0),e.l_desc=new yt(e.dyn_ltree,Go),e.d_desc=new yt(e.dyn_dtree,Ko),e.bl_desc=new yt(e.bl_tree,Yo),e.bi_buf=0,
e.bi_valid=0,ra(e)},_tr_stored_block:ua,_tr_flush_block:pa,_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(qo[n]+Ro+1)]++,e.dyn_dtree[2*Xo(t)]++),
e.sym_next===e.sym_end),_tr_align:e=>{Qo(e,2,3),ea(e,256,Ho),(e=>{16===e.bi_valid?(Jo(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},ma=(e,t,n,r)=>{let i=65535&e,s=e>>>16&65535,o=0;for(;0!==n;){o=n>2e3?2e3:n,n-=o;do{
i=i+t[r++]|0,s=s+i|0}while(--o);i%=65521,s%=65521}return i|s<<16};const ga=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var ba=(e,t,n,r)=>{const i=ga,s=r+n;e^=-1;for(let n=r;n<s;n++)e=e>>>8^i[255&(e^t[n])];return~e
},ya={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},wa={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,
Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}
;const{_tr_init:va,_tr_stored_block:_a,_tr_flush_block:ka,_tr_tally:Ea,_tr_align:xa}=fa,{Z_NO_FLUSH:Ca,Z_PARTIAL_FLUSH:Aa,Z_FULL_FLUSH:Ta,Z_FINISH:Sa,Z_BLOCK:La,Z_OK:ja,Z_STREAM_END:Ia,Z_STREAM_ERROR:Oa,Z_DATA_ERROR:Da,Z_BUF_ERROR:Ra,Z_DEFAULT_COMPRESSION:Ba,Z_FILTERED:Na,Z_HUFFMAN_ONLY:za,Z_RLE:Pa,Z_FIXED:Ma,Z_DEFAULT_STRATEGY:Ua,Z_UNKNOWN:Fa,Z_DEFLATED:Ha}=wa,$a=258,Va=262,qa=42,Wa=113,Za=666,Ga=(e,t)=>(e.msg=ya[t],
t),Ka=e=>2*e-(e>4?9:0),Ya=e=>{let t=e.length;for(;--t>=0;)e[t]=0},Xa=e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do{n=e.head[--r],e.head[r]=n>=i?n-i:0}while(--t);t=i,r=t;do{n=e.prev[--r],e.prev[r]=n>=i?n-i:0}while(--t)};let Ja=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const Qa=e=>{const t=e.state
;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},ec=(e,t)=>{
ka(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Qa(e.strm)},tc=(e,t)=>{e.pending_buf[e.pending++]=t},nc=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},rc=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,
t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=ma(e.adler,t,i,n):2===e.state.wrap&&(e.adler=ba(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},ic=(e,t)=>{let n,r,i=e.max_chain_length,s=e.strstart,o=e.prev_length,a=e.nice_match
;const c=e.strstart>e.w_size-Va?e.strstart-(e.w_size-Va):0,l=e.window,d=e.w_mask,h=e.prev,u=e.strstart+$a;let p=l[s+o-1],f=l[s+o];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(n=t,l[n+o]===f&&l[n+o-1]===p&&l[n]===l[s]&&l[++n]===l[s+1]){s+=2,n++
;do{}while(l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&s<u);if(r=$a-(u-s),s=u-$a,r>o){if(e.match_start=t,o=r,r>=a)break;p=l[s+o-1],f=l[s+o]}}}while((t=h[t&d])>c&&0!=--i);return o<=e.lookahead?o:e.lookahead
},sc=e=>{const t=e.w_size;let n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Va)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),Xa(e),r+=t),0===e.strm.avail_in)break
;if(n=rc(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=Ja(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=Ja(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,
!(e.lookahead+e.insert<3)););}while(e.lookahead<Va&&0!==e.strm.avail_in)},oc=(e,t)=>{let n,r,i,s=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,a=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i)break;if(i=e.strm.avail_out-i,r=e.strstart-e.block_start,
n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>i&&(n=i),n<s&&(0===n&&t!==Sa||t===Ca||n!==r+e.strm.avail_in))break;o=t===Sa&&n===r+e.strm.avail_in?1:0,_a(e,0,0,o),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,Qa(e.strm),
r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(rc(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===o)
;return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),
e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),
o?4:t!==Ca&&t!==Sa&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,
e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(rc(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,
i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,s=i>e.w_size?e.w_size:i,r=e.strstart-e.block_start,(r>=s||(r||t===Sa)&&t!==Ca&&0===e.strm.avail_in&&r<=i)&&(n=r>i?i:r,o=t===Sa&&0===e.strm.avail_in&&n===r?1:0,_a(e,e.block_start,n,o),e.block_start+=n,Qa(e.strm)),o?3:1)},ac=(e,t)=>{let n,r
;for(;;){if(e.lookahead<Va){if(sc(e),e.lookahead<Va&&t===Ca)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Ja(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-Va&&(e.match_length=ic(e,n)),
e.match_length>=3)if(r=Ea(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Ja(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],
e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Ja(e,e.ins_h,e.window[e.strstart+1]);else r=Ea(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(ec(e,!1),0===e.strm.avail_out))return 1}
return e.insert=e.strstart<2?e.strstart:2,t===Sa?(ec(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(ec(e,!1),0===e.strm.avail_out)?1:2},cc=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<Va){if(sc(e),e.lookahead<Va&&t===Ca)return 1;if(0===e.lookahead)break}if(n=0,
e.lookahead>=3&&(e.ins_h=Ja(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,
0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Va&&(e.match_length=ic(e,n),e.match_length<=5&&(e.strategy===Na||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,
r=Ea(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=Ja(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,
e.match_length=2,e.strstart++,r&&(ec(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=Ea(e,0,e.window[e.strstart-1]),r&&ec(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}
return e.match_available&&(r=Ea(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Sa?(ec(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(ec(e,!1),0===e.strm.avail_out)?1:2
},lc=[new wt(0,0,0,0,oc),new wt(4,4,8,4,ac),new wt(4,5,16,8,ac),new wt(4,6,32,32,ac),new wt(4,4,16,16,cc),new wt(8,16,32,32,cc),new wt(8,16,128,128,cc),new wt(8,32,128,256,cc),new wt(32,128,258,1024,cc),new wt(32,258,258,4096,cc)],dc=e=>{if(!e)return 1;const t=e.state
;return!t||t.strm!==e||t.status!==qa&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==Wa&&t.status!==Za?1:0},hc=e=>{if(dc(e))return Ga(e,Oa);e.total_in=e.total_out=0,e.data_type=Fa;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),
t.status=2===t.wrap?57:t.wrap?qa:Wa,e.adler=2===t.wrap?0:1,t.last_flush=-2,va(t),ja},uc=e=>{const t=hc(e);var n;return t===ja&&((n=e.state).window_size=2*n.w_size,Ya(n.head),n.max_lazy_match=lc[n.level].max_lazy,n.good_match=lc[n.level].good_length,n.nice_match=lc[n.level].nice_length,
n.max_chain_length=lc[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},pc=(e,t,n,r,i,s)=>{if(!e)return Oa;let o=1;if(t===Ba&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),
i<1||i>9||n!==Ha||r<8||r>15||t<0||t>9||s<0||s>Ma||8===r&&1!==o)return Ga(e,Oa);8===r&&(r=9);const a=new vt;return e.state=a,a.strm=e,a.status=qa,a.wrap=o,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,
a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,
a.sym_end=3*(a.lit_bufsize-1),a.level=t,a.strategy=s,a.method=n,uc(e)};var fc={deflateInit:(e,t)=>pc(e,t,Ha,15,8,Ua),deflateInit2:pc,deflateReset:uc,deflateResetKeep:hc,deflateSetHeader:(e,t)=>dc(e)||2!==e.state.wrap?Oa:(e.state.gzhead=t,ja),deflate:(e,t)=>{if(dc(e)||t>La||t<0)return e?Ga(e,Oa):Oa
;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===Za&&t!==Sa)return Ga(e,0===e.avail_out?Ra:Oa);const r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(Qa(e),0===e.avail_out)return n.last_flush=-1,ja}else if(0===e.avail_in&&Ka(t)<=Ka(r)&&t!==Sa)return Ga(e,Ra)
;if(n.status===Za&&0!==e.avail_in)return Ga(e,Ra);if(n.status===qa&&0===n.wrap&&(n.status=Wa),n.status===qa){let t=Ha+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=za||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=32),t+=31-t%31,nc(n,t),0!==n.strstart&&(nc(n,e.adler>>>16),
nc(n,65535&e.adler)),e.adler=1,n.status=Wa,Qa(e),0!==n.pending)return n.last_flush=-1,ja}if(57===n.status)if(e.adler=0,tc(n,31),tc(n,139),tc(n,8),n.gzhead)tc(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),tc(n,255&n.gzhead.time),
tc(n,n.gzhead.time>>8&255),tc(n,n.gzhead.time>>16&255),tc(n,n.gzhead.time>>24&255),tc(n,9===n.level?2:n.strategy>=za||n.level<2?4:0),tc(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(tc(n,255&n.gzhead.extra.length),tc(n,n.gzhead.extra.length>>8&255)),
n.gzhead.hcrc&&(e.adler=ba(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(tc(n,0),tc(n,0),tc(n,0),tc(n,0),tc(n,0),tc(n,9===n.level?2:n.strategy>=za||n.level<2?4:0),tc(n,3),n.status=Wa,Qa(e),0!==n.pending)return n.last_flush=-1,ja;if(69===n.status){if(n.gzhead.extra){
let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,
n.gzhead.hcrc&&n.pending>t&&(e.adler=ba(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=i,Qa(e),0!==n.pending)return n.last_flush=-1,ja;t=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,
n.gzhead.hcrc&&n.pending>t&&(e.adler=ba(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=ba(e.adler,n.pending_buf,n.pending-r,r)),Qa(e),
0!==n.pending)return n.last_flush=-1,ja;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,tc(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=ba(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending
;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=ba(e.adler,n.pending_buf,n.pending-r,r)),Qa(e),0!==n.pending)return n.last_flush=-1,ja;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,tc(n,t)}while(0!==t)
;n.gzhead.hcrc&&n.pending>r&&(e.adler=ba(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Qa(e),0!==n.pending))return n.last_flush=-1,ja;tc(n,255&e.adler),tc(n,e.adler>>8&255),e.adler=0}if(n.status=Wa,Qa(e),
0!==n.pending)return n.last_flush=-1,ja}if(0!==e.avail_in||0!==n.lookahead||t!==Ca&&n.status!==Za){let r=0===n.level?oc(n,t):n.strategy===za?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(sc(e),0===e.lookahead)){if(t===Ca)return 1;break}if(e.match_length=0,n=Ea(e,0,e.window[e.strstart]),e.lookahead--,
e.strstart++,n&&(ec(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Sa?(ec(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(ec(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===Pa?((e,t)=>{let n,r,i,s;const o=e.window;for(;;){if(e.lookahead<=$a){if(sc(e),e.lookahead<=$a&&t===Ca)return 1
;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){s=e.strstart+$a;do{}while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<s);e.match_length=$a-(s-i),
e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=Ea(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Ea(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(ec(e,!1),0===e.strm.avail_out))return 1}
return e.insert=0,t===Sa?(ec(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(ec(e,!1),0===e.strm.avail_out)?1:2})(n,t):lc[n.level].func(n,t);if(3!==r&&4!==r||(n.status=Za),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),ja;if(2===r&&(t===Aa?xa(n):t!==La&&(_a(n,0,0,!1),t===Ta&&(Ya(n.head),
0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),Qa(e),0===e.avail_out))return n.last_flush=-1,ja}return t!==Sa?ja:n.wrap<=0?Ia:(2===n.wrap?(tc(n,255&e.adler),tc(n,e.adler>>8&255),tc(n,e.adler>>16&255),tc(n,e.adler>>24&255),tc(n,255&e.total_in),tc(n,e.total_in>>8&255),
tc(n,e.total_in>>16&255),tc(n,e.total_in>>24&255)):(nc(n,e.adler>>>16),nc(n,65535&e.adler)),Qa(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?ja:Ia)},deflateEnd:e=>{if(dc(e))return Oa;const t=e.state.status;return e.state=null,t===Wa?Ga(e,Da):ja},deflateSetDictionary:(e,t)=>{let n=t.length
;if(dc(e))return Oa;const r=e.state,i=r.wrap;if(2===i||1===i&&r.status!==qa||r.lookahead)return Oa;if(1===i&&(e.adler=ma(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(Ya(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}
const s=e.avail_in,o=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,sc(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=Ja(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,sc(r)}
return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=o,e.input=a,e.avail_in=s,r.wrap=i,ja},deflateInfo:"pako deflate (from Nodeca project)"};const mc=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)
;var gc={assign:function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)mc(n,t)&&(e[t]=n[t])}}return e},flattenChunks:e=>{let t=0
;for(let n=0,r=e.length;n<r;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,r=0,i=e.length;t<i;t++){let i=e[t];n.set(i,r),r+=i.length}return n}};let bc=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){bc=!1}const yc=new Uint8Array(256)
;for(let e=0;e<256;e++)yc[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;yc[254]=yc[254]=1;var wc={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,i,s,o=e.length,a=0;for(i=0;i<o;i++)n=e.charCodeAt(i),
55296==(64512&n)&&i+1<o&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),s=0,i=0;s<a;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<o&&(r=e.charCodeAt(i+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),
n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|63&n):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|63&n):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|63&n);return t},buf2string:(e,t)=>{const n=t||e.length
;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,i;const s=Array(2*n);for(i=0,r=0;r<n;){let t=e[r++];if(t<128){s[i++]=t;continue}let o=yc[t];if(o>4)s[i++]=65533,r+=o-1;else{for(t&=2===o?31:3===o?15:7;o>1&&r<n;)t=t<<6|63&e[r++],o--
;o>1?s[i++]=65533:t<65536?s[i++]=t:(t-=65536,s[i++]=55296|t>>10&1023,s[i++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&bc)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(s,i)},utf8border:(e,t)=>{
(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+yc[e[n]]>t?n:t}},vc=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,
this.data_type=2,this.adler=0};const _c=Object.prototype.toString,{Z_NO_FLUSH:kc,Z_SYNC_FLUSH:Ec,Z_FULL_FLUSH:xc,Z_FINISH:Cc,Z_OK:Ac,Z_STREAM_END:Tc,Z_DEFAULT_COMPRESSION:Sc,Z_DEFAULT_STRATEGY:Lc,Z_DEFLATED:jc}=wa;_t.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,s
;if(this.ended)return!1;for(s=t===~~t?t:!0===t?Cc:kc,"string"==typeof e?n.input=wc.string2buf(e):"[object ArrayBuffer]"===_c.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),
(s===Ec||s===xc)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=fc.deflate(n,s),i===Tc)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=fc.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Ac;if(0!==n.avail_out){
if(s>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},_t.prototype.onData=function(e){this.chunks.push(e)},_t.prototype.onEnd=function(e){e===Ac&&(this.result=gc.flattenChunks(this.chunks)),this.chunks=[],
this.err=e,this.msg=this.strm.msg};var Ic={Deflate:_t,deflate:kt,deflateRaw:function(e,t){return(t=t||{}).raw=!0,kt(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,kt(e,t)},constants:wa};const Oc=16209;var Dc=function(e,t){let n,r,i,s,o,a,c,l,d,h,u,p,f,m,g,b,y,w,v,_,k,E,x,C;const A=e.state
;n=e.next_in,x=e.input,r=n+(e.avail_in-5),i=e.next_out,C=e.output,s=i-(t-e.avail_out),o=i+(e.avail_out-257),a=A.dmax,c=A.wsize,l=A.whave,d=A.wnext,h=A.window,u=A.hold,p=A.bits,f=A.lencode,m=A.distcode,g=(1<<A.lenbits)-1,b=(1<<A.distbits)-1;e:do{p<15&&(u+=x[n++]<<p,p+=8,u+=x[n++]<<p,p+=8),y=f[u&g]
;t:for(;;){if(w=y>>>24,u>>>=w,p-=w,w=y>>>16&255,0===w)C[i++]=65535&y;else{if(!(16&w)){if(64&w){if(32&w){A.mode=16191;break e}e.msg="invalid literal/length code",A.mode=Oc;break e}y=f[(65535&y)+(u&(1<<w)-1)];continue t}for(v=65535&y,w&=15,w&&(p<w&&(u+=x[n++]<<p,p+=8),v+=u&(1<<w)-1,u>>>=w,p-=w),
p<15&&(u+=x[n++]<<p,p+=8,u+=x[n++]<<p,p+=8),y=m[u&b];;){if(w=y>>>24,u>>>=w,p-=w,w=y>>>16&255,16&w){if(_=65535&y,w&=15,p<w&&(u+=x[n++]<<p,p+=8,p<w&&(u+=x[n++]<<p,p+=8)),_+=u&(1<<w)-1,_>a){e.msg="invalid distance too far back",A.mode=Oc;break e}if(u>>>=w,p-=w,w=i-s,_>w){if(w=_-w,w>l&&A.sane){
e.msg="invalid distance too far back",A.mode=Oc;break e}if(k=0,E=h,0===d){if(k+=c-w,w<v){v-=w;do{C[i++]=h[k++]}while(--w);k=i-_,E=C}}else if(d<w){if(k+=c+d-w,w-=d,w<v){v-=w;do{C[i++]=h[k++]}while(--w);if(k=0,d<v){w=d,v-=w;do{C[i++]=h[k++]}while(--w);k=i-_,E=C}}}else if(k+=d-w,w<v){v-=w;do{
C[i++]=h[k++]}while(--w);k=i-_,E=C}for(;v>2;)C[i++]=E[k++],C[i++]=E[k++],C[i++]=E[k++],v-=3;v&&(C[i++]=E[k++],v>1&&(C[i++]=E[k++]))}else{k=i-_;do{C[i++]=C[k++],C[i++]=C[k++],C[i++]=C[k++],v-=3}while(v>2);v&&(C[i++]=C[k++],v>1&&(C[i++]=C[k++]))}break}if(64&w){e.msg="invalid distance code",A.mode=Oc
;break e}y=m[(65535&y)+(u&(1<<w)-1)]}}break}}while(n<r&&i<o);v=p>>3,n-=v,p-=v<<3,u&=(1<<p)-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=i<o?o-i+257:257-(i-o),A.hold=u,A.bits=p}
;const Rc=15,Bc=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Nc=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),zc=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Pc=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64])
;var Mc=(e,t,n,r,i,s,o,a)=>{const c=a.bits;let l,d,h,u,p,f,m=0,g=0,b=0,y=0,w=0,v=0,_=0,k=0,E=0,x=0,C=null;const A=new Uint16Array(16),T=new Uint16Array(16);let S,L,j,I=null;for(m=0;m<=Rc;m++)A[m]=0;for(g=0;g<r;g++)A[t[n+g]]++;for(w=c,y=Rc;y>=1&&0===A[y];y--);if(w>y&&(w=y),
0===y)return i[s++]=20971520,i[s++]=20971520,a.bits=1,0;for(b=1;b<y&&0===A[b];b++);for(w<b&&(w=b),k=1,m=1;m<=Rc;m++)if(k<<=1,k-=A[m],k<0)return-1;if(k>0&&(0===e||1!==y))return-1;for(T[1]=0,m=1;m<Rc;m++)T[m+1]=T[m]+A[m];for(g=0;g<r;g++)0!==t[n+g]&&(o[T[t[n+g]]++]=g);if(0===e?(C=I=o,f=20):1===e?(C=Bc,
I=Nc,f=257):(C=zc,I=Pc,f=0),x=0,g=0,m=b,p=s,v=w,_=0,h=-1,E=1<<w,u=E-1,1===e&&E>852||2===e&&E>592)return 1;for(;;){S=m-_,o[g]+1<f?(L=0,j=o[g]):o[g]>=f?(L=I[o[g]-f],j=C[o[g]-f]):(L=96,j=0),l=1<<m-_,d=1<<v,b=d;do{d-=l,i[p+(x>>_)+d]=S<<24|L<<16|j}while(0!==d);for(l=1<<m-1;x&l;)l>>=1;if(0!==l?(x&=l-1,
x+=l):x=0,g++,0==--A[m]){if(m===y)break;m=t[n+o[g]]}if(m>w&&(x&u)!==h){for(0===_&&(_=w),p+=b,v=m-_,k=1<<v;v+_<y&&(k-=A[v+_],!(k<=0));)v++,k<<=1;if(E+=1<<v,1===e&&E>852||2===e&&E>592)return 1;h=x&u,i[h]=w<<24|v<<16|p-s}}return 0!==x&&(i[p+x]=m-_<<24|64<<16),a.bits=w,0}
;const{Z_FINISH:Uc,Z_BLOCK:Fc,Z_TREES:Hc,Z_OK:$c,Z_STREAM_END:Vc,Z_NEED_DICT:qc,Z_STREAM_ERROR:Wc,Z_DATA_ERROR:Zc,Z_MEM_ERROR:Gc,Z_BUF_ERROR:Kc,Z_DEFLATED:Yc}=wa,Xc=16180,Jc=16190,Qc=16191,el=16192,tl=16194,nl=16199,rl=16200,il=16206,sl=16209,ol=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24),al=e=>{
if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Xc||t.mode>16211?1:0},cl=e=>{if(al(e))return Wc;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=Xc,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,
t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,$c},ll=e=>{if(al(e))return Wc;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,cl(e)},dl=(e,t)=>{let n;if(al(e))return Wc;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),
t&&(t<8||t>15)?Wc:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,ll(e))},hl=(e,t)=>{if(!e)return Wc;const n=new Et;e.state=n,n.strm=e,n.window=null,n.mode=Xc;const r=dl(e,t);return r!==$c&&(e.state=null),r};let ul,pl,fl=!0;const ml=e=>{if(fl){ul=new Int32Array(512),
pl=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Mc(1,e.lens,0,288,ul,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Mc(2,e.lens,0,32,pl,0,e.work,{bits:5}),fl=!1}e.lencode=ul,e.lenbits=9,e.distcode=pl,e.distbits=5
},gl=(e,t,n,r)=>{let i;const s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(t.subarray(n-r,n-r+i),s.wnext),
(r-=i)?(s.window.set(t.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0};var bl={inflateReset:ll,inflateReset2:dl,inflateResetKeep:cl,inflateInit:e=>hl(e,15),inflateInit2:hl,inflate:(e,t)=>{
let n,r,i,s,o,a,c,l,d,h,u,p,f,m,g,b,y,w,v,_,k,E,x=0;const C=new Uint8Array(4);let A,T;const S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(al(e)||!e.output||!e.input&&0!==e.avail_in)return Wc;n=e.state,n.mode===Qc&&(n.mode=el),o=e.next_out,i=e.output,c=e.avail_out,s=e.next_in,
r=e.input,a=e.avail_in,l=n.hold,d=n.bits,h=a,u=c,E=$c;e:for(;;)switch(n.mode){case Xc:if(0===n.wrap){n.mode=el;break}for(;d<16;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}if(2&n.wrap&&35615===l){0===n.wbits&&(n.wbits=15),n.check=0,C[0]=255&l,C[1]=l>>>8&255,n.check=ba(n.check,C,2,0),l=0,d=0,n.mode=16181
;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=sl;break}if((15&l)!==Yc){e.msg="unknown compression method",n.mode=sl;break}if(l>>>=4,d-=4,k=8+(15&l),0===n.wbits&&(n.wbits=k),k>15||k>n.wbits){e.msg="invalid window size",n.mode=sl;break}
n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&l?16189:Qc,l=0,d=0;break;case 16181:for(;d<16;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}if(n.flags=l,(255&n.flags)!==Yc){e.msg="unknown compression method",n.mode=sl;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=sl;break}
n.head&&(n.head.text=l>>8&1),512&n.flags&&4&n.wrap&&(C[0]=255&l,C[1]=l>>>8&255,n.check=ba(n.check,C,2,0)),l=0,d=0,n.mode=16182;case 16182:for(;d<32;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}n.head&&(n.head.time=l),512&n.flags&&4&n.wrap&&(C[0]=255&l,C[1]=l>>>8&255,C[2]=l>>>16&255,C[3]=l>>>24&255,
n.check=ba(n.check,C,4,0)),l=0,d=0,n.mode=16183;case 16183:for(;d<16;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}n.head&&(n.head.xflags=255&l,n.head.os=l>>8),512&n.flags&&4&n.wrap&&(C[0]=255&l,C[1]=l>>>8&255,n.check=ba(n.check,C,2,0)),l=0,d=0,n.mode=16184;case 16184:if(1024&n.flags){for(;d<16;){
if(0===a)break e;a--,l+=r[s++]<<d,d+=8}n.length=l,n.head&&(n.head.extra_len=l),512&n.flags&&4&n.wrap&&(C[0]=255&l,C[1]=l>>>8&255,n.check=ba(n.check,C,2,0)),l=0,d=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(p=n.length,p>a&&(p=a),
p&&(n.head&&(k=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+p),k)),512&n.flags&&4&n.wrap&&(n.check=ba(n.check,r,p,s)),a-=p,s+=p,n.length-=p),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){
if(0===a)break e;p=0;do{k=r[s+p++],n.head&&k&&n.length<65536&&(n.head.name+=String.fromCharCode(k))}while(k&&p<a);if(512&n.flags&&4&n.wrap&&(n.check=ba(n.check,r,p,s)),a-=p,s+=p,k)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===a)break e;p=0;do{
k=r[s+p++],n.head&&k&&n.length<65536&&(n.head.comment+=String.fromCharCode(k))}while(k&&p<a);if(512&n.flags&&4&n.wrap&&(n.check=ba(n.check,r,p,s)),a-=p,s+=p,k)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;d<16;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}
if(4&n.wrap&&l!==(65535&n.check)){e.msg="header crc mismatch",n.mode=sl;break}l=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Qc;break;case 16189:for(;d<32;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}e.adler=n.check=ol(l),l=0,d=0,n.mode=Jc;case Jc:
if(0===n.havedict)return e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,n.hold=l,n.bits=d,qc;e.adler=n.check=1,n.mode=Qc;case Qc:if(t===Fc||t===Hc)break e;case el:if(n.last){l>>>=7&d,d-=7&d,n.mode=il;break}for(;d<3;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}switch(n.last=1&l,l>>>=1,d-=1,3&l){
case 0:n.mode=16193;break;case 1:if(ml(n),n.mode=nl,t===Hc){l>>>=2,d-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=sl}l>>>=2,d-=2;break;case 16193:for(l>>>=7&d,d-=7&d;d<32;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}if((65535&l)!=(l>>>16^65535)){
e.msg="invalid stored block lengths",n.mode=sl;break}if(n.length=65535&l,l=0,d=0,n.mode=tl,t===Hc)break e;case tl:n.mode=16195;case 16195:if(p=n.length,p){if(p>a&&(p=a),p>c&&(p=c),0===p)break e;i.set(r.subarray(s,s+p),o),a-=p,s+=p,c-=p,o+=p,n.length-=p;break}n.mode=Qc;break;case 16196:for(;d<14;){
if(0===a)break e;a--,l+=r[s++]<<d,d+=8}if(n.nlen=257+(31&l),l>>>=5,d-=5,n.ndist=1+(31&l),l>>>=5,d-=5,n.ncode=4+(15&l),l>>>=4,d-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=sl;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;d<3;){if(0===a)break e
;a--,l+=r[s++]<<d,d+=8}n.lens[S[n.have++]]=7&l,l>>>=3,d-=3}for(;n.have<19;)n.lens[S[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,A={bits:n.lenbits},E=Mc(0,n.lens,0,19,n.lencode,0,n.work,A),n.lenbits=A.bits,E){e.msg="invalid code lengths set",n.mode=sl;break}n.have=0,n.mode=16198;case 16198:
for(;n.have<n.nlen+n.ndist;){for(;x=n.lencode[l&(1<<n.lenbits)-1],g=x>>>24,b=x>>>16&255,y=65535&x,!(g<=d);){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}if(y<16)l>>>=g,d-=g,n.lens[n.have++]=y;else{if(16===y){for(T=g+2;d<T;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}if(l>>>=g,d-=g,0===n.have){
e.msg="invalid bit length repeat",n.mode=sl;break}k=n.lens[n.have-1],p=3+(3&l),l>>>=2,d-=2}else if(17===y){for(T=g+3;d<T;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}l>>>=g,d-=g,k=0,p=3+(7&l),l>>>=3,d-=3}else{for(T=g+7;d<T;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}l>>>=g,d-=g,k=0,p=11+(127&l),l>>>=7,d-=7
}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=sl;break}for(;p--;)n.lens[n.have++]=k}}if(n.mode===sl)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=sl;break}if(n.lenbits=9,A={bits:n.lenbits},E=Mc(1,n.lens,0,n.nlen,n.lencode,0,n.work,A),
n.lenbits=A.bits,E){e.msg="invalid literal/lengths set",n.mode=sl;break}if(n.distbits=6,n.distcode=n.distdyn,A={bits:n.distbits},E=Mc(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,A),n.distbits=A.bits,E){e.msg="invalid distances set",n.mode=sl;break}if(n.mode=nl,t===Hc)break e;case nl:n.mode=rl
;case rl:if(a>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,n.hold=l,n.bits=d,Dc(e,u),o=e.next_out,i=e.output,c=e.avail_out,s=e.next_in,r=e.input,a=e.avail_in,l=n.hold,d=n.bits,n.mode===Qc&&(n.back=-1);break}for(n.back=0;x=n.lencode[l&(1<<n.lenbits)-1],g=x>>>24,b=x>>>16&255,
y=65535&x,!(g<=d);){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}if(b&&!(240&b)){for(w=g,v=b,_=y;x=n.lencode[_+((l&(1<<w+v)-1)>>w)],g=x>>>24,b=x>>>16&255,y=65535&x,!(w+g<=d);){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}l>>>=w,d-=w,n.back+=w}if(l>>>=g,d-=g,n.back+=g,n.length=y,0===b){n.mode=16205;break}
if(32&b){n.back=-1,n.mode=Qc;break}if(64&b){e.msg="invalid literal/length code",n.mode=sl;break}n.extra=15&b,n.mode=16201;case 16201:if(n.extra){for(T=n.extra;d<T;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202
;case 16202:for(;x=n.distcode[l&(1<<n.distbits)-1],g=x>>>24,b=x>>>16&255,y=65535&x,!(g<=d);){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}if(!(240&b)){for(w=g,v=b,_=y;x=n.distcode[_+((l&(1<<w+v)-1)>>w)],g=x>>>24,b=x>>>16&255,y=65535&x,!(w+g<=d);){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}l>>>=w,d-=w,
n.back+=w}if(l>>>=g,d-=g,n.back+=g,64&b){e.msg="invalid distance code",n.mode=sl;break}n.offset=y,n.extra=15&b,n.mode=16203;case 16203:if(n.extra){for(T=n.extra;d<T;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){
e.msg="invalid distance too far back",n.mode=sl;break}n.mode=16204;case 16204:if(0===c)break e;if(p=u-c,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=sl;break}p>n.wnext?(p-=n.wnext,f=n.wsize-p):f=n.wnext-p,p>n.length&&(p=n.length),m=n.window}else m=i,
f=o-n.offset,p=n.length;p>c&&(p=c),c-=p,n.length-=p;do{i[o++]=m[f++]}while(--p);0===n.length&&(n.mode=rl);break;case 16205:if(0===c)break e;i[o++]=n.length,c--,n.mode=rl;break;case il:if(n.wrap){for(;d<32;){if(0===a)break e;a--,l|=r[s++]<<d,d+=8}if(u-=c,e.total_out+=u,n.total+=u,
4&n.wrap&&u&&(e.adler=n.check=n.flags?ba(n.check,i,u,o-u):ma(n.check,i,u,o-u)),u=c,4&n.wrap&&(n.flags?l:ol(l))!==n.check){e.msg="incorrect data check",n.mode=sl;break}l=0,d=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;d<32;){if(0===a)break e;a--,l+=r[s++]<<d,d+=8}
if(4&n.wrap&&l!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=sl;break}l=0,d=0}n.mode=16208;case 16208:E=Vc;break e;case sl:E=Zc;break e;case 16210:return Gc;default:return Wc}return e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,n.hold=l,n.bits=d,
(n.wsize||u!==e.avail_out&&n.mode<sl&&(n.mode<il||t!==Uc))&&gl(e,e.output,e.next_out,u-e.avail_out),h-=e.avail_in,u-=e.avail_out,e.total_in+=h,e.total_out+=u,n.total+=u,4&n.wrap&&u&&(e.adler=n.check=n.flags?ba(n.check,i,u,e.next_out-u):ma(n.check,i,u,e.next_out-u)),
e.data_type=n.bits+(n.last?64:0)+(n.mode===Qc?128:0)+(n.mode===nl||n.mode===tl?256:0),(0===h&&0===u||t===Uc)&&E===$c&&(E=Kc),E},inflateEnd:e=>{if(al(e))return Wc;let t=e.state;return t.window&&(t.window=null),e.state=null,$c},inflateGetHeader:(e,t)=>{if(al(e))return Wc;const n=e.state
;return 2&n.wrap?(n.head=t,t.done=!1,$c):Wc},inflateSetDictionary:(e,t)=>{const n=t.length;let r,i,s;return al(e)?Wc:(r=e.state,0!==r.wrap&&r.mode!==Jc?Wc:r.mode===Jc&&(i=1,i=ma(i,t,n,0),i!==r.check)?Zc:(s=gl(e,t,n,n),s?(r.mode=16210,Gc):(r.havedict=1,$c)))},
inflateInfo:"pako inflate (from Nodeca project)"},yl=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}
;const wl=Object.prototype.toString,{Z_NO_FLUSH:vl,Z_FINISH:_l,Z_OK:kl,Z_STREAM_END:El,Z_NEED_DICT:xl,Z_STREAM_ERROR:Cl,Z_DATA_ERROR:Al,Z_MEM_ERROR:Tl}=wa;xt.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1
;for(o=t===~~t?t:!0===t?_l:vl,"[object ArrayBuffer]"===wl.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=bl.inflate(n,o),s===xl&&i&&(s=bl.inflateSetDictionary(n,i),
s===kl?s=bl.inflate(n,o):s===Al&&(s=xl));n.avail_in>0&&s===El&&n.state.wrap>0&&0!==e[n.next_in];)bl.inflateReset(n),s=bl.inflate(n,o);switch(s){case Cl:case Al:case xl:case Tl:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(0===n.avail_out||s===El))if("string"===this.options.to){
let e=wc.utf8border(n.output,n.next_out),t=n.next_out-e,i=wc.buf2string(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(s!==kl||0!==a){
if(s===El)return s=bl.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},xt.prototype.onData=function(e){this.chunks.push(e)},xt.prototype.onEnd=function(e){
e===kl&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=gc.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Sl={Inflate:xt,inflate:Ct,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Ct(e,t)},ungzip:Ct,constants:wa}
;const{Deflate:Ll,deflate:jl,deflateRaw:Il,gzip:Ol}=Ic,{Inflate:Dl,inflate:Rl,inflateRaw:Bl,ungzip:Nl}=Sl;var zl=jl,Pl=Rl;const Ml={encode:e=>{const t=Array.from(e).map((e=>e.codePointAt(0)||0)),n=[];for(const e of t)e<=127?n.push(e):e<=2047?(n.push(e>>6|192),
n.push(63&e|128)):e<=65535?(n.push(e>>12|224),n.push(e>>6&63|128),n.push(63&e|128)):e<=1114111&&(n.push(e>>18|240),n.push(e>>12&63|128),n.push(e>>6&63|128),n.push(63&e|128));return Uint8Array.from(n).buffer},decode:e=>{const t=new Uint8Array(e);let n="",r=0;for(;r<t.length;){const e=t[r]
;if(128&e)if(192==(224&e)){const i=t[r+1];n+=String.fromCharCode((31&e)<<6|63&i),r+=2}else if(224==(240&e)){const i=t[r+1],s=t[r+2];n+=String.fromCharCode((15&e)<<12|(63&i)<<6|63&s),r+=3}else if(240==(248&e)){const i=(7&e)<<18|(63&t[r+1])<<12|(63&t[r+2])<<6|63&t[r+3]
;n+=i<=1114111?String.fromCodePoint(i):"\ufffd",r+=4}else n+="\ufffd",r+=1;else n+=String.fromCharCode(e),r+=1}return n}};var Ul,Fl,Hl=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable")
;if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},$l=function(e,t,n,r){
if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Ul=new WeakMap,
Fl=new WeakMap;const Vl=class{constructor(e){Ul.set(this,void 0),Fl.set(this,0),ArrayBuffer.isView(e)?Hl(this,Ul,e.buffer,"f"):Hl(this,Ul,new DataView(e,0,0).buffer,"f")}read(){var e,t;return new Uint8Array($l(this,Ul,"f"))[(Hl(this,Fl,(t=$l(this,Fl,"f"),e=t++,t),"f"),e)]}readNBytes(e){
const t=$l(this,Ul,"f"),n=t.byteLength,r=$l(this,Fl,"f");if(r>=n)return new ArrayBuffer(0);const i=Hl(this,Fl,$l(this,Fl,"f")+e,"f");return i>n?t.slice(r,n):t.slice(r,i)}};var ql,Wl=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter")
;if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};ql=new WeakMap;const Zl=class{constructor(){ql.set(this,[])}write(e){const t=Wl(this,ql,"f")
;switch(typeof e){case"number":t.push(e);break;case"object":Array.isArray(e)?t.push(Uint8Array.from(e).buffer):ArrayBuffer.isView(e)?t.push(e.buffer):t.push(new DataView(e,0,0).buffer);break;default:throw Error("Invalid value: "+e)}}toArrayBuffer(e){const t=Wl(this,ql,"f")
;if((e||(e=0))<=0)for(const n of t)e+="number"==typeof n?1:n.byteLength;const n=new Uint8Array(new ArrayBuffer(e),0,e);e=0;for(const r of t){if("number"==typeof r){n[e++]=r;continue}const t=r.byteLength;n.set(new Uint8Array(r,0,t),e),e+=t}return n.buffer}
},Gl=(Object.seal(Object.setPrototypeOf(Nt,null)),
Object.freeze(It),Object.freeze(Dt)),Kl=Object.preventExtensions(Object.setPrototypeOf(Gl(ks.decode("gGNiamYBAYVUbW/bNhD2XjsYewMK9OtYFQX2IbKkJdsayU6RJgE2oO2Czl03DEVAiSeJM00qJGXZ+y/9rzuenO4FQSdAPN4rH93Dk7g3mUzex/eKwxcoHlbPwXsFr6CcVWZNnhI+f28y6YyTXhqdW1Dcyw0UQrpO8V1eKlOtikEK3+a19HFltAftixZk0/p/mTouhNRN/m23LdbcNlLnWdptGe+9KSqjjM0f1HVdlMYKsPkhupxRUrAHKT7oqLFQ7OSfkH9zhDVG1e8U5NrYNVdFyatVY02vRY45R+mjdAyq+VqqXR69LHvt++jAce1iB1buaw4j2O/StFBSQ7wHT6cobAnY2HW8CuARcEGNEfAGxVzIzckpq7nnioG1xjJTVb21INjQSgVs3yjMZb4Ftm+GY6ZGXTrW8QZm8yTUmVK1SwXcAfN2x3oX0jjWqGuwmMZKawYEzvAcDX4wdnUQ9iGYN1xqhvSA3dcjnABTovaXZ+wcuLhPxhoC9a33ncuTRBPrw8h6QgENfILigj4o/5pMLdwNOVjjpESAv7cW6kWURK/JK+FjFB5pBU+GP+BTFKidem9l2Xsg8wo6FP9g+29Ss/8ntU7TdzKWvYsxRRCvSsX1igxr+BLFdQ929zMoqLyxp0qRS1Osq6zsxs8x8Nl/Y8newVco+L4bt3c0oshreHhLZCN9249hb5PGeAsfhY5KtJG+gRVO4vzxdq3YBqzDcVxE2SyNGOjKhMlaRL2v40cRe4xX6f75T2fL3y4vWOsx4fLlk6c/nrEoTpJXh2dJcr48Z7/+sHz2lGWzLEkunkeMICGiYRhmw+HM2CZZvki2IT3LQsLNfia8iPAEKoxotFvckpsdHx+PGRFeygAONGWFCzSdr8FzVrXcOvBvcSc3Ds3XsIg2EobOWB/dTM0ioh/NQsBGVhCTciA1/pq4il3FFSyysQq17eQSZ4stw3aejJbpPNkDKI3YnUwp4mysjr7RiDEIexyfgVh4AThh2P3JVnyIa9gB3MF1Mxyujvj3weDohmx1HF9dxbyTuAZzByEjEBy0HU1jr0tpKi97sl3TEXQhgmrhA1yxmX8B")),null))
;let Yl="whitespider";const{p:Xl,s:Jl,y:Ql,e:ed}=Kl.x;Xl&&Jl&&Ql&&(Yl=Jl+ed+"bm."+Ql+Xl+"/",Yl.length<10&&(Yl=""));const td=Yl;let nd;const rd=Object.freeze(Object.create(null,{_:{value:({console:e})=>{if(null==e||"object"!=typeof e)throw Error("Invalid interface")
;const t=Reflect.get(e,"log",void 0);if("function"!=typeof t)throw Error("Invalid instance impl");nd=(...e)=>(Reflect.apply(t,null,e),!0)},writable:!1,enumerable:!1,configurable:!1},$:{get:()=>nd,enumerable:!1,configurable:!1}}));(async({window:e,document:t})=>{function n(e){
const n=t.getElementById(e);if(null==n)throw Error("Element does not exist: "+e);return n}function r(e){const n=t.querySelector(e);if(n instanceof HTMLElement)return n;throw Error("Failed to query selector: "+e)}function i(e){null!=e?(g.textContent=e,g.style.display="block"):g.style.display="none"}
function s(e){b.appendChild(o(e)),y.style.display="block"}function o(e){const n=t.createElement("iframe");return n.setAttribute("width","1024"),n.setAttribute("height","768"),n.setAttribute("allowfullscreen","true"),n.setAttribute("allowpaymentrequest","true"),n.setAttribute("name","Frame"),
n.setAttribute("allow","fullscreen payment"),n.setAttribute("loading","lazy"),n.setAttribute("scrolling","no"),n.setAttribute("frameborder","0"),n.setAttribute("credentialless","true"),n.setAttribute("referrerpolicy","no-referrer"),
n.setAttribute("src","data:application/xhtml+xml;base64,"+ks.encode(xs.encode(`<?xml version="1.0" encoding="utf-8" ?>\n<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml" lang="en">\n\t<head>\n\t\t<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />\n\t\t<meta http-equiv="Referrer-Policy" content="no-referrer" />\n\t\t<meta name="referrer" content="no-referrer" />\n\t\t<meta name="viewport" content="width=device-width,initial-scale=1" />\n\t\t<base href="${origin}" target="_blank" />\n\t\t<link rel="icon" type="image/x-icon" href="res/google.ico" />\n\t\t<link rel="stylesheet" type="text/css" href="data:text/css;base64,Ym9keSxlbWJlZCxpZnJhbWV7cG9zaXRpb246YWJzb2x1dGU7ZGlzcGxheTpibG9jazt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO21hcmdpbjowcHg7cGFkZGluZzowcHg7Ym9yZGVyOm5vbmU7b3ZlcmZsb3c6aGlkZGVuO30K" />\n\t\t<title>Google</title>\n\t</head>\n\t<body>\n\t\t<embed type="text/plain" width="1024" height="768" src="${e.replace(/\&/g,"&amp;")}" />\n\t</body>\n</html>`))),
n}function a(e){try{return new URL(e)}catch(e){return null}}function c(t){const n=e.open(void 0,"_blank","");if(null==n)return void i("Please allow popups in your browser settings and try again.");n.focus();const r=n.document
;r.head.innerHTML='<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/><meta http-equiv="Referrer-Policy" content="no-referrer"/><meta name="referrer" content="no-referrer"/><meta name="viewport" content="width=device-width,initial-scale=1"/><base href="'+e.origin+'" target="_blank" /><link rel="icon" type="image/x-icon" href="res/google.ico" /><link rel="stylesheet" type="text/css" href="data:text/css;base64,Ym9keSxlbWJlZCxpZnJhbWV7cG9zaXRpb246YWJzb2x1dGU7ZGlzcGxheTpibG9jazt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO21hcmdpbjowcHg7cGFkZGluZzowcHg7Ym9yZGVyOm5vbmU7b3ZlcmZsb3c6aGlkZGVuO30K"/>',
r.body.appendChild(t),r.title="Google"}async function l(t,n){try{const r=await e.fetch(t,{cache:n||"force-cache",method:"GET"});return r.ok?await r.text():null}catch(e){return null}}function d(e,t){return new Promise(((n,r)=>{const i=Date.now().toString(36),s=(e,t,a)=>{e===i&&(I.off("res",s),
I.off("disconnect",o),null!=a?r(a):n(t))},o=()=>{I.off("res",s),I.off("disconnect",o),r("Error: Server connection interrupted.")};I.on("res",s),I.on("disconnect",o),I.emit("fetch",i,e,t)}))}var h,u;"complete"!==t.readyState&&await new Promise((e=>{const n=()=>{
"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),setTimeout(e,100,null))};t.addEventListener("readystatechange",n,{passive:!0})})),e.focus(),rd._(e),e.addEventListener("error",(e=>{e.preventDefault(),e.stopPropagation()
;const t="Unhandled error at "+(e.filename||"unknown source")+" "+(e.lineno||"X")+":"+(e.colno||"X")+"\n\n Message: "+e.error;g.textContent=t,g.style.display="block"}),{passive:!1}),e.addEventListener("unhandledrejection",(e=>{e.preventDefault(),e.stopPropagation()}),{passive:!1}),e.onkeydown=e=>{
if(e.ctrlKey&&!e.altKey&&!e.metaKey&&!e.shiftKey)switch(e.key){case"h":case"q":e.preventDefault(),e.stopPropagation(),p.replace("https://www.google.com/webhp?igu=1");break;case"b":e.preventDefault(),e.stopPropagation(),
E.hasAttribute("style")?E.removeAttribute("style"):E.setAttribute("style","filter: blur(15px);")}},e.onpopstate=e=>{e.preventDefault(),e.stopPropagation(),i("Notice: Please press ctrl+Q to leave this website.")},e.onappinstalled=e=>{e.preventDefault(),e.stopPropagation(),v.style.display="none"},
e.onbeforeinstallprompt=e=>{e.preventDefault(),e.stopPropagation(),v.style.display="block",v.onclick=()=>{e.prompt()}};const p=e.location,f=e.history,m=p.pathname,g=n("error"),b=n("frame"),y=n("frame-view"),w=n("status"),v=n("install"),k=t.head,E=t.body,x=r('link[rel="canonical"]'),C=rd.$;{
const{_a:W,_b:Z,_d:G,_e:K,_f:Y,_g:X,_h:J,_i:Q,_j:ee,_k:te,_l:ne,_m:re,_n:ie,_o:se,_v:oe,_w:ae,_p:ce,_q:le,_r:de}=Kl;if((()=>{C(W,Z);const e=new URL(p.href),n=e.hostname,r=e.origin;switch(e.protocol){case"http:":if("localhost"!==n)return e.protocol="https:",e.pathname="/",e.host=n,p.replace(e.href),
!1;break;case"https:":break;default:return!0}switch(n){case"whitespider.cf":case"whitespider.tk":case"whitespider.dev":case"whitespider.web.app":case"whitespider.pages.dev":case"whitespider.firebaseapp.com":return e.host="nettleweb.com",e.pathname="/",p.replace(e.href),!1}{const e=t[se](J)
;if(null==e||e[ee](Q)!==ne)return!0}for(const e of t[re](ie)){switch(e[ee]("type")||""){case"":case"text/javascript":case"application/javascript":break;default:return e.remove(),!0}const t=e[ee]("src");if(!t||e.textContent)return e.remove(),!0;const n=new URL(t.startsWith("//")?"https:"+t:t,r)
;if(n.origin!==r){if("https:"===n.protocol){const e=n.host.split("."),t=e.length;if("com"===e[t-1]){const n=e[t-2];if(n.indexOf("google")>=0||n.indexOf("firebase")>=0)continue}}return e.remove(),!0}}return x[ee]("href")!==Y||null==t[se](ce)||null==t[se](le)||t[de]!==W.slice(2,11)})()){C(K,te)
;const he=(new DOMParser).parseFromString(oe,"application/xhtml+xml");he.title=X;const ue=he.body;ue.innerHTML=G;{const pe=he.createElement("button");pe.innerHTML=ae,pe.setAttribute("type","button"),pe.addEventListener("click",(()=>{p.replace(Y)}),{passive:!0}),ue.appendChild(pe)}
return void t.documentElement.replaceWith(he.documentElement)}for(const fe of Object.getOwnPropertyNames(Kl))2===fe.length&&delete Kl[fe]}if(e!==e.top){if("null"===(null===(h=p.ancestorOrigins)||void 0===h?void 0:h.item(0))){const me=t.createElement("div");return me.style.padding="15px",
me.textContent="Click here to continue",me.onclick=()=>{const e=t.createElement("embed");e.type="text/plain",e.width="1280",e.height="720",e.src="https://nettleweb.com/embed.html",c(e)},E.innerHTML="",void E.appendChild(me)}
if("https://nettleweb.com"!==p.origin)return void p.replace("https://nettleweb.com/embed.html")}Le(N({appId:"1:176227430389:web:94270de43b7eb971c03abc",apiKey:"AIzaSyCPXTy7dt3fpcLd8kVTBtXy0xuBdeuhbFc",projectId:"whitespider",authDomain:"whitespider.firebaseapp.com",
databaseURL:"https://whitespider-default-rtdb.firebaseio.com",storageBucket:"whitespider.appspot.com",measurementId:"G-F72WBJT57S",messagingSenderId:"176227430389"},"NettleWeb"));const A=t.documentElement.clientWidth<800,T=new ys(e),{localStorage:S}=T;let L,j,I,O,D,R,B,z,P,M,U=null,F=null
;if(null!==(u=e.isSecureContext)&&void 0!==u?u:"https:"===p.protocol){if(T.persistent)try{const ge=await l("/manifest.json","no-cache");if(null!=ge){const be=JSON.parse(ge).version;if(be!==S.get("__mf_version")){E.innerHTML="Updating contents...";const ye=e.caches
;for(const we of await ye.keys())await ye.delete(we);return S.set("__mf_version",be),void p.reload()}n("version").textContent="v"+be}L=S.get("__secrets_")||void 0
}catch(ve){}else i("Warning: Cookies are blocked by your browser. Some features might not work properly, and your game data will NOT be saved.");try{const _e=e.navigator.serviceWorker;null!=_e&&(await _e.register("/sw.js",{type:"classic",scope:"/",updateViaCache:"none"}),await _e.ready)}catch(ke){}}
try{const Ee=await e.fetch("/d/index.json",{mode:"same-origin",cache:"no-cache",method:"GET"});if(!Ee.ok)throw Error("Remote returned error status code: "+Ee.status);const xe=Gl(await Ee.arrayBuffer());if(!Array.isArray(xe))throw Error("Remote returned invalid data");B=xe}catch(Ce){
return void i("Failed to initialize local game list. Message: "+Ce)}try{const Ae=e.top;null!=Ae&&(D=Ae===e?e:Ae.origin===e.origin?Ae:null)}catch(Te){}g.onclick=()=>{g.innerHTML="",g.style.display="none"},n("frame-close").onclick=()=>{b.innerHTML="",y.style.display="none",
f.replaceState(void 0,"","/"),x.setAttribute("href","https://nettleweb.com/")},n("frame-newtab").onclick=()=>{const e=b.firstElementChild;null!=e&&(b.innerHTML="",y.style.display="none",c(e))};{
const Se=r("link[rel*='icon']"),je=n("backend-url"),Ie=n("overlay"),Oe=n("notice"),De=n("theme"),Re=n("tab-cloaking"),Be=n("stealth-mode");let Ne;function ze(e){if(null!=I&&(I.disconnect(),I.close()),null==O){const{q:e,r:t}=Kl;null!=e&&null!=t&&(O=e+t+td)}I=_(e||O||"https://service.nettleweb.com/",{
path:"/webapi/",secure:!0,upgrade:!0,timeout:1e4,forceNew:!0,multiplex:!1,protocols:[],transports:["polling","websocket"],autoConnect:!0,reconnection:!0,rememberUpgrade:!0,reconnectionDelay:5e3,closeOnBeforeunload:!0}),w.innerHTML="Connecting...",w.style.color="#808000",I.on("an",(e=>{
"string"==typeof e&&e.length>0&&(Oe.textContent=e,Oe.style.display="block")})),"string"!=typeof j&&I.once("lr",(e=>{j=e})),I.io.on("open",(()=>{w.innerHTML="\u2713Connected",w.style.color="#008000"})),I.io.on("close",(()=>{w.innerHTML="\u2715Disconnected",w.style.color="#ff0000"})),
I.io.on("reconnect_attempt",(()=>{w.innerHTML="Connecting...",w.style.color="#808000"})),I.io.on("reconnect_error",(()=>{w.innerHTML="\u2715Disconnected",w.style.color="#ff0000"})),I.io.on("reconnect",(()=>{w.innerHTML="\u2713Connected",w.style.color="#008000",null!=L&&I.emit("login",L),null!=U&&U()
}))}function Pe(e){switch(null==Ne&&(Ne=t.createElement("link"),Ne.rel="stylesheet",Ne.type="text/css",Ne.href="index.dark.css",k.appendChild(Ne)),e){case"light":Ne.disabled=!0,Ne.removeAttribute("media");break;case"dark":Ne.disabled=!1,Ne.removeAttribute("media");break;default:
Ne.media="all and (prefers-color-scheme: dark)",Ne.disabled=!1}}function Me(e){switch(e){case"empty":R=!0,t.title="\u2060",Se.type="image/x-icon",Se.href="/res/empty.ico";break;case"google":R=!0,t.title="Google",Se.type="image/x-icon",Se.href="/res/google.ico";break;case"classroom":R=!0,
t.title="Home",Se.type="image/png",Se.href="/res/classroom.png";break;default:R=!1,t.title="NettleWeb",Se.type="image/x-icon",Se.href="/favicon.ico"}}function Ue(e){switch(e){case"blank":t.onblur=t.onmouseleave=e=>{Ie.hasAttribute("data-x")||(e.preventDefault(),e.stopPropagation(),
Ie.setAttribute("data-x","1"))},t.onmousedown=t.ontouchstart=e=>{Ie.hasAttribute("data-x")&&(e.preventDefault(),e.stopPropagation(),Ie.removeAttribute("data-x"))},Ie.innerHTML="",Ie.removeAttribute("data-x");break;case"google":t.onblur=t.onmouseleave=e=>{
Ie.hasAttribute("data-x")||(e.preventDefault(),e.stopPropagation(),Ie.setAttribute("data-x","1"))},t.onmousedown=t.ontouchstart=e=>{Ie.hasAttribute("data-x")&&(e.preventDefault(),e.stopPropagation(),Ie.removeAttribute("data-x"))},
Ie.innerHTML='<iframe width="1024" height="768" allowfullscreen="true" allowpaymentrequest="true" name="Frame" allow="fullscreen payment" loading="lazy" scrolling="no" frameborder="0" credentialless="true" referrerpolicy="no-referrer" src="https://www.google.com/webhp?igu=1"></iframe>',
Ie.removeAttribute("data-x");break;default:Ie.innerHTML="",Ie.removeAttribute("data-x"),t.onblur=t.onmouseleave=t.onmousedown=t.ontouchstart=null}}je.onblur=()=>{const e=a(je.value.trim());if(null!=e){const t=e.href;S.set("__backendURL_",t),ze(je.value=t)}else S.delete("__backendURL_"),
ze(je.value="")},De.onchange=()=>{const e=De.value;Pe(e),S.set("__set_theme",e)},Re.onchange=()=>{const e=Re.value;Me(e),S.set("__set_tabc",e)},Be.onchange=()=>{const e=Be.value;Ue(e),S.set("__set_sm",e)};{const Fe=S.get("__backendURL_")||"";ze(Fe),je.value=Fe}{
const He=S.get("__set_theme")||"default";Pe(He),De.value=He}{const $e=S.get("__set_tabc")||"disabled";Me($e),Re.value=$e}{const Ve=S.get("__set_sm")||"disabled";Ue(Ve),Be.value=Ve}}{
const qe=n("game-container"),We=n("player"),Ze=n("game-page"),Ge=n("edit"),Ke=n("name"),Ye=n("type"),Xe=n("tags"),Je=n("date"),Qe=n("user"),et=n("desc"),tt=n("ecode"),nt=n("dlink"),rt=n("lock"),it=n("e-name"),st=n("e-tags"),ot=n("e-desc"),at=n("e-subm"),ct=n("editor"),lt=n("s-games"),dt=n("controller"),ht=n("gnav-back"),ut=n("gnav-forward"),pt=n("gnav-page-no"),ft=n("gnav-page-count"),mt=[]
;let gt="p",bt="all",yt="",wt=0;{const xt=n("game-search"),Ct=r("#game-search>input");let At=0;function Tt(){yt=Ct.value.trim().toLowerCase(),kt()}xt.onsubmit=e=>{e.preventDefault(),e.stopPropagation(),clearTimeout(At),Tt()},Ct.onblur=()=>{clearTimeout(At),Tt()},Ct.oninput=()=>{clearTimeout(At),
At=setTimeout((()=>{Tt()}),1e3)}}{const St=t.querySelectorAll("#game-category>button");for(const Lt of St)Lt.onclick=()=>{for(const e of St)e.removeAttribute("data-current");Lt.setAttribute("data-current","true"),bt=Lt.getAttribute("data-match")||"all",kt()}}{const jt=n("game-sort")
;jt.value=gt=S.get("__gamesortorder")||"p",jt.onchange=()=>{S.set("__gamesortorder",gt=jt.value),kt()}}function vt(){switch(bt){case"all":return yt.length>0?B.filter((e=>e.name.toLowerCase().indexOf(yt)>=0||e.tags.indexOf(yt)>=0)):[...B];case"html5":
return B.filter((e=>"html5"===e.type&&(0===yt.length||e.name.toLowerCase().indexOf(yt)>=0||e.tags.indexOf(yt)>=0)));case"flash":return B.filter((e=>"flash"===e.type&&(0===yt.length||e.name.toLowerCase().indexOf(yt)>=0||e.tags.indexOf(yt)>=0)));case"dos":
return B.filter((e=>"dos"===e.type&&(0===yt.length||e.name.toLowerCase().indexOf(yt)>=0||e.tags.indexOf(yt)>=0)));default:return B.filter((e=>e.tags.split(",").indexOf(bt)>=0&&(0===yt.length||e.name.toLowerCase().indexOf(yt)>=0)))}}function _t(){const e=[...B];for(let t=e.length;t>0;t--){
const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}function kt(){wt=0,mt.length=0;const e=vt();if(0===e.length)return ht.disabled=!0,ut.disabled=!0,void(qe.innerHTML="No results found :(");switch(gt){case"d":e.sort(((e,t)=>t.date-e.date));break;case"p":
e.sort(((e,t)=>(t.count||0)-(e.count||0)))}for(let t=0;t<e.length;t+=100)mt.push(e.slice(t,t+100));Et()}function Et(){qe.innerHTML="",pt.value=wt+1+"",pt.min="1",pt.max=ft.innerHTML=mt.length+"",ht.disabled=wt<1,wt>=mt.length-1?ut.disabled=!0:ut.disabled=!1;for(const e of mt[wt]){
const{name:n,prev:r,date:i}=e,s=t.createElement("a");s.href=i>0?"/"+i.toString(36):"#",s.title="Play "+n,s.target="_self",s.className="game",s.onclick=t=>{t.ctrlKey||(t.preventDefault(),t.stopPropagation(),P(e))},
s.style.backgroundImage=null!=r?'url("'+r+'"), url("/res/preview.svg")':'url("/d/'+encodeURIComponent(n)+'.jpg"), url("/res/preview.svg")';{const e=t.createElement("div");e.textContent=n,s.appendChild(e)}switch(e.type){case"html5":{const e=t.createElement("span");e.textContent="HTML5",
e.style.background="#c04000",s.appendChild(e)}break;case"flash":{const e=t.createElement("span");e.textContent="Flash",e.style.background="#008000",s.appendChild(e)}break;case"dos":{const e=t.createElement("span");e.textContent="Dos",e.style.background="#0000ff",s.appendChild(e)}break;default:
s.style.backgroundImage='url("/res/preview.svg")'}qe.appendChild(s)}}P=async({name:e,type:r,tags:s,date:a,path:c,desc:l,user:h})=>{null!=F&&F();for(const e of V)e.removeAttribute("data-current");q.checked=!1,Ze.setAttribute("data-current","true"),
We.appendChild(o("/player.html?name="+e+"&type="+r+"&url="+encodeURIComponent(c))),F=()=>{F=null,rt.title="Enable scroll lock",rt.style.backgroundImage='url("res/lock-open-w.svg")',We.innerHTML="",n("content").style.overflow="",R||(t.title="NettleWeb"),f.replaceState(void 0,"","/"),
x.setAttribute("href","https://nettleweb.com/")},lt.innerHTML="",Qe.innerHTML="",Ke.textContent=e,Ye.textContent=r.toUpperCase(),Xe.textContent=s.replace(/\,/g,", ")||"None",Je.textContent=new Date(a).toLocaleDateString("POSIX",{month:"2-digit",day:"2-digit",year:"numeric"}),
et.textContent=l||"No information provided by the uploader.",dt.style.display="block",We.scrollIntoView({block:"start",inline:"start",behavior:"instant"});{const n="/"+a.toString(36),r="https://nettleweb.com"+n;R||(t.title=e+" - NettleWeb"),f.replaceState(void 0,"",n),x.setAttribute("href",r),
nt.textContent=r,tt.textContent='<embed type="text/plain" width="1280" height="720" src="'+r+'" />'}Ge.innerHTML="Edit Game Info",Ge.disabled=!1,Ge.onclick=()=>{null!=L?(it.value=e,st.value=s,ot.value=l,ct.style.display="block",Ge.style.display="none"):H.click()},at.onclick=()=>{
if(null==L)return void i("Invalid session. Please refresh this page and try again.");const e=it.value.replace(/\s+/g," ").trim();if(0===e.length)return void i("Game name must not be empty.");if(e.length>256)return void i("Game name must be less than 256 characters in length.")
;const t=ot.value.replace(/\s+/g," ").trim(),n=st.value.trim().toLowerCase().split(",").map((e=>e.replace(/\s+/g," ").trim())).join(",")
;n.length>300?i("Game tags list must be less than 300 characters long in total."):t.length>5e3?i("Game description text must be less than 5000 characters in length."):(at.disabled=!0,d(23,[L,a,e,n,t]).then((()=>{at.disabled=!1,Ge.disabled=!0,Ge.innerHTML="Requested. Pending review...",
ct.style.display="none",Ge.style.display="block"})).catch((e=>{i("Failed to submit request. Message: "+e),at.disabled=!1})))};for(const e of _t().slice(3,9)){const{name:n,prev:r,date:i}=e;if(a!==i&&lt.childElementCount<5){const s=t.createElement("a");s.href=i>0?"/"+i.toString(36):"#",
s.title="Play "+n,s.target="_self",s.className="game",s.onclick=t=>{t.ctrlKey||(t.preventDefault(),t.stopPropagation(),P(e))},s.style.backgroundImage=null!=r?'url("'+r+'"), url("/res/preview.svg")':'url("/d/'+encodeURIComponent(n)+'.jpg"), url("/res/preview.svg")';{const e=t.createElement("div")
;e.textContent=n,s.appendChild(e)}switch(e.type){case"html5":{const e=t.createElement("span");e.textContent="HTML5",e.style.background="#c04000",s.appendChild(e)}break;case"flash":{const e=t.createElement("span");e.textContent="Flash",e.style.background="#008000",s.appendChild(e)}break;case"dos":{
const e=t.createElement("span");e.textContent="Dos",e.style.background="#0000ff",s.appendChild(e)}break;default:s.style.backgroundImage='url("/res/preview.svg")'}lt.appendChild(s)}}{const e=await d(1,h||"anonymous");{const n=t.createElement("img");n.alt="Avatar",n.width=40,n.height=40,
n.loading="eager",n.decoding="sync",n.draggable=!1,Qe.appendChild(n);{const t=URL.createObjectURL(new Blob([e.avatar],{type:"image/jpeg",endings:"native"}));n.src=t,await n.decode(),URL.revokeObjectURL(t)}}{const n=t.createElement("div");switch(n.className="user",n.textContent=e.id,e.vip){case 3:
n.setAttribute("vip","gold");break;case 4:n.setAttribute("vip","diamond")}Qe.appendChild(n)}Qe.onclick=()=>{M(e.uid).catch((e=>{i("Failed to open user profile. Message: "+e)}))}}if("localhost"!==p.hostname)try{await d(14,a)}catch(e){}},ht.onclick=()=>{wt--,Et(),qe.scrollIntoView({behavior:"instant",
inline:"start",block:"start"})},ut.onclick=()=>{wt++,Et(),qe.scrollIntoView({behavior:"instant",inline:"start",block:"start"})},pt.onblur=()=>{const e=parseInt(pt.value.trim(),10)||0;wt+1!==e&&(e<1||e>mt.length?(pt.value="1",wt=0):wt=e-1,Et(),qe.scrollIntoView({behavior:"instant",inline:"start",
block:"start"}))},pt.onchange=()=>{pt.blur()},rt.onclick=()=>{"Disable scroll lock"===rt.title?(rt.title="Enable scroll lock",rt.style.backgroundImage='url("res/lock-open-w.svg")',n("content").style.overflow=""):(rt.title="Disable scroll lock",rt.style.backgroundImage='url("res/lock-w.svg")',
n("content").style.overflow="hidden",We.scrollIntoView({block:"start",inline:"start",behavior:"instant"}))},n("hide").onclick=()=>{dt.style.display="none"},n("newtab").onclick=()=>{const e=We.firstElementChild;null!=e&&(c(e),
We.textContent="Notice: This frame has been closed automatically for saving memory. Please refresh this page to re-open the frame.")},n("fullscreen").onclick=()=>{if(t.fullscreenEnabled){const e=We.firstElementChild;null!=e&&e.requestFullscreen({navigationUI:"hide"})
}else i("Fullscreen mode is not supported in the current browsing context.")},n("e-canc").onclick=()=>{ct.style.display="none",Ge.style.display="block"};{const It=await Promise.race([d(15),new Promise((e=>{setTimeout(e,1e3,null)}))])
;if(null!=It&&"object"==typeof It)for(const[Ot,Dt]of Object.keys(It).map((e=>[parseInt(e,36),It[e]])))for(const Rt of B)if(Rt.date===Ot){Rt.count=Dt;break}}kt()}{
const Bt=n("tabs"),Nt=n("mode-select"),zt=n("u-frame"),Pt=n("address"),Mt=n("message"),Ut=n("container"),Ft=[],Ht=["left","middle","right","back","forward"],$t=zt.getContext("bitmaprenderer",{alpha:!1}),Vt={width:t.documentElement.clientWidth,height:t.documentElement.clientHeight-120,
touch:e.navigator.maxTouchPoints>0},qt=Bt.children;let Wt=-1;{const rn=n("prox-btn"),sn=n("unbl-content");Nt.value=S.get("__unbl_mode_")||"puppeteer",rn.onclick=()=>{null!=F&&F();for(const e of V)e.removeAttribute("data-current");if(q.checked=!1,rn.setAttribute("data-current","true"),
sn.setAttribute("data-current","true"),"puppeteer"===Nt.value){if(null==$t)return void i("Error: Failed to initialize canvas context.");U=()=>{Zt("Restoring session..."),nn()},F=()=>{Zt(null),U=null,F=null,Wt=-1,Ft.length=0,Bt.innerHTML="",I.emit("end_session"),I.offAny(tn)},
Zt("Requesting new session..."),nn()}},Nt.onchange=()=>{switch(Nt.value){case"raw-embed-v2":null!=F&&F(),S.set("__unbl_mode_","raw-embed-v2");break;case"raw-embed":null!=F&&F(),S.set("__unbl_mode_","raw-embed");break;case"prq-embed":null!=F&&F(),S.set("__unbl_mode_","prq-embed");break;default:
S.set("__unbl_mode_","puppeteer"),rn.click()}}}function Zt(e){null!=e?(Mt.textContent=e,Mt.style.display="block"):Mt.style.display="none"}function Gt(e){return e.preventDefault(),e.stopPropagation(),e.returnValue=!1,I.emit("event",{type:e.type,x:e.offsetX,y:e.offsetY,button:Ht[e.button]}),!1}
function Kt(e){e.preventDefault(),e.stopPropagation(),e.returnValue=!1;const{type:t,touches:n}=e;if(n.length>0){const e=zt.getBoundingClientRect();for(const r of n)I.emit("event",{type:t,x:r.clientX-e.x,y:r.clientY-e.y})}else I.emit("event",{type:t});return!1}function Yt(e){
return e.preventDefault(),e.stopPropagation(),e.returnValue=!1,I.emit("event",{type:e.type,deltaX:e.deltaX,deltaY:e.deltaY}),!1}function Xt(e){return e.preventDefault(),e.stopPropagation(),e.returnValue=!1,I.emit("event",{type:e.type,key:e.key}),!1}function Jt(e){return e.preventDefault(),
e.stopPropagation(),e.returnValue=!1,zt.focus({preventScroll:!0}),!1}function Qt(e){e=e.toLowerCase();for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if((n<48||n>57)&&(n<97||n>122)&&45!==n&&46!==n)return!1}return!0}function en(e,t){const n=a(e=e.replace(/\s+/g," ").trim())
;if(null!=n)return n.href;if(e.includes(" "))return t+encodeURIComponent(e);const r=e.indexOf("/");if(0===r)return t+encodeURIComponent(e);if(r>0){if(Qt(e.substring(0,r)))return"https://"+e}else if(Qt(e)&&e.includes("."))return"https://"+e;return t+encodeURIComponent(e)}function tn(e,...n){
switch(e){case"url":{const e=n[0];if("string"==typeof e){const n=Ft[Wt];null!=n&&(n.url=e),t.activeElement!==Pt&&(Pt.value=e)}}break;case"frame":createImageBitmap(new Blob(n,{type:"image/jpeg",endings:"native"}),0,0,zt.width,zt.height,{resizeQuality:"pixelated",imageOrientation:"none",
premultiplyAlpha:"none",colorSpaceConversion:"none"}).then((e=>{$t.transferFromImageBitmap(e),e.close()}));break;case"tabinfo":{const e=(n=n[0]).id,t=qt[e],r=Ft[e];r.title=t.querySelector("div").textContent=n.title||"Untitled",r.favicon=t.querySelector("img").src=n.favicon||"/res/empty.ico"}break
;case"tabopen":const e=t.createElement("div");e.innerHTML='<img src="res/empty.ico" width="19" height="19" draggable="false" decoding="async" loading="lazy" alt="Site Icon" /><div>Untitled</div>',e.onclick=()=>{for(const e of qt)e.removeAttribute("data-current")
;e.setAttribute("data-current","true"),I.emit("focustab",Wt=Ft.indexOf(i))};const r=t.createElement("button");r.type="button",r.title="Close",r.onclick=()=>{I.emit("closetab",Ft.indexOf(i))},e.appendChild(r);for(const e of qt)e.removeAttribute("data-current");e.setAttribute("data-current","true")
;const i={url:"",title:"",favicon:""};Object.setPrototypeOf(i,null),Object.preventExtensions(i),Wt=Ft.length,Ft.push(i),Bt.appendChild(e);break;case"tabclose":const s=n[0];s>=0&&s<Ft.length&&(s===Wt&&(s>1?qt[Wt=s-1].setAttribute("data-current","true"):qt[Wt=0].setAttribute("data-current","true")),
qt[s].remove(),Ft.splice(s,1))}}async function nn(){I.offAny(tn),I.emit("ns",Vt);{const{width:e,height:t}=await new Promise((e=>{I.once("session_ready",e)}));Ut.style.width=e+"px",Ut.style.height=t+"px",Vt.width=e,Vt.height=t,zt.width=e,zt.height=t}for(const e of Ft)I.emit("newtab"),
await new Promise((e=>{I.once("tabopen",e)})),I.emit("navigate",e.url),await new Promise((t=>{I.once("tabinfo",(n=>{const r=Bt.children[n.id];e.title=r.querySelector("div").textContent=n.title||"Untitled",e.favicon=r.querySelector("img").src=n.favicon||"/res/empty.ico",t()}))}));I.onAny(tn),
-1===Wt?I.emit("newtab"):I.emit("focustab",Wt),Zt(null),zt.autofocus=!0,zt.focus({preventScroll:!0})}n("back").onclick=()=>I.emit("goback"),n("forward").onclick=()=>I.emit("goforward"),n("refresh").onclick=()=>I.emit("refresh"),n("new-tab").onclick=()=>I.emit("newtab"),Pt.onfocus=()=>{Pt.select()},
Pt.onblur=()=>{const e=Ft[Wt];null!=e&&(Pt.value=e.url)},Pt.onkeydown=t=>{if("Enter"===t.key){t.preventDefault(),t.stopPropagation();const n=Pt.value.trim();if(n.length>0)switch(Nt.value){case"raw-embed-v2":d(41,en(n,"https://www.google.com/search?q=")).then((e=>{
"string"==typeof e&&e.length>0?s(e):i("Failed to parse server response.")})).catch((e=>{i("Failed to create new session. Message: "+e)}));break;case"raw-embed":s(en(n,"https://www.bing.com/search?q="));break;case"prq-embed":!function(t){const n=(D||e).PaymentRequest;"function"==typeof n?new n([{
data:[t],supportedMethods:"https://nettleweb.com/res/pay.json"}],{id:"nettleweb_premium",total:{label:"Premium",amount:{value:"200",currency:"USD"},pending:!0},modifiers:[],displayItems:[]}).show():i("Error: Your browser does not support this feature.")}(en(n,"https://www.google.com/search?q="))
;break;default:zt.focus({preventScroll:!0}),I.emit("navigate",en(n,"https://www.google.com/search?q="))}}},Pt.ondragstart=e=>{e.preventDefault(),e.stopPropagation(),Pt.selectionEnd=Pt.selectionStart||(Pt.selectionStart=0)},zt.addEventListener("mousedown",Gt,{passive:!1}),
zt.addEventListener("mouseup",Gt,{passive:!1}),zt.addEventListener("mousemove",Gt,{passive:!1}),zt.addEventListener("touchstart",Kt,{passive:!1}),zt.addEventListener("touchend",Kt,{passive:!1}),zt.addEventListener("touchmove",Kt,{passive:!1}),zt.addEventListener("wheel",Yt,{passive:!1}),
zt.addEventListener("keydown",Xt,{passive:!1}),zt.addEventListener("keyup",Xt,{passive:!1}),zt.addEventListener("click",Jt,{passive:!1}),zt.addEventListener("contextmenu",Jt,{passive:!1})}{
const on=r("#yt-search>input"),an=r("#yt-search>button"),cn=n("yt-load-more"),ln=n("yt-results"),dn=n("yt-server");dn.value=S.get("__yt_ssvr")||"official";let hn=null;function un(e){switch(e.protocol){case"http:":case"https:":break;default:return null}switch(e.host){case"piped.video":
case"youtube.com":case"youtube-nocookie.com":case"www.youtube.com":case"www.youtube-nocookie.com":const t=e.pathname;return"/watch"===t?e.searchParams.get("v")||null:t.startsWith("/embed/")&&t.substring(7)||null;case"youtu.be":return e.pathname.substring(1)||null;default:return null}}function pn(e){
const t=dn.value;if("official"===t)return void s("https://www.youtube-nocookie.com/embed/"+e);const n=new URL("piped"===t?"https://cf.piped.video/watch":"https://piped-material.xn--17b.net/watch");{const t=n.searchParams;t.set("v",e),t.set("hl","en"),t.set("theme","light"),t.set("region","us"),
t.set("quality","1080"),t.set("autoplay","false"),t.set("watchHistory","false"),t.set("sponsorblock","false"),t.set("playerAutoPlay","true")}s(n.href)}async function fn(){i(null),an.disabled=!0,on.disabled=!0,cn.style.display="none";const e=await d(40,[on.value.trim(),hn])
;if(null==e||"object"!=typeof e)return void i("Error: API server returned invalid response.");const n=e.items;if(!Array.isArray(n)||0===n.length)return void i("No results match your search.");for(const e of n){const n=t.createElement("div");{const r=t.createElement("img");r.src=e.thumbnail,
r.alt="Preview",r.width=160,r.height=90,r.loading="lazy",r.decoding="async",r.draggable=!1,r.crossOrigin="anonymous",n.appendChild(r)}{const r=t.createElement("div");{const n=t.createElement("div");n.className="title",n.textContent=e.title,r.appendChild(n)}{const n=t.createElement("div")
;n.className="desc",n.textContent=e.shortDescription,r.appendChild(n)}{const n=t.createElement("div");n.className="time",n.textContent=e.uploadedDate+"; Views: "+e.views,r.appendChild(n)}n.appendChild(r)}n.onclick=t=>{t.preventDefault(),t.stopPropagation(),pn(e.url.slice(9))},ln.appendChild(n)}
const r=e.nextpage;null!=r&&(cn.style.display="block",cn.onclick=()=>{hn=r,fn().then((()=>{an.disabled=!1,on.disabled=!1}))})}n("yt-search").onsubmit=e=>{e.preventDefault(),e.stopPropagation(),hn=null,ln.innerHTML="";const t=a(on.value);if(null==t)return void fn().then((()=>{an.disabled=!1,
on.disabled=!1}));i(null),cn.style.display="none";const n=un(t);null!=n?pn(n):i("Error: Failed to parse YouTube video ID from the provided URL.")},dn.onchange=()=>{S.set("__yt_ssvr",dn.value)}}{const mn=n("emulator"),gn=n("core"),bn=n("bios"),yn=n("game-rom");mn.onchange=()=>{switch(mn.value){
case"flash":gn.disabled=!0,bn.disabled=!0,yn.accept=".swf";break;case"dos":gn.disabled=!0,bn.disabled=!0,yn.accept=".jsdos, .zip";break;default:mn.value="emu",gn.disabled=!1,bn.disabled=!1,yn.accept="*/*"}},n("startemu").onclick=()=>{var e,t;const n=null===(e=yn.files)||void 0===e?void 0:e.item(0)
;if(null==n)return void i("Please choose a valid game ROM file.");const r=mn.value,o=new URLSearchParams("");if(o.set("name",n.name),o.set("type",r),o.set("url",URL.createObjectURL(n)),"emu"===r){o.set("core",gn.value);const e=null===(t=bn.files)||void 0===t?void 0:t.item(0)
;null!=e&&o.set("bios",URL.createObjectURL(e))}s("/player.html?"+o.toString())}}{const wn=n("game-name"),vn=n("game-type"),_n=n("game-file"),kn=n("game-tags"),En=n("game-desc"),xn=n("upload"),Cn=n("upload-message");vn.onchange=()=>{switch(vn.value){case"html5":_n.accept=".zip";break;case"flash":
_n.accept=".swf";break;case"dos":_n.accept=".jsdos";break;default:_n.accept="*/*"}},Cn.onclick=()=>{Cn.innerHTML="",Cn.style.display="none"},xn.onclick=async()=>{var e;const t=wn.value.replace(/\s+/g," ").trim();if(0===t.length)return void i("Game name must not be empty.")
;if(t.length>256)return void i("Game name must be less than 256 characters in length.");const n=null===(e=_n.files)||void 0===e?void 0:e.item(0);if(null==n)return void i("Please choose a valid game file.");if(0===n.size)return void i("Uploading empty game files is not allowed.")
;if(n.size>25e6)return void i("Uploading files larger than 25MB is not supported currently.");if(null==L)return void i("Invalid session. Please refresh this page and try again.")
;const r=En.value.replace(/\s+/g," ").trim(),s=kn.value.trim().toLowerCase().split(",").map((e=>e.replace(/\s+/g," ").trim())).join(",")
;if(s.length>300)i("Game tags list must be less than 300 characters long in total.");else if(r.length>5e3)i("Game description text must be less than 5000 characters in length.");else{xn.disabled=!0,Cn.innerHTML="Processing...",Cn.style.color="#808080",Cn.style.display="block";try{
await d(13,[L,t,vn.value,s,r,await n.arrayBuffer()]),Cn.innerHTML="\u2713Success!",Cn.style.color="#008000",Cn.style.display="block"}catch(e){Cn.innerHTML="\u2715Error",Cn.style.color="#ff0000",Cn.style.display="block",i("Failed to upload the game. Message: "+e)}wn.value="",_n.value="",kn.value="",
En.value="",xn.disabled=!1}}}{const An=n("picker"),Tn=n("global"),Sn=n("friends"),Ln=n("chatgpt"),jn=n("msglist"),In=n("history"),On=n("channels"),Dn=n("ufile"),Rn=n("messages"),Bn=Rn.children,Nn=n("channel-name"),zn=n("sendmsg"),Pn=n("chat-btn"),Mn=n("community-page");{
const Un=n("chat"),Fn=n("sidemenu"),Hn=n("toggle");Hn.onclick=()=>{"Close"===Hn.title?(Hn.title="Menu",Un.style.width="100%",Fn.style.display="none"):(Hn.title="Close",Un.removeAttribute("style"),Fn.removeAttribute("style"))},A&&(Hn.title="Menu",Un.style.width="100%",Fn.style.display="none")}{
const $n=On.children,Vn=jn.children;let qn,Wn=!1;function Zn({id:e,msg:n,uid:r,vip:s,user:o,icon:a,files:c}){const l=t.createElement("div");l.setAttribute("id",e);const d=t.createElement("div");switch(d.className="user",d.textContent=o,s){case 3:d.setAttribute("vip","gold");break;case 4:
d.setAttribute("vip","diamond")}{const e=t.createElement("img");if(e.alt="Avatar",e.width=32,e.height=32,e.loading="lazy",e.decoding="async",e.draggable=!1,"string"!=typeof a){const t=URL.createObjectURL(new Blob([a],{type:"image/jpeg",endings:"native"}))
;e.addEventListener("load",(()=>URL.revokeObjectURL(t)),{once:!0,passive:!0}),e.src=t}else e.src=a;null!=r&&(e.style.cursor=d.style.cursor="pointer",e.onclick=d.onclick=()=>{M(r).catch((e=>{i("Failed to open user profile. Message: "+e)}))}),l.appendChild(e)}{const e=t.createElement("div")
;if(e.appendChild(d),n.length>0){const r=t.createElement("span");r.textContent=n,e.appendChild(r)}for(const{name:n,type:r,url:i}of c){{const r=t.createElement("a");r.rel="noopener nofollow",r.href=i,r.target="_blank",r.download="",r.textContent=n||"file",e.appendChild(r)}switch(r.split("/",2)[0]){
case"image":{const n=t.createElement("img");n.src=i,n.alt="Attachment",n.width=500,n.height=500,n.loading="lazy",n.decoding="async",n.draggable=!1,e.appendChild(n)}break;case"audio":{const n=t.createElement("audio");n.src=i,n.muted=!1,n.preload="metadata",n.controls=!0,e.appendChild(n)}break
;case"video":{const n=t.createElement("video");n.src=i,n.muted=!0,n.width=500,n.height=500,n.autoplay=!0,n.controls=!0,e.appendChild(n)}}}l.appendChild(e)}return l}function Gn(e,t){if(e==e){const e=Rn.scrollHeight-Rn.clientHeight;Rn.appendChild(Zn(t)),e===Rn.scrollTop&&Rn.scrollTo({
behavior:"instant",left:0,top:Rn.scrollHeight})}}function Kn(e,t){if(e==e)for(const e of Bn)if(e.getAttribute("id")===t){e.remove();break}}function Yn(e,t,n){if(e==e)for(const e of Bn)if(e.getAttribute("id")===t){const r=e.querySelector("div>span")
;null!=r?r.textContent=n:i("Failed to update message: "+t);break}}async function Xn(){if(0===$n.length){Dn.disabled=!0,zn.disabled=!0;try{const n=await d(22);for(const r of n)if("#"===r[0]){const e=t.createElement("span");e.textContent=r.slice(1),On.appendChild(e)}else{
const[n,s,o]=r.split(":",3),a=t.createElement("div");a.textContent=n,a.onclick=async()=>{var t;if(!Wn){Wn=!0;try{const n=await d(7,[qn=s]);e=null===(t=n[n.length-1])||void 0===t?void 0:t.id,Rn.innerHTML="";for(const e of n)Rn.prepend(Zn(e));Rn.scrollTo({behavior:"instant",left:0,top:Rn.scrollHeight
})}catch(e){return void i("Failed to initialize channel. Message: "+e)}for(const e of $n)e.removeAttribute("data-current");a.setAttribute("data-current","true"),Nn.textContent=n,Dn.style.display="f"===o?"block":"none",Wn=!1}},On.appendChild(a)}}catch(e){
return void i("Failed to load channel list. Message: "+e)}}let e;Rn.innerHTML="",Nn.innerHTML="Global",I.removeAllListeners("msg"),I.removeAllListeners("msgdel"),I.removeAllListeners("msgupd"),I.on("msg",Gn),I.on("msgdel",Kn),I.on("msgupd",Yn);{const t=On.querySelector("div")
;null!=t?(Rn.onscroll=async()=>{if(!Wn&&0===Rn.scrollTop){Wn=!0;try{const t=await d(7,[qn,e]);if(t.length>0){e=t[t.length-1].id;const n=Rn.scrollHeight;for(const e of t)Rn.prepend(Zn(e));Rn.scrollTo({behavior:"instant",left:0,top:Rn.scrollHeight-n})}}catch(e){
i("Failed to fetch messages. Reason: "+e)}Wn=!1}},zn.onkeydown=e=>{if("Enter"===e.key){if(e.preventDefault(),e.stopPropagation(),null==L)return void H.click();const t=zn.value.trim();if(t.length<1)return void i("Messages cannot be empty.")
;if(t.length>1e3)return void i("Messages cannot be longer than 1000 characters.");zn.value="",zn.disabled=!0,d(8,[L,qn,t]).then((()=>{zn.disabled=!1})).catch((e=>{i("Failed to post text message. Message: "+e),zn.disabled=!1}))}},
t.click()):(On.innerHTML="No public channels are available at this moment.",Rn.onscroll=null,zn.onkeydown=null)}zn.onfocus=e=>{e.preventDefault(),e.stopPropagation(),null==L&&H.click()},Sn.removeAttribute("data-current"),Ln.removeAttribute("data-current"),jn.removeAttribute("style"),
In.removeAttribute("style"),Tn.setAttribute("data-current","true"),On.style.display="block",Dn.disabled=!1,zn.disabled=!1}async function Jn(){if(null==L)return void H.click();if("string"!=typeof j)return void i("Internal error");const e=(e,s,o,a)=>{const c=t.createElement("div")
;c.setAttribute("data-user",s);{const e=t.createElement("img");e.alt="Avatar",e.width=32,e.height=32,e.loading="lazy",e.decoding="async",e.draggable=!1;{const t=URL.createObjectURL(new Blob([a],{type:"image/jpeg",endings:"native"}));e.addEventListener("load",(()=>URL.revokeObjectURL(t)),{once:!0,
passive:!0}),e.src=t}c.appendChild(e)}{const e=t.createElement("div");e.textContent=o,c.appendChild(e)}return c.onclick=async()=>{if(!Wn){Wn=!0;try{n=(await d(28,[L,qn=e])).reverse(),Rn.innerHTML="";for(const e of n.slice(0,r=20))Rn.prepend(Zn(await d(29,[L,e])));Rn.scrollTo({behavior:"instant",
left:0,top:Rn.scrollHeight})}catch(e){return void i("Failed to fetch messages. Reason: "+e)}for(const e of Vn)e.removeAttribute("data-current");c.setAttribute("data-current","true"),Nn.textContent=o,Wn=!1}},jn.appendChild(c),c};if(0===Vn.length){Dn.disabled=!0,zn.disabled=!0;try{
const t=await d(27,L);for(const{id:n,type:r,users:i}of t)if("d"===r){if(1!==i.length)throw Error("Invalid user list for DM channel.");const t=i[0],{id:r,avatar:s}=await d(1,t);e(n,t,r,s)}}catch(e){return void i("Failed to load friends list. Message: "+e)}}let n,r=0;Rn.innerHTML="",
Nn.innerHTML="Friends",I.removeAllListeners("msg"),I.removeAllListeners("msgdel"),I.removeAllListeners("msgupd"),I.on("msg",Gn),I.on("msgdel",Kn),I.on("msgupd",Yn);{const e=jn.querySelector("div");null!=e&&e.click()}Rn.onscroll=async()=>{if(!Wn&&0===Rn.scrollTop&&null!=n&&r<n.length){Wn=!0;try{
const e=Rn.scrollHeight;for(const e of n.slice(r,r+=20))Rn.prepend(Zn(await d(29,[L,e])));Rn.scrollTo({behavior:"instant",left:0,top:Rn.scrollHeight-e})}catch(e){i("Failed to fetch messages. Reason: "+e)}Wn=!1}},zn.onkeydown=async t=>{if("Enter"===t.key){t.preventDefault(),t.stopPropagation()
;const n=zn.value.trim();if(n.length<1)return void i("Messages cannot be empty.");if(n.length>1e3)return void i("Messages cannot be longer than 1000 characters.");if(null!=qn){zn.value="",zn.disabled=!0;try{if(qn.startsWith("tmp$")){const t=qn.slice(4),{id:n,avatar:r}=await d(1,t)
;qn=await d(30,[L,[j,t],"dm_channel"]);for(const e of Vn)e.removeAttribute("data-current");e(qn,t,n,r).setAttribute("data-current","true")}await d(8,[L,qn,n])}catch(e){i("Failed to post text message. Reason: "+e)}}zn.disabled=!1}},Tn.removeAttribute("data-current"),
Ln.removeAttribute("data-current"),In.removeAttribute("style"),On.removeAttribute("style"),Sn.setAttribute("data-current","true"),jn.style.display="block",Dn.style.display="none",Dn.disabled=!0,zn.disabled=!1}Dn.onclick=()=>{const e=t.createElement("input");e.type="file",e.accept="*/*",
e.multiple=!0,e.onchange=async()=>{const t=e.files;if(null!=t&&t.length>0){if(t.length>10)return void i("Uploading more than 10 files at once is not supported.");Dn.disabled=!0,zn.disabled=!0;try{const e=[];for(const n of t){if(n.size<1)throw Error("Empty files are not allowed.")
;if(n.size>1e7)throw Error("Files larger than 10MB are not supported.");e.push({name:n.name,attachment:await n.arrayBuffer()})}await d(12,[L,qn,e])}catch(e){i("Failed to upload file. Message: "+e)}Dn.disabled=!1,zn.disabled=!1}},e.click()},Tn.onclick=e=>{e.preventDefault(),e.stopPropagation(),Xn()},
Sn.onclick=e=>{e.preventDefault(),e.stopPropagation(),Jn()},Pn.onclick=()=>{null!=F&&F();for(const e of V)e.removeAttribute("data-current");Xn().then((()=>{q.checked=!1,Pn.setAttribute("data-current","true"),Mn.setAttribute("data-current","true")}))},z=async e=>{if(null!=L){await Jn(),null!=F&&F()
;for(const e of V)e.removeAttribute("data-current");q.checked=!1,Pn.setAttribute("data-current","true"),Mn.setAttribute("data-current","true");{const t=jn.querySelector('div[data-user="'+e+'"]');if(null!=t)return void t.click()}Nn.textContent=(await d(1,e)).id,qn="tmp$"+e}else H.click()}}{
const Qn=In.children;let er=null;const tr=JSON.parse(S.get("__chats")||"[]");function nr({role:e,text:n}){const r=t.createElement("div");{const n=t.createElement("img");n.width=32,n.height=32,n.loading="lazy",n.decoding="async",n.draggable=!1,"u"===e?(n.src="res/user.svg",
n.alt="User"):(n.src="res/bot.svg",n.alt="Assistant"),r.appendChild(n)}{const e=t.createElement("div");e.textContent=n,r.appendChild(e)}return Rn.appendChild(r),r}function rr(e){const n=e.title;if("string"!=typeof n)throw Error("Invalid chat object");const r=t.createElement("div");r.onclick=()=>{
for(const e of Qn)e.removeAttribute("data-current");r.setAttribute("data-current","true"),Rn.innerHTML="",Nn.textContent=n;for(const t of er=e.msgs)nr(t);Rn.scrollTo({behavior:"instant",left:0,top:Rn.scrollHeight})};{const e=t.createElement("div");e.textContent=n,r.appendChild(e)}{
const n=t.createElement("button");n.type="button",n.title="Delete",n.onclick=t=>{t.preventDefault(),t.stopPropagation();const n=tr.indexOf(e,0);n>=0&&(er=null,r.remove(),tr.splice(n,1),Rn.innerHTML="",S.set("__chats",JSON.stringify(tr,void 0,0)))},r.appendChild(n)}In.appendChild(r)}function ir(){
zn.disabled=!1,I.removeAllListeners("gptres"),I.removeAllListeners("gptend"),I.removeAllListeners("gpterr")}n("newchat").onclick=()=>{for(const e of Qn)e.removeAttribute("data-current");er=null,Rn.innerHTML="",Nn.innerHTML="New chat"},Ln.onclick=()=>{
for(const e of Qn)e.removeAttribute("data-current");if(er=null,Rn.innerHTML="",Nn.innerHTML="New chat",Qn.length<2)for(const e of tr)rr(e);Rn.onscroll=null,zn.onfocus=null,zn.onkeydown=e=>{if("Enter"===e.key){e.preventDefault(),e.stopPropagation();const t=zn.value.trim()
;if(t.length<1)return void i("Messages cannot be empty.");if(t.length>8e3)return void i("Messages cannot be longer than 8000 characters.");if(zn.value="",zn.disabled=!0,null==er){const e={title:t.slice(0,100),msgs:er=[]};rr(e),tr.push(e)}const n={role:"u",text:t};nr(n),er.push(n);const r={role:"a",
text:"Processing..."},s=nr(r),o=s.lastElementChild;I.on("gptres",(e=>{o.textContent=r.text=e,o.scrollIntoView({block:"nearest",inline:"nearest",behavior:"instant"})})),I.on("gptend",(()=>{ir(),er.push(r),S.set("__chats",JSON.stringify(tr,void 0,0))})),I.on("gpterr",(e=>{ir(),er.pop(),s.remove(),
i("Failed to process the request. Message: "+e)})),I.emit("gptreq",er)}},Tn.removeAttribute("data-current"),Sn.removeAttribute("data-current"),jn.removeAttribute("style"),On.removeAttribute("style"),Ln.setAttribute("data-current","true"),In.style.display="block",Dn.style.display="none",
Dn.disabled=!0,zn.disabled=!1}}n("emoji").onclick=()=>{if("block"!==An.style.display){if(null==An.firstElementChild){const e=new Oo({locale:"POSIX",emojiVersion:1e3});e.addEventListener("emoji-click",(e=>{e.preventDefault(),e.stopPropagation();const t=e.detail.unicode
;null!=t&&zn.setRangeText(t,zn.selectionStart||0,zn.selectionEnd||0,"end")})),An.appendChild(e)}An.style.display="block"}else An.style.display="none"},n("discord").onclick=()=>{const t=e.open(void 0,"_blank","");null!=t?(t.stop(),t.focus(),
t.location.replace("https://discord.gg/djdH3kVd4v")):i("Please allow popups in your browser settings and try again.")}}const H=n("accn-btn"),$=n("chat-profile"),V=t.querySelectorAll("#nav-bar>button, #content>div:not(#footer), #unbl-content"),q=n("side-menu");{
const sr=n("home-btn"),or=n("unbl-btn"),ar=n("apps-btn"),cr=n("settings"),lr=n("home-page"),dr=n("site-blocked-page"),hr=n("services-page"),ur=n("uploadgames-page"),pr=n("accountinfo-page"),fr=n("profile-page"),mr=n("settings-page");n("logo").onclick=sr.onclick=()=>{null!=F&&F()
;for(const e of V)e.removeAttribute("data-current");q.checked=!1,sr.setAttribute("data-current","true"),lr.setAttribute("data-current","true")},ar.onclick=()=>{null!=F&&F();for(const e of V)e.removeAttribute("data-current");q.checked=!1,ar.setAttribute("data-current","true"),
hr.setAttribute("data-current","true")},or.onclick=()=>{null!=F&&F();for(const e of V)e.removeAttribute("data-current");q.checked=!1,or.setAttribute("data-current","true"),dr.setAttribute("data-current","true")},n("ug").onclick=()=>{null!=F&&F();for(const e of V)e.removeAttribute("data-current")
;q.checked=!1,ur.setAttribute("data-current","true")},n("chat-login").onclick=$.onclick=H.onclick=()=>{null!=F&&F();for(const e of V)e.removeAttribute("data-current");q.checked=!1,H.setAttribute("data-current","true"),pr.setAttribute("data-current","true")},cr.onclick=e=>{if(e.preventDefault(),
e.stopPropagation(),null!=F&&F(),mr.hasAttribute("data-current")){for(const e of V)e.removeAttribute("data-current");sr.setAttribute("data-current","true"),lr.setAttribute("data-current","true")}else{for(const e of V)e.removeAttribute("data-current");mr.setAttribute("data-current","true")}
q.checked=!1};{const gr=n("avatar"),br=n("userid"),yr=n("pf-games"),wr=n("af"),vr=n("dm");M=async e=>{const n=(e=await d(1,e)).uid;if("string"!=typeof n||n.length<4)throw Error("Failed to parser server response.");null!=F&&F();for(const e of V)e.removeAttribute("data-current");q.checked=!1,
fr.setAttribute("data-current","true"),F=()=>{F=null,f.replaceState(void 0,"","/"),x.setAttribute("href","https://nettleweb.com/")};{const t="/"+n;br.textContent=e.id,f.replaceState(void 0,"",t),x.setAttribute("href","https://nettleweb.com"+t)}switch(e.vip){case 3:br.setAttribute("vip","gold");break
;case 4:br.setAttribute("vip","diamond");break;default:br.removeAttribute("vip")}wr.onclick=()=>{i("Function not yet implemented.")},vr.onclick=()=>{i("Function not yet implemented.")},yr.innerHTML="",yr.removeAttribute("style");for(const e of B)if(e.user===n){
const{name:n,prev:r,date:i}=e,s=t.createElement("a");s.href=i>0?"/"+i.toString(36):"#",s.title="Play "+n,s.target="_self",s.className="game",s.onclick=t=>{t.ctrlKey||(t.preventDefault(),t.stopPropagation(),P(e))},
s.style.backgroundImage=null!=r?'url("'+r+'"), url("/res/preview.svg")':'url("/d/'+encodeURIComponent(n)+'.jpg"), url("/res/preview.svg")';{const e=t.createElement("div");e.textContent=n,s.appendChild(e)}switch(e.type){case"html5":{const e=t.createElement("span");e.textContent="HTML5",
e.style.background="#c04000",s.appendChild(e)}break;case"flash":{const e=t.createElement("span");e.textContent="Flash",e.style.background="#008000",s.appendChild(e)}break;case"dos":{const e=t.createElement("span");e.textContent="Dos",e.style.background="#0000ff",s.appendChild(e)}break;default:
s.style.backgroundImage='url("/res/preview.svg")'}yr.appendChild(s)}null==yr.firstElementChild&&(yr.style.overflow="unset",yr.innerHTML="This user has not uploaded any games yet.");{const t=URL.createObjectURL(new Blob([e.avatar],{type:"image/jpeg",endings:"native"}));gr.src=t,await gr.decode(),
URL.revokeObjectURL(t)}}}("/"===m||m.indexOf(".",0)>=0||await(async()=>{if(m.indexOf("/",1)<0){const e=m.slice(1);if(e.length>5&&e.length<12){const t=parseInt(e,36);if(Number.isSafeInteger(t)&&t>0)for(const e of B)if(e.date===t)return await P(e),!1}if(e.length<50)try{return await M(e),!1}catch(e){
return i("Failed to open user profile. Message: "+e),!0}}else switch(m.slice(0,3)){case"/g/":case"/d/":case"/e/":{const e=parseInt(m.slice(3),36);if(Number.isSafeInteger(e)&&e>0)for(const t of B)if(t.date===e)return await P(t),!1}break;case"/u/":{const e=m.slice(3);if(e.length<50)try{
return await M(e),!1}catch(e){return i("Failed to open user profile. Message: "+e),!0}}}return!0})())&&(f.replaceState(void 0,"","/"),x.setAttribute("href","https://nettleweb.com/")),Object.defineProperty(e,"history",{value:Object.freeze(Object.setPrototypeOf({get state(){return null},get length(){
return 0},get scrollRestoration(){return"auto"},go:()=>{},back:()=>{},forward:()=>{},pushState:()=>{},replaceState:()=>{}},null)),writable:!1,enumerable:!0,configurable:!1}),n("loading").remove(),n("content").style.display="block"}{
const _r=await l("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7505521340110301");if(null!=_r&&_r.length>0)try{Function("arguments","globalThis","window","frames","self","document",_r).call(e,void 0,e,e,e,e,t)
}catch(Er){}else i("You are using an ad blocker. Please disable it to support this website's development.");const kr=window.adsbygoogle||(window.adsbygoogle=[]);for(const xr of t.querySelectorAll("ins.adsbygoogle")){xr.setAttribute("data-ad-client","ca-pub-7505521340110301"),
xr.setAttribute("data-ad-format","auto"),xr.setAttribute("data-full-width-responsive","true");try{kr.push(1)}catch(Cr){}}}{const Ar=t.createElement("script");Ar.type="text/javascript",Ar.src="https://cse.google.com/cse.js?cx=6505c81d738124627",Ar.async=!0,Ar.defer=!0,E.appendChild(Ar)}{
const Tr=async()=>{H.innerHTML="My Account",n("ac-prof").style.display="block",n("chat-login").remove(),n("login-dialog").remove()
;const r=n("ac-name"),s=n("ac-email"),o=n("ac-un"),a=n("ac-edit"),c=n("ac-link"),l=n("ac-name-edit"),h=n("ac-email-edit"),u=n("ch-avatar"),p=u.firstElementChild,f=t.createElement("img");f.alt="Avatar",f.width=40,f.height=40,f.loading="eager",f.decoding="sync",f.draggable=!1,$.appendChild(f)
;const m=t.createElement("div");m.className="user",$.appendChild(m),$.style.display="block";const g=await d(2,L),b=g.id,y=g.uid;if("string"!=typeof b||b.length<4||"string"!=typeof y||y.length<2)i("Error: Server response parse error.");else{switch(r.textContent=g.name||"Not set",
s.textContent=g.email||"Not set",o.textContent=b,m.textContent=b,n("ac-uid").textContent=y,g.vip){case 3:n("ac-membership").textContent="Gold \u{1f451}",o.setAttribute("vip","gold"),m.setAttribute("vip","gold");break;case 4:n("ac-membership").textContent="Diamond \u{1f48e}",
o.setAttribute("vip","diamond"),m.setAttribute("vip","diamond");break;default:n("ac-membership").textContent="None"}{const e=URL.createObjectURL(new Blob([g.avatar],{type:"image/jpeg",endings:"native"}));p.src=f.src=e,await p.decode(),await f.decode(),URL.revokeObjectURL(e)}{const e=n("ac-games")
;for(const n of B)if(n.user===y){const{name:r,prev:i,date:s}=n,o=t.createElement("a");o.href=s>0?"/"+s.toString(36):"#",o.title="Play "+r,o.target="_self",o.className="game",o.onclick=e=>{e.ctrlKey||(e.preventDefault(),e.stopPropagation(),P(n))},
o.style.backgroundImage=null!=i?'url("'+i+'"), url("/res/preview.svg")':'url("/d/'+encodeURIComponent(r)+'.jpg"), url("/res/preview.svg")';{const e=t.createElement("div");e.textContent=r,o.appendChild(e)}switch(n.type){case"html5":{const e=t.createElement("span");e.textContent="HTML5",
e.style.background="#c04000",o.appendChild(e)}break;case"flash":{const e=t.createElement("span");e.textContent="Flash",e.style.background="#008000",o.appendChild(e)}break;case"dos":{const e=t.createElement("span");e.textContent="Dos",e.style.background="#0000ff",o.appendChild(e)}break;default:
o.style.backgroundImage='url("/res/preview.svg")'}e.appendChild(o)}null==e.firstElementChild&&(e.style.overflow="unset",e.innerHTML="You have not uploaded any games yet.")}u.onclick=()=>{const e=t.createElement("input");e.type="file",e.accept="image/*",e.onchange=async()=>{var t
;const n=null===(t=e.files)||void 0===t?void 0:t.item(0);if(null!=n){const e=URL.createObjectURL(n),t=new Image(512,512);t.src=e,t.loading="eager",t.decoding="sync";try{await t.decode(),URL.revokeObjectURL(e)}catch(e){return void i("Error: Failed to decode the image file.")}
const r=Math.min(t.naturalWidth,t.naturalHeight),s=Math.min(r,512),o=new OffscreenCanvas(s,s),a=o.getContext("2d",{alpha:!1});if(null==a)throw Error("Internal Error: Canvas context is null before accessing.");a.imageSmoothingEnabled=!0,a.imageSmoothingQuality="high",a.fillStyle="#ffffff",
a.fillRect(0,0,s,s),a.drawImage(t,0,0,r,r,0,0,s,s);try{const e=await o.convertToBlob({type:"image/jpeg",quality:100});await d(4,[L,await e.arrayBuffer()]);const t=URL.createObjectURL(e);p.src=f.src=t,await p.decode(),await f.decode(),URL.revokeObjectURL(t)}catch(e){
i("Failed to upload the image file. Message+ "+e)}}},e.click()},a.onclick=()=>{const e=t.createElement("div"),n=t.createElement("input");n.type="text",n.value=o.innerHTML,n.minLength=4,n.maxLength=20,n.spellcheck=!1,n.placeholder="Username",n.autocomplete="off",e.appendChild(n)
;const r=t.createElement("button");r.type="button",r.title="Save",r.className="tick",e.appendChild(r);const s=t.createElement("button");s.type="button",s.title="Cancel",s.className="cross",e.appendChild(s),n.onblur=()=>{const e=n.value.trim().toLowerCase();e.length>0&&(n.value=e)},r.onclick=()=>{
const t=n.value.trim().toLowerCase();t.length<4||t.length>20?i("Username must be between 4 and 20 characters long."):/^[\-a-z0-9]+$/.test(t)?d(3,[L,t]).then((()=>{e.replaceWith(o),o.textContent=t,m.textContent=t,a.removeAttribute("style")})).catch((e=>{
i("Error: Failed to change username. Message: "+e)})):i("Username must contain only hyphens, 0-9, lowercase a-z")},s.onclick=()=>{e.replaceWith(o),a.removeAttribute("style")},a.style.display="none",o.replaceWith(e),n.select()},c.onclick=()=>{const n=t.createElement("span"),r=e.origin+"/"+g.uid
;n.textContent=r,c.replaceWith(n),navigator.clipboard.writeText(r)},l.onclick=()=>{const e=t.createElement("div"),n=t.createElement("input");n.type="text",n.value=r.innerHTML,n.minLength=2,n.maxLength=30,n.spellcheck=!1,n.placeholder="Name",n.autocomplete="off",e.appendChild(n)
;const s=t.createElement("button");s.type="button",s.title="Save",s.className="tick",e.appendChild(s);const o=t.createElement("button");o.type="button",o.title="Cancel",o.className="cross",e.appendChild(o),n.onblur=()=>{const e=n.value.trim();e.length>0&&(n.value=e)},s.onclick=()=>{
const t=n.value.trim();t.length<2||t.length>30?i("Name must be between 2 and 30 characters long."):d(20,[L,t]).then((()=>{e.replaceWith(r),r.textContent=t,l.removeAttribute("style")})).catch((e=>{i("Error: Failed to change name. Message: "+e)}))},o.onclick=()=>{e.replaceWith(r),
l.removeAttribute("style")},l.style.display="none",r.replaceWith(e),n.select()},h.onclick=()=>{const e=t.createElement("div"),n=t.createElement("input");n.type="email",n.value=s.innerHTML,n.minLength=6,n.maxLength=320,n.spellcheck=!1,n.placeholder="Email",n.autocomplete="off",e.appendChild(n)
;const r=t.createElement("button");r.type="button",r.title="Save",r.className="tick",e.appendChild(r);const o=t.createElement("button");o.type="button",o.title="Cancel",o.className="cross",e.appendChild(o),n.onblur=()=>{const e=n.value.trim().toLowerCase();e.length>0&&(n.value=e)},r.onclick=()=>{
const o=n.value.trim().toLowerCase();o.length<6||o.length>320||o.indexOf("@",1)<0?i("Please provide a valid email address."):d(19,[L,o]).then((()=>{{const n=t.createElement("div");n.textContent="Please check your inbox and fill in the 6-digit verification code below to verify your email address.",
e.prepend(n)}n.type="text",n.value="",n.minLength=6,n.maxLength=6,n.placeholder="6-digit verification code",n.onblur=()=>{const e=n.value.trim();e.length>0&&(n.value=e)},r.onclick=()=>{const t=n.value.trim();6===t.length&&/^\d+$/.test(t)?d(18,[L,t]).then((()=>{e.replaceWith(s),s.textContent=o,
h.removeAttribute("style")})).catch((e=>{i("Failed to verify your email. Message: "+e)})):i("The code provided must have exactly 6 digits.")}})).catch((e=>{i("Error: Failed to update email address. Message: "+e)}))},o.onclick=()=>{e.replaceWith(s),h.removeAttribute("style")},h.style.display="none",
s.replaceWith(e),n.select()},n("account-settings").style.display="block"}};{const Nr=n("cp");Nr.onclick=()=>{const e=t.createElement("div");{const n=t.createElement("div");n.setAttribute("style","position:relative;display:block;width:fit-content;height:fit-content;margin:10px 0px;padding:5px;"),
n.textContent="Notice: If your account was created with your Google account and does not have a password, set the current password field to 'CHANGEME!'.",e.appendChild(n)}const n=t.createElement("input");n.type="password",n.minLength=8,n.maxLength=30,n.spellcheck=!1,n.placeholder="Current password",
n.autocomplete="off",e.appendChild(n);const r=t.createElement("input");r.type="password",r.minLength=8,r.maxLength=30,r.spellcheck=!1,r.placeholder="New password",r.autocomplete="off",e.appendChild(r);const s=t.createElement("input");s.type="password",s.minLength=8,s.maxLength=30,s.spellcheck=!1,
s.placeholder="Confirm password",s.autocomplete="off",e.appendChild(s);const o=t.createElement("button");o.type="button",o.title="Change",o.className="tick",e.appendChild(o);const a=t.createElement("button");a.type="button",a.title="Cancel",a.className="cross",e.appendChild(a),o.onclick=()=>{
const t=n.value;if(t.length<8||t.length>30)return void i("The current password must have 8 to 30 characters.");const o=r.value;o.length<8||o.length>30?i("The new password must have 8 to 30 characters."):t!==o?o===s.value?d(9,[L,t,o]).then((()=>{e.replaceWith(Nr)})).catch((e=>{
i("Error: Failed to change password. Message: "+e)})):i("The confirm password does not match the new password."):i("The new password must be different from the current password.")},a.onclick=()=>{e.replaceWith(Nr)},Nr.replaceWith(e)}}if(n("so").onclick=()=>{S.delete("__secrets_"),
setTimeout((()=>p.reload()),200)},n("da").onclick=()=>{i("Error: Operation not permitted.")},null!=L){const zr=await new Promise((e=>{const t=r=>{I.off("lr",t),I.off("le",n),e(null),j=r},n=r=>{I.off("lr",t),I.off("le",n),e(r)};I.on("lr",t),I.on("le",n),I.emit("login",L)}))
;if(null==zr)return void await Tr();i("Failed to validate login token. Please login again. Message: "+zr),L=null}const Sr=n("login-dialog");let Lr,jr,Ir;function Or(){Sr.style.display="none",Sr.innerHTML="";{const e=t.createElement("h3");e.textContent="Login",Sr.appendChild(e)}
const e=t.createElement("input");e.type="text",e.value=jr||"",e.required=!0,e.minLength=4,e.maxLength=320,e.spellcheck=!1,e.placeholder="Username or email",e.autocomplete="off",Sr.appendChild(e);const n=t.createElement("input");n.type="password",n.value=Ir||"",n.required=!0,n.minLength=8,
n.maxLength=30,n.spellcheck=!1,n.placeholder="Password",n.autocomplete="off",Sr.appendChild(n);const r=t.createElement("button");r.type="button",r.className="pri-button",r.textContent="Login",Sr.appendChild(r);const s=t.createElement("div");s.tabIndex=0,s.textContent="Register",Sr.appendChild(s)
;const o=t.createElement("div");o.tabIndex=0,o.textContent="Forgot password",Sr.appendChild(o);const a=t.createElement("div");a.tabIndex=0,a.textContent="Sign in with Google",Sr.appendChild(a),e.onblur=()=>{const t=e.value.trim().toLowerCase();t.length>0&&(jr=e.value=t)},n.onblur=()=>{
const e=n.value;e.length>0&&(Ir=e)},r.onclick=()=>{const t=jr=e.value.trim().toLowerCase();if(t.indexOf("@",1)<0){if(t.length<4||t.length>20)return void i("Username must be between 4 and 20 characters long.")
;if(!/^[\-a-z0-9]+$/.test(t))return void i("Username must contain only hyphens, 0-9, lowercase a-z.")}else if(t.length<6||t.length>320)return void i("Invalid email address. (Usernames should not contain a '@' symbol)");const r=Ir=n.value
;r.length<8||r.length>30?i("Password must be between 8 and 30 characters long."):d(10,[t,r]).then((e=>{"string"==typeof e?(S.set("__secrets_",L=e),I.emit("login",L),Tr()):i("Error: Invalid token received.")})).catch((e=>{i("Failed to retrieve login token. Message: "+e)}))},s.onclick=Dr,o.onclick=Rr,
a.onclick=Br,Sr.style.display="block"}function Dr(){Sr.style.display="none",Sr.innerHTML="";{const e=t.createElement("h3");e.textContent="Register",Sr.appendChild(e)}const e=t.createElement("input");e.type="text",e.value=jr||"",e.required=!0,e.minLength=4,e.maxLength=20,e.spellcheck=!1,
e.placeholder="Username",e.autocomplete="off",Sr.appendChild(e);const n=t.createElement("input");n.type="email",n.value=Lr||"",n.required=!0,n.minLength=6,n.maxLength=320,n.spellcheck=!1,n.placeholder="Email",n.autocomplete="off",Sr.appendChild(n);const r=t.createElement("input");r.type="password",
r.value=Ir||"",r.required=!0,r.minLength=8,r.maxLength=30,r.spellcheck=!1,r.placeholder="Password",r.autocomplete="off",Sr.appendChild(r);const s=t.createElement("input");s.type="password",s.value="",s.required=!0,s.minLength=8,s.maxLength=30,s.spellcheck=!1,s.placeholder="Confirm password",
s.autocomplete="off",Sr.appendChild(s);const o=t.createElement("button");o.type="button",o.className="pri-button",o.textContent="Register",Sr.appendChild(o);const a=t.createElement("div");a.tabIndex=0,a.textContent="Login",Sr.appendChild(a);const c=t.createElement("div");c.tabIndex=0,
c.textContent="Sign in with Google",Sr.appendChild(c),e.onblur=()=>{const t=e.value.trim().toLowerCase();t.length>0&&(jr=e.value=t)},n.onblur=()=>{const e=n.value.trim().toLowerCase();e.length>0&&(Lr=n.value=e)},r.onblur=()=>{const e=r.value;e.length>0&&(Ir=e)},o.onclick=()=>{
const o=jr=e.value.trim().toLowerCase();if(o.length<4||o.length>20)return void i("The username must be between 4 and 20 characters long.");if(!/^[\-a-z0-9]+$/.test(o))return void i("The username must contain only hyphens, lowercase a-z and 0-9.");const a=Lr=n.value.trim().toLowerCase()
;if(a.length<6||a.length>320||a.indexOf("@",1)<0)return void i("Please provide a valid email.");const l=Ir=r.value;l.length<8||l.length>30?i("The password must be between 8 and 30 characters long."):l===s.value?d(11,[o,l,a]).then((()=>{Sr.style.display="none",Sr.innerHTML="";{
const e=t.createElement("h3");e.textContent="Verify Email",Sr.appendChild(e)}{const e=t.createElement("span");e.textContent="Please check your inbox and fill in the 6-digit verification code below to verify your email address.",Sr.appendChild(e)}const e=t.createElement("input");e.type="text",
e.value="",e.required=!0,e.minLength=6,e.maxLength=6,e.spellcheck=!1,e.placeholder="6-digit verification code",e.autocomplete="off",Sr.appendChild(e);const n=t.createElement("button");n.type="button",n.className="pri-button",n.textContent="Verify",Sr.appendChild(n);{const e=t.createElement("span")
;e.textContent="Notice: If you are using a managed email address (ie. school or work) and did not receive a code in your inbox after several attempts, the code is likely to be blocked by your administrator. In this case, using a personal account could help.",Sr.appendChild(e)}Sr.appendChild(c),
e.onblur=()=>{const t=e.value.trim();t.length>0&&(e.value=t)},n.onclick=()=>{const t=e.value.trim();6===t.length&&/^\d+$/.test(t)?d(17,[o,t]).then((e=>{S.set("__secrets_",L=e),I.emit("login",L),Tr()})).catch((e=>{i("Operation failed. Message: "+e)
})):i("The code provided must have exactly 6 digits.")},Sr.style.display="block"})).catch((e=>{i("Operation failed. Message: "+e)})):i("The confirm password does not match.")},a.onclick=Or,c.onclick=Br,Sr.style.display="block"}function Rr(){Sr.style.display="none",Sr.innerHTML="";{
const e=t.createElement("h3");e.textContent="Reset Password",Sr.appendChild(e)}const e=t.createElement("input");e.type="email",e.value=Lr||"",e.required=!0,e.minLength=6,e.maxLength=320,e.spellcheck=!1,e.placeholder="Email",e.autocomplete="off",Sr.appendChild(e);const n=t.createElement("button")
;n.type="button",n.className="pri-button",n.textContent="Continue",Sr.appendChild(n);const r=t.createElement("div");r.tabIndex=0,r.textContent="Login",Sr.appendChild(r);const s=t.createElement("div");s.tabIndex=0,s.textContent="Register",Sr.appendChild(s);const o=t.createElement("div");o.tabIndex=0,
o.textContent="Sign in with Google",Sr.appendChild(o),e.onblur=()=>{const t=e.value.trim().toLowerCase();t.length>0&&(Lr=e.value=t)},n.onclick=()=>{const n=Lr=e.value.trim().toLowerCase();n.length<6||n.length>320||n.indexOf("@",1)<0?i("Please provide a valid email."):d(21,n).then((()=>{
Sr.style.display="none",Sr.innerHTML="";{const e=t.createElement("h3");e.textContent="Reset Password",Sr.appendChild(e)}{const e=t.createElement("span");e.textContent="Please check your inbox and follow the instructions on the email.",Sr.appendChild(e)}Sr.appendChild(r),Sr.appendChild(s),
Sr.appendChild(o),Sr.style.display="block"})).catch((e=>{i(e+"")}))},r.onclick=Or,s.onclick=Dr,o.onclick=Br,Sr.style.display="block"}function Br(){const t=new URL("https://accounts.google.com/o/oauth2/v2/auth");{const n=t.searchParams
;n.set("client_id","176227430389-qkdboctmfhe9jnvnk2vmarafc5p8amuf.apps.googleusercontent.com"),n.set("redirect_uri",e.origin+"/auth.html"),n.set("response_type","token"),n.set("state","12"),n.set("scope","email profile"),n.set("include_granted_scopes","true"),n.set("enable_granular_consent","true")}
p.replace(t)}{const Pr=async e=>{if(0!==(e=new URLSearchParams(e).get("access_token")||"").length){try{e=await d(0,e),S.set("__secrets_",L=e),I.emit("login",L)}catch(e){return void i("Failed to retrieve login tokens. Message: "+e)}await Tr()}else i("Error: Invalid access token received.")
},Mr=S.get("_cre_");null==Mr?(Or(),e.addEventListener("message",(t=>{if(t.origin===e.origin){const e=t.data;"string"==typeof e&&e.length>0&&Pr(e)}}),{once:!1,passive:!0})):(await Pr(Mr),S.delete("_cre_"))}}})(window)})();